
<h1 class="sectionedit1" id="php_-_design_patterns">PHP - Design Patterns</h1>
<div class="level1">

<p>
Developers have been developing since computers first began. This means we have a history of common problems and have constructed solutions to these, shared them and over decades optimised them. This article will discuss common problems that you&#039;ll face when constructing your web application, and the best practices to deal with them. This article cannot possible cover all design patterns, and some problems require extracurricular study or outside expertise in computer science or mathematics to solve. In fact some problems are not actually computational problems but are people problems.
</p>

<p>
Note that the term design patterns in programming often refers to <a href="http://en.wikipedia.org/wiki/Software design pattern" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Software design pattern">specific practices that have been given a name and have a large following in theory</a>. This article defines design patterns as more broad than that, it will cover practices that only come with experience and practices that come out of theory.
</p>

<p>
Also check out this <a href="http://www.mindmeister.com/7008138/design-patterns" class="urlextern" title="http://www.mindmeister.com/7008138/design-patterns"  rel="nofollow">mindmap of different design patterns and their categories</a>:
</p>

<p>
<iframe title="" src="http://www.mindmeister.com/maps/public_map_shell/263325254/design-patterns?width=600&amp;height=400&amp;z=auto" style="width:427px; height:356px" frameborder="0" scrolling="no"></iframe>
</p>

</div>
<!-- EDIT1 SECTION "PHP - Design Patterns" [1-1246] -->
<h2 class="sectionedit2" id="php_standards">PHP Standards</h2>
<div class="level2">

<p>
There are a million ways to skin a cat. Just because you can skin the cat in the way you currently prefer, doesn&#039;t mean you should. We follow standards to help collaboration, scalability and maintainability. Of course standards are not religion, you&#039;ll need to balance the effort against reward when complying with standards.
</p>

<p>
For a long time <abbr title="Hypertext Preprocessor">PHP</abbr> didn&#039;t have any standards. That is why it can be written procedurally or object oriented and incorporate aspects of functional.
</p>

<p>
However the <a href="http://www.php-fig.org/" class="urlextern" title="http://www.php-fig.org/"  rel="nofollow">PHP FIG team</a> was constructed out of representatives from major <abbr title="Hypertext Preprocessor">PHP</abbr> frameworks. They came together to create standards for the framework development and <abbr title="Hypertext Preprocessor">PHP</abbr> in general. Their standards are called PSR (<abbr title="Hypertext Preprocessor">PHP</abbr> Standard Recommendations). You can find all of the <a href="https://github.com/php-fig/fig-standards/tree/master/accepted" class="urlextern" title="https://github.com/php-fig/fig-standards/tree/master/accepted"  rel="nofollow">accepted (voted in) standards on their Github repository</a>.
</p>

<p>
One important standard that isn&#039;t mentioned in the PSRs, is the docblock syntax. Comments in <abbr title="Hypertext Preprocessor">PHP</abbr> can be written via double forward slashes or a single hash.
</p>
<pre class="code php"><span class="co2">#this is a comment
</span><span class="co1">//this is also a comment, most libraries use the // style because it looks nicer. Many languages use the // instead of the # so it keeps things consistent.</span>
<span class="coMULTI">/*
This
is
a
multiline
comment
*/</span></pre>

<p>
This is useful for one liner comments. However sometimes we need to write larger comments to explain functions, methods and classes. You should use the <a href="http://en.wikipedia.org/wiki/PHPDoc" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/PHPDoc">PHPDoc docblock syntax</a>. The syntax is also sometimes used by libraries which use meaningful commenting to inject code or other features into your coding. One example is dependency injection that is managed by docblock comments. However I am not a fan of this approach as I think this confuses people and comments should be comments, not meta programming code.
</p>

</div>
<!-- EDIT2 SECTION "PHP Standards" [1247-3082] -->
<h3 class="sectionedit3" id="psr-0">PSR-0</h3>
<div class="level3">

<p>
The PSR-0 standard was their first standard and the most readily accepted standard by the <abbr title="Hypertext Preprocessor">PHP</abbr> community. This was for autoloading and structuring of sharable code libraries. We already went through the PSR-0 standard in <a href="/doku.php?id=web_application_development:php_-_server_side_architecture#composer_libraries" class="wikilink1" title="web_application_development:php_-_server_side_architecture">the composer section in the server side architecture article</a>. The <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md" class="urlextern" title="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md"  rel="nofollow">official documentation is located on Github</a>.
</p>

<p>
Not all of our libraries need to be PSR-0 based. Only those that we want shareable. Some libraries are actually a simple static class, and they will be autoloaded based on a class map and not namespacing. This is what was done with the CiTemplating library. The reason being is that if you use any of the static methods, you would need to call the namespace in every view file. This is usually not a problem in parser based templating libraries, because of their domain specific language. But this was straight and simple <abbr title="Hypertext Preprocessor">PHP</abbr>.
</p>

<p>
Codeigniter itself is not a PSR-0 framework, if it were, everything from controllers to models would require namespacing and autoloading. However newer frameworks are becoming fully PSR-0 based, if you&#039;re interested take a look at the <a href="http://laravel.com/" class="urlextern" title="http://laravel.com/"  rel="nofollow">Laravel framework</a>. For now you won&#039;t need all those complexities so we&#039;ll stick with Codeigniter.
</p>

<p>
Remember since we&#039;re using CiAutoloading, we can put PSR-0 libraries into our own libraries directory or third_party directory, or we could use Composer to autoload them for us.
</p>

</div>
<!-- EDIT3 SECTION "PSR-0" [3083-4624] -->
<h3 class="sectionedit4" id="psr-1">PSR-1</h3>
<div class="level3">

<p>
The <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md" class="urlextern" title="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-1-basic-coding-standard.md"  rel="nofollow">PSR-1 standard is a basic coding style standard</a>. You don&#039;t have to follow it to the letter, but doing so will help interoperability between developers.
</p>

<p>
Some of the important highlights is the practice of StudlyCaps for class names. It&#039;s also a good practice to follow StudlyCaps for folder directories holding classes, as this will keep things consistent for namespacing. Notice also that it also specifies that your class method names should be camelCased, but your variable names can be either underscored or camelCased. While this may be a good practice in library development, you don&#039;t need to follow this in your controller methods or models. Controller methods should behave RESTfully but also be readable since it&#039;s going into the <abbr title="Uniform Resource Locator">URL</abbr>. Sharing underscore based URLs are always easier than having ambiguous camelCased or hyphen URLs.
</p>

<p>
Note that you not use underscores for your classnames when you&#039;re autoloading. The PSR-0 autoloader will think of underscores as directory separators. This will confuse you, so make sure to avoid that. Underscores in folder names won&#039;t affect it, but it&#039;s best to avoid and keep all class names or folder names as StudlyCaps.
</p>

</div>
<!-- EDIT4 SECTION "PSR-1" [4625-5911] -->
<h3 class="sectionedit5" id="psr-2">PSR-2</h3>
<div class="level3">

<p>
The <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md" class="urlextern" title="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-2-coding-style-guide.md"  rel="nofollow">PSR-2 standard is a major coding style standard</a>.
</p>

<p>
This was the most controversial, mainly because developers nitpicked little things they didn&#039;t like. For example many developers prefer using tabs instead of 4 spaces, however this is often a non-issue, since many IDEs allow you to set the tabbing size and whether it gets replaced by spaces anyway. Notepad++ will allow you to do this through <code>setting→preferences</code>.
</p>

<p>
However many of the standards guide is part of good developmental practice, so make sure you read it and understand why they put it as part of the standard. It&#039;s not just because they prefer it that way!
</p>

<p>
In the end it&#039;s up to you if you prefer to abide by the PSR-2. If you do you can proudly claim it in your library.
</p>

</div>
<!-- EDIT5 SECTION "PSR-2" [5912-6767] -->
<h3 class="sectionedit6" id="psr-3">PSR-3</h3>
<div class="level3">

<p>
The <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md" class="urlextern" title="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-3-logger-interface.md"  rel="nofollow">PSR-3 standard is actually a guide for a common interface to logging classes</a>. This means unless you&#039;re building a logging application you won&#039;t need to worry about it.
</p>

<p>
However having a common logging interface means you can dependency inject any logging class and expect it to work in similar ways due to the enforcement of the interface contract. This way your libraries can log errors or notices to the application, without knowing what kind of logging library the user is going to have in advance. If you are going to implement logging, make sure to wrap it in conditional logic in case the user has no logging class available.
</p>

<p>
At any case, <a href="http://ellislab.com/codeigniter/user-guide/general/errors.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/errors.html"  rel="nofollow">Codeigniter&#039;s logging class</a> is not compatible with PSR-3. So only use it for your non-shareable controllers and models. If you need a more robust library, use <a href="https://github.com/Seldaek/monolog" class="urlextern" title="https://github.com/Seldaek/monolog"  rel="nofollow">Monolog</a> which is PSR-3 compliant.
</p>

</div>
<!-- EDIT6 SECTION "PSR-3" [6768-7825] -->
<h2 class="sectionedit7" id="oop_patterns">OOP Patterns</h2>
<div class="level2">

<p>
In the <a href="/doku.php?id=web_application_development:php_-_server_side_architecture" class="wikilink1" title="web_application_development:php_-_server_side_architecture">PHP server side architecture section</a> we talked about the four principles of object oriented programming. This section is going to expand on that topic in a more practical sense.
</p>

</div>
<!-- EDIT7 SECTION "OOP Patterns" [7826-8072] -->
<h3 class="sectionedit8" id="solid_principles">SOLID Principles</h3>
<div class="level3">

<p>
The <a href="http://net.tutsplus.com/tutorials/how-to-write-code-that-embraces-change/" class="urlextern" title="http://net.tutsplus.com/tutorials/how-to-write-code-that-embraces-change/"  rel="nofollow">SOLID principles</a> stand for Single responsibility, Open-closed, Liskov substitution, Interface segregation and Dependency inversion. These principles are intended to make your development maintainable and scalable.
</p>

</div>

<h4 id="single_responsibility_principle">Single Responsibility Principle</h4>
<div class="level4">

<p>
Each object should only have a single responsibility, and that entire responsibility should be encapsulated by that object. It&#039;s about making sure your object is cohesive.
</p>

<p>
A responsibility is defined as a reason to change. Classes should only have one reason to change. As an example, consider a class that compiles and prints a report. This could be changed for two reasons. First, the content of the report can change. Second, the format of the report can change. The single responsibility principle says that these two aspects of the problem are really two separate responsibilities, and should therefore be in separate classes.
</p>

<p>
By keeping your object cohesive, it means any edits or improvements you make to the code of a class will be focused on that single responsibility, hence lowering the chance of breaking the code for other responsibilities. This also isolates any problems making it easier to understand if you need to debug.
</p>

<p>
You may then argue how deep should problems be separated? After all, with a microscope, there&#039;s always more room to break things down. Well there&#039;s a famous computer science aphorism made by David Wheeler: <a href="http://en.wikipedia.org/wiki/Indirection" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Indirection">&quot;All problems in computer science can be solved by another level of indirection.&quot;</a>  Which was then retorted by Kevlin Henney with ”…except for the problem of too many layers of indirection.”
</p>

</div>

<h4 id="open-closed_principle">Open-Closed Principle</h4>
<div class="level4">

<p>
Each object should be open to be extended, but closed for modification. Basically this refers to the fact that changes to the source code that isn&#039;t a bug fix often requires extra unit testing and code reviews because extra features may break existing compatibility. This is especially true for highly coupled code.
</p>

<p>
Therefore new features should be created through the extension of child classes, instead of modifying the existing source code.
</p>

<p>
However if you left this principle on such vague terms, then you&#039;ll eventually hit the problem of feature creep and messy structure. This is why the Open-Closed principle in practice actually refers to the usage of abstract interfaces, so that new features can be created as concrete objects that implement the abstract <em>closed</em> interface. This allows an easy swapping out of features as dependencies. Note that this could be done with abstracts in <abbr title="Hypertext Preprocessor">PHP</abbr> too. Normal classes could also be extended, but interfaces would the most suitable for this purpose, since interfaces shouldn&#039;t be changed much after creation.
</p>

<p>
Let&#039;s see an example:
</p>
<pre class="code php"><span class="co1">//here's out abstract interface</span>
<span class="kw2">interface</span> Vehicle<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> accelerate<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> stop<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//our first feature was just a Sedan</span>
<span class="kw2">class</span> Sedan implements Vehicle<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> accelerate<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Vroom!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> stop<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'EHHH!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//later on we found out we needed Trucks too (this was modified, but the interface wasn't)</span>
<span class="kw2">class</span> Truck implements Vehicle<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> accelerate<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Brrrm!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> stop<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'CHHH!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//now we can use the new feature that was openly extended from the interface</span>
<span class="co1">//but since the interface was closed, we didn't need any more code reviews, and we have a consistent &quot;interface&quot; to work with</span>
<span class="kw2">class</span> Drive<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//these dependencies are hard coupled, you normally shouldn't do this, use dependency injection instead</span>
    <span class="kw2">public</span> <span class="kw2">function</span> buy_groceries<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$vehicle</span> <span class="sy0">=</span> <span class="kw2">new</span> Sedan<span class="sy0">;</span>
        <span class="re0">$vehicle</span><span class="sy0">-&gt;</span><span class="me1">accelerate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="st_h">'At Groceries!'</span><span class="sy0">;</span>
        <span class="re0">$vehicle</span><span class="sy0">-&gt;</span><span class="me1">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> deliver_groceries<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$vehicle</span> <span class="sy0">=</span> <span class="kw2">new</span> Truck<span class="sy0">;</span>
        <span class="re0">$vehicle</span><span class="sy0">-&gt;</span><span class="me1">accelerate</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="st_h">'At Retail!'</span><span class="sy0">;</span>
        <span class="re0">$vehicle</span><span class="sy0">-&gt;</span><span class="me1">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

</div>

<h4 id="liskov_substitution_principle">Liskov Substitution Principle</h4>
<div class="level4">

<p>
Any child class that inherits from a parent class or abstract or interface should not break the parent class&#039;s functionality if the child class gets substituted for the parent class. Code may be type hinting for the parent class or abstract interface, and if the child class gets substituted, they will expect similar functionality. Consider this example:
</p>
<pre class="code php"><span class="co1">//here is the parent class</span>
<span class="kw2">class</span> Rectangle<span class="br0">&#123;</span>
    <span class="kw2">protected</span> width<span class="sy0">;</span>
    <span class="kw2">protected</span> height<span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> set_height<span class="br0">&#40;</span><span class="re0">$y</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">height</span> <span class="sy0">=</span> <span class="re0">$y</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> set_width<span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">width</span> <span class="sy0">=</span> <span class="re0">$x</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> area<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">width</span> <span class="sy0">*</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">height</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//squares are rectangles in math, but we'll see in a moment this violates LSP</span>
<span class="kw2">class</span> Square <span class="kw2">extends</span> Rectangle<span class="br0">&#123;</span>
    <span class="co1">//we're method overriding here!</span>
    <span class="kw2">public</span> <span class="kw2">function</span> area<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">width</span> ^ <span class="nu0">2</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//now Square class can be substituted for Rectangle</span>
<span class="kw2">class</span> Geometry<span class="br0">&#123;</span>
    <span class="kw2">public</span> __construct<span class="br0">&#40;</span>Rectangle <span class="re0">$shape</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$shape</span><span class="sy0">-&gt;</span><span class="me1">set_width</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="re0">$shape</span><span class="sy0">-&gt;</span><span class="me1">set_height</span><span class="br0">&#40;</span><span class="nu0">50</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="re0">$shape</span><span class="sy0">-&gt;</span><span class="me1">area</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//this works, it's using the parent class</span>
<span class="re0">$rectangle_geometry</span> <span class="sy0">=</span> <span class="kw2">new</span> Geometry<span class="br0">&#40;</span><span class="kw2">new</span> Rectangle<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this works as well, because Square extends Rectangle, the type hint passes</span>
<span class="co1">//however the functionality as expected is broken due to the method overriding</span>
<span class="co1">//violates liskov substitution principle so this is bad code!</span>
<span class="re0">$square_geometry</span> <span class="sy0">=</span> <span class="kw2">new</span> Geometry<span class="br0">&#40;</span><span class="kw2">new</span> Square<span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>

<h4 id="interface_segregation_principle">Interface Segregation principle</h4>
<div class="level4">

<p>
No objects implementing interfaces should be forced to implement methods that have no relation to their responsibility. This basically means we should break down large interfaces into small and highly cohesive interfaces, so when we&#039;re implementing interfaces, objects won&#039;t need to define functions that have no use and are just there to satisfy the interface. If you find yourself doing this, you need to break your interfaces down into one super abstract interface and relatively concrete child interfaces! 
</p>

<p>
Also note that you can have child interfaces extending parent interfaces, and by implementing the child interface, you&#039;ll inherit the parent interface too.
</p>

</div>

<h4 id="dependency_inversion_principle">Dependency Inversion principle</h4>
<div class="level4">

<p>
Conventional dependency relationships from high level classes to low level utility classes are inverted for the purpose of rendering high-level classes independent of the low-level classes implementation details. High-level classes should not depend on low-level modules. Both should depend on abstractions. Abstractions should not depend upon details. Details should depend upon abstractions. Both high and low-level objects must depend on the same abstraction.
</p>
<div class="thumb2 tright" style="width:210px"><div class="thumbinner"><a href="/lib/exe/detail.php?id=web_application_development%3Aphp_-_design_patterns&amp;media=web_application_development:embrace-change-switch-ligh-reversed-dependency.png" class="media" title="web_application_development:embrace-change-switch-ligh-reversed-dependency.png"><img src="/lib/exe/fetch.php?w=200&amp;media=web_application_development:embrace-change-switch-ligh-reversed-dependency.png" class="mediabox2" alt="" width="200" /></a><div class="thumbcaption"><div class="magnify"><a class="internal" title="Enlarge" href="/lib/exe/detail.php?id=web_application_development%3Aphp_-_design_patterns&amp;media=web_application_development:embrace-change-switch-ligh-reversed-dependency.png"><img width="15" height="11" alt="" src="/lib/plugins/imagebox/magnify-clip.png"/></a></div>Dependency Inverted Switch with a Switchable Interface</div></div></div>
<p>
Basically instead of flowing from a concrete library depending on a concrete lower level library, the concrete library depends on an intermediate abstraction. This has been what we&#039;ve been doing with interfaces. The high level class type hints at an interface to be injected, the low level class implements the interface. The interface is created as an abstract intermediary. All concrete classes thus depend on abstractions linking to more concrete classes.
</p>

<p>
This is the essence of dependency injection, so that way we can not only unit test our classes by passing in dependencies, but we can also have highly maintainable code so we can easily swap out dependencies.
</p>

</div>
<!-- EDIT8 SECTION "SOLID Principles" [8073-15675] -->
<h3 class="sectionedit9" id="method_manipulation">Method Manipulation</h3>
<div class="level3">

<p>
Methods are the functional units to a class. Also note that when developers talk about “members” or “properties” of a class they usually mean the variables to the class, not the methods. It is recommended that developers use methods as the verbs in order to manipulate the state of a class, rather than directly accessing the variables.
</p>

</div>

<h4 id="constructor_destructors">Constructor &amp; Destructors</h4>
<div class="level4">

<p>
Every class can have a <a href="http://php.net/manual/en/language.oop5.decon.php" class="urlextern" title="http://php.net/manual/en/language.oop5.decon.php"  rel="nofollow">constructor and destructor</a> <a href="http://www.php.net/manual/en/language.oop5.magic.php" class="urlextern" title="http://www.php.net/manual/en/language.oop5.magic.php"  rel="nofollow">magic method</a>. All magic methods are prepended with double underscores.
</p>

<p>
The construct function is called whenever the object is instantiated. This is only relevant for instantiated objects, not static classes. This function is used to setup all the necessary dependencies and variables for the object to operate. Therefore we often pass in parameters to the method with type hints for dependencies.
</p>
<pre class="code php"><span class="kw2">class</span> SomeRandomClass<span class="br0">&#123;</span>
    <span class="kw2">private</span> <span class="re0">$parameter</span><span class="sy0">;</span>
    <span class="kw2">private</span> <span class="re0">$type_hinted_dependency</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="re0">$default_parameter</span><span class="sy0">,</span> iInterface <span class="re0">$type_hinted_dependency</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">parameter</span> <span class="sy0">=</span> <span class="re0">$default_parameter</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">type_hinted_dependency</span> <span class="sy0">=</span> <span class="re0">$type_hinted_dependency</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
When you&#039;re extending a class, you may need to call the parent constructor, as that will setup the parent&#039;s initialisation. You will need to call:
</p>
<pre class="code php"><span class="kw2">class</span> ChildClass <span class="kw2">extends</span> ParentClass<span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//notice how we use the :: instead of the -&gt; which means its calling it statically...</span>
        parent<span class="sy0">::</span>__construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Destructors are similar to constructors, but they are called either when the scripts finishes execution (in the case <abbr title="Hypertext Preprocessor">PHP</abbr> it finishes once the response is sent) or when the <a href="http://stackoverflow.com/questions/8798443/best-way-to-destroy-php-object" class="urlextern" title="http://stackoverflow.com/questions/8798443/best-way-to-destroy-php-object"  rel="nofollow">object is unset</a>.
</p>

<p>
Destructors are somewhat rare in <abbr title="Hypertext Preprocessor">PHP</abbr> because of the automatic garbage collection of memory at the end of script execution. However you can use destructors to clean up connections, resources and do house cleaning operations like logging any cache to disk. If you find yourself calling an explicit command to do whenever you want to stop using an object, then you put it in the destructor.
</p>

<p>
Destructors will however need to be used for long running daemon processes to avoid memory leaks.
</p>

</div>

<h4 id="visibility">Visibility</h4>
<div class="level4">

<p>
The <a href="http://www.php.net/manual/en/language.oop5.visibility.php" class="urlextern" title="http://www.php.net/manual/en/language.oop5.visibility.php"  rel="nofollow">visibility modifiers</a> are there to enforce proper encapsulation coding style, but also are a hint of your intentions to other developers reading your code, thus making it easier to understand. Therefore it&#039;s best practice to always put a visibility modifier (even if your code works without them), and make sure they are contextually relevant. If they are public, they should be and will be accessed from outside the class. If they are protected, they should be and will be accessed from child classes. If they are private they should be and will not be accessed from classes other than the designated class. Refer to the official documentation for syntax.
</p>

<p>
Because we should be using verbs to modify state, methods are the ones that should be public, and class properties should be not accessible outside of methods. This however is a guideline, not a religion.
</p>

</div>

<h4 id="method_overloading">Method Overloading</h4>
<div class="level4">

<p>
<a href="http://www.php.net/manual/en/language.oop5.overloading.php" class="urlextern" title="http://www.php.net/manual/en/language.oop5.overloading.php"  rel="nofollow">PHP&#039;s interpretation of overloading</a> is different from other languages. This part refers to method overloading from the perspective of other languages.
</p>

<p>
Method overloading refers to the definition of multiple methods with the same name but different number of parameters. The goal is be able to call the same method with different parameters and execute different branches of logic.
</p>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> doesn&#039;t need to do this because it has the capability of having default parameters in its argument list. This pretty much simulates the same functionality. All default parameters should be at the end of the argument list.
</p>
<pre class="code php"><span class="co1">//default parameters has to be after the required parameters or else there'll be a fatal error</span>
<span class="kw2">function</span> do_something<span class="br0">&#40;</span>
    <span class="re0">$required</span><span class="sy0">,</span>
    <span class="sy0">&amp;</span><span class="re0">$reference</span><span class="sy0">,</span> <span class="co1">//this is pass by reference</span>
    <span class="re0">$optional</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="sy0">,</span>
    iInterface <span class="re0">$object</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="sy0">,</span>
    <span class="re0">$string</span> <span class="sy0">=</span> <span class="st_h">'blah blah blah'</span><span class="sy0">,</span>
    <span class="re0">$array</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'lol'</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="re0">$boolean</span> <span class="sy0">=</span> <span class="kw4">false</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="br0">&#123;</span>
<span class="co1">//default parameters are not the same as typehints, an empty variable will have the default type, but anything else could be passed in</span>
<span class="br0">&#125;</span></pre>

<p>
Note that the passing by reference with the <code>&amp;</code> prefixed. This means the value is references instead of copied. Normally when you pass in a variable to a function, it copies the value and then does work on it. It doesn&#039;t affect the original variable. However you can use <code>&amp;</code> to make sure that any changes to that variable that happens inside the function also gets changed outside of the function, this is because the value is now a reference to the original value. This often gets used when we want a function to have multiple side effects, so that it&#039;s not only returning a final output, but also modifying things around it. This is more frequently used when manipulating arrays through the <code>foreach</code> function. We can use it to change the array&#039;s values as we iterate through it, instead of returning a finished value and then replacing the old array with the new array. Other than that, you should keep your references to a minimum.
</p>

<p>
One more thing to note is default parameter of <code>null</code>. When we type hint an object to be passed in and at the same time have a default parameter of <code>null</code>, this means we can pass in <code>null</code> as the parameter when calling the function. This allows us to bypass the need to pass in an object. This can be useful when you need to conditionally branch logic depending on the existence of an object, but you don&#039;t want to force your user to need to have an object that implements the interface.
</p>

<p>
If you need to have variable number of parameters, try using <a href="http://www.php.net/manual/en/function.func-get-args.php" class="urlextern" title="http://www.php.net/manual/en/function.func-get-args.php"  rel="nofollow">func_get_args</a>.
</p>

</div>

<h4 id="method_chaining">Method Chaining</h4>
<div class="level4">

<p>
<a href="http://en.wikipedia.org/wiki/Method chaining" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Method chaining">Method chaining</a> the practice of calling multiple methods one after the other in a very succinct way. For example:
</p>
<pre class="code php"><span class="re0">$result</span> <span class="sy0">=</span> <span class="re0">$object</span><span class="sy0">-&gt;</span><span class="me1">place</span><span class="br0">&#40;</span><span class="st_h">'dog'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">with</span><span class="br0">&#40;</span><span class="st_h">'cat'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">and</span><span class="br0">&#40;</span><span class="st_h">'tree'</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">result</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Method chaining may potentially reduce the number of code written and improve readability. However too many method chains will result in a train wreck where it becomes difficult to isolate bugs.
</p>

<p>
The key to implementation is to have an object with a number mutator methods that return <code>$this</code>.
</p>

<p>
For example:
</p>
<pre class="code php"><span class="kw2">class</span> FakeString<span class="br0">&#123;</span>
    <span class="kw2">private</span> <span class="re0">$str</span><span class="sy0">;</span>
    <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">str</span> <span class="sy0">=</span> <span class="st0">&quot;&quot;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="co1">//mutator methods mutate a variable</span>
    <span class="kw2">function</span> addA<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">str</span> <span class="sy0">.=</span> <span class="st0">&quot;a&quot;</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">function</span> addB<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">str</span> <span class="sy0">.=</span> <span class="st0">&quot;b&quot;</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw2">function</span> getStr<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">str</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$a</span> <span class="sy0">=</span> <span class="kw2">new</span> fakeString<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">echo</span> <span class="re0">$a</span><span class="sy0">-&gt;</span><span class="me1">addA</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">addB</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">-&gt;</span><span class="me1">getStr</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
You&#039;ll see method chaining when using Codeigniter&#039;s Active Records class.
</p>

</div>

<h4 id="method_overriding">Method Overriding</h4>
<div class="level4">

<p>
Method overriding simply refers to child classes that override a method from their parent class. This method would have to have the same name to override. You would do this every time you need to reuse the parent class&#039;s functionality but need one thing changed. Of course be careful not to violate the Liskov Substitution Principle. Sometimes you should create a completely new class, or use an interface instead. You&#039;ll use this technique often with Codeigniter since it allows all of its native classes to be extended and overwritten.
</p>

<p>
You can also use the <code>final</code> keyword to prevent overriding. This simply means the method the final form and should not be overwritten. The <code>final</code> keyword can be used on the class itself to prevent overwriting, or just a single method.
</p>
<pre class="code php"><span class="kw2">class</span> BaseClass <span class="br0">&#123;</span>
   <span class="co1">//finalised method</span>
   final <span class="kw2">public</span> <span class="kw2">function</span> do_something<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//finalised class</span>
final <span class="kw2">class</span> NoChildren<span class="br0">&#123;</span>
   <span class="kw2">public</span> <span class="kw2">function</span> do_something<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span><span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

</div>

<h4 id="traits">Traits</h4>
<div class="level4">

<p>
Remember how child classes cannot extend multiple parent classes? Well there&#039;s a <a href="http://en.wikipedia.org/wiki/Multiple inheritance#The_diamond_problem" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Multiple inheritance#The_diamond_problem">reason for that</a>.
</p>

<p>
Instead programming languages have designed mixins to be alternatives to multiple extensions. <abbr title="Hypertext Preprocessor">PHP</abbr> calls them <a href="http://phpmaster.com/using-traits-in-php-5-4/" class="urlextern" title="http://phpmaster.com/using-traits-in-php-5-4/"  rel="nofollow">&quot;traits&quot;</a>. These are only available on <abbr title="Hypertext Preprocessor">PHP</abbr> 5.4. However don&#039;t use traits too much, you&#039;ll start to violate OOP principles because of how easy it seems at first, but eventually run into maintenance problems.
</p>

</div>
<!-- EDIT9 SECTION "Method Manipulation" [15676-24365] -->
<h3 class="sectionedit10" id="dependency_management">Dependency Management</h3>
<div class="level3">

<p>
Managing dependencies is a core activity to developing in an object orientated manner. Simply put it&#039;s how you structure your object loading system because all objects depend on other objects.
</p>

<p>
Codeigniter by default uses a custom loader in which you simply call <code>$this→load()</code>. This is useful for Codeigniter&#039;s system libraries, but eventually becomes unmaintainable and untestable. It&#039;s unmaintainable because all the dependencies are hard coded into the objects themselves. So if you ever need to change the dependencies to another object, you&#039;ll have to find each line of code in which you load that dependency and change the name to another dependency. This becomes very difficult when you project is large and the dependency you&#039;re loading is commonly shared. It&#039;s untestable because each unit of code cannot be isolated, their dependencies cannot be mocked. This is necessary in test driven development because we isolate each class and test their functions, if the class is dependent on other classes, then we&#039;ll need to mock those dependencies, essentially creating a dummy class that acts like the dependent class but doesn&#039;t do anything permanent. By hardcoding the dependencies into the code, it becomes impossible to provide those mocks.
</p>

<p>
So eventually we arrive at a practice called dependency injection. Instead of hardcoding the dependencies into our classes, we establish dependent parameters to the class and inject those during run time. There are two ways to do this, through constructor injection or setter injection. This example shows these two methods. Polycademy recommends you to use the constructor injection method.
</p>
<pre class="code php"><span class="co1">//constructor injection (use it for long lived dependencies that will be persistent)</span>
<span class="kw2">class</span> RandomClass<span class="br0">&#123;</span>
    <span class="kw2">private</span> <span class="re0">$dependent_class</span><span class="sy0">;</span>
    <span class="co1">//it's best practice to set up interfaces or abstract typehints as this will make sure the dependencies are actually the ones we need and so we don't pass the wrong dependencies</span>
    <span class="co1">//we have here default null, which means we allow the user to pass null and bypass the dependency so we can do a setter injection instead</span>
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>iInterface <span class="re0">$object</span> <span class="sy0">=</span> <span class="kw4">null</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">dependent_class</span> <span class="sy0">=</span> <span class="re0">$object</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//setter injection (use it for dependencies that change often, like dependencies that you don't know about until runtime)</span>
    <span class="kw2">public</span> set_dependency<span class="br0">&#40;</span>iInterface <span class="re0">$object</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">dependent_class</span> <span class="sy0">=</span> <span class="re0">$object</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//using the constructor</span>
<span class="re0">$class</span> <span class="sy0">=</span> <span class="kw2">new</span> RandomClass<span class="br0">&#40;</span><span class="kw2">new</span> OtherClass<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//using the setter</span>
<span class="re0">$class</span> <span class="sy0">=</span> <span class="kw2">new</span> RandomClass<span class="br0">&#40;</span><span class="kw4">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$class</span><span class="sy0">-&gt;</span><span class="me1">set_dependency</span><span class="br0">&#40;</span><span class="kw2">new</span> OtherClass<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Dependency injection becomes far more useful when we combine it with autoloading, that way we can simply specify the class name and not worry about <code>require</code> or <code>include</code> functions to actually load the dependent classes into context. However because Codeigniter is not a PSR-0 compliant framework, it doesn&#039;t have a built in autoloader, so this kind of dependent injection may not work well with Codeigniter&#039;s system libraries. That&#039;s why we&#039;ll still use <code>$this→load</code> in our models and controllers. However there may be a possibility to keep hardcoded dependencies out of our models, and use our controllers to not only load all dependencies but then inject them all into the model constructor.
</p>

</div>

<h4 id="inversion_of_control">Inversion of Control</h4>
<div class="level4">

<p>
Once we have our dependency injection and autoloading setup, we can actually take a step further by completely abstracting our dependency management, so that all dependencies get managed in one place. We&#039;re still using constructor and setter injection, it&#039;s just we&#039;re no longer setting up all the dependencies in every place we&#039;re calling the necessary libraries, we&#039;re abstracting it to a single place called an “Inversion of Control Container” (IoC). You should all of the below information before using this technique, but for future reference just go to Polycademy&#039;s CiIoC:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/Polycademy/CiIoC" class="urlextern" title="https://github.com/Polycademy/CiIoC"  rel="nofollow">CiIoC</a> - Inversion of Control Container using Pimple for Codeigniter</div>
</li>
</ul>

<p>
We only really start doing this when the our dependency requirements starts getting very complex. This is often called the “object graph”. If a particular class in a library requires 5 to 6 dependent constructor injected classes, every time we need this class, we&#039;d have to repeat the 5 to 6 <code>new ClassName;</code> initialisations every time we wanted to use that class. This violates the “Don&#039;t Repeat Yourself” (DRY) principle in software development. However this shouldn&#039;t be used for all classes, it should only be used for often shared or “global” libraries. So it shouldn&#039;t be used for our controllers or models. It actually can&#039;t because the Codeigniter framework wasn&#039;t built to do this. Some newer development frameworks such as Laravel is actually completely built from an IoC, so their controllers and models can managed from an IoC. However this isn&#039;t always necessary because putting everything into IoC can result in too much abstraction.
</p>

<p>
Now IoC containers can be thought of as HR manager who recruits all the necessary works and brings them together to work, instead of having each individual worker find their dependent workers. Now let&#039;s take this principle to the extreme, if our workers with dependencies are leaving the recruitment of their dependent workers to a manager, then shouldn&#039;t all managers pass their dependency management work to their managers? At some point, the CEO will be the one left with all the work. In the context of web applications, this would be the front controller. Now we don&#039;t want to pollute our front controller with all of this dependency work, this is because the front controller (CEO) should be bootstrapping everything, and HR management is only one thing a CEO (front controller) should be doing. At any case, the front controller will outsource the dependency management to an IoC container.
</p>

<p>
IoC is also often called the Hollywood principle “Don&#039;t call us, we&#039;ll call you”. Your dependent objects should not be calling the container to setup their dependencies. If you were to call the container to setup the dependencies while you were in the scope of your dependencies then you&#039;re not actually using inversion of control, you&#039;re using a different pattern called the <a href="http://blog.astrumfutura.com/tag/service-locator/" class="urlextern" title="http://blog.astrumfutura.com/tag/service-locator/"  rel="nofollow">Service Locator</a>. This is an anti-pattern because you&#039;re trading hard coded object dependencies to a hard coded service locator dependency. Consider what would happen if you shared your library and the user did not have your kind of service locator, then the code wouldn&#039;t work.
</p>

<p>
Therefore in order to truly have your control inverted, you don&#039;t change the way you write your classes or libraries, they should be agnostic to any IoC containers, that means the code can still work even if you didn&#039;t have an inversion of control container.
</p>

<p>
Okay, so we&#039;ve established that there will be an IoC container that will be either in the front controller, or somewhere really close the front controller. We&#039;ve also established, that the IoC in the context of using Codeigniter will only be managing libraries, models or controllers. The next thing we have to establish is where we&#039;re going to actually going to call the IoC containers so it will manage all of our dependencies. Well this part is called the “Composition Root”. For our purposes, we&#039;re going to use the page controllers or page models as our composition root, so that&#039;s where the container will be called when we need to wire up many dependencies. Now let&#039;s get onto actually implementing this.
</p>

<p>
Firstly we need an IoC container. We could write up our own IoC container, and this has been explained in the <a href="http://net.tutsplus.com/tutorials/php/dependency-injection-huh/" class="urlextern" title="http://net.tutsplus.com/tutorials/php/dependency-injection-huh/"  rel="nofollow">Dependency Injection tutorial in Nettuts</a>. But we shouldn&#039;t be reinventing the wheel, so let&#039;s bring in a third party library to the containing. The <a href="http://pimple.sensiolabs.org/" class="urlextern" title="http://pimple.sensiolabs.org/"  rel="nofollow">Pimple DI library</a> will be out IoC container.
</p>

<p>
First install it through Composer. It should be autoloaded through <a href="https://github.com/Polycademy/CiAutoloading" class="urlextern" title="https://github.com/Polycademy/CiAutoloading"  rel="nofollow">CiAutoloading</a> and you&#039;ll be able to access Pimple anywhere in your application by simply calling <code>new Pimple();</code>.
</p>
<pre class="code">&quot;pimple/pimple&quot;: &quot;*&quot;</pre>

<p>
Now we need to setup the dependency object graph somewhere near the front controller. We could do it in the front controller, but since we hooked up composer as a pre-system hook, we should be doing in the <code>application/config</code> files. This makes more semantic sense. So let&#039;s create an <code>ioc.php</code> config file place it in <code>application/config</code>. But before that we need to make sure this file gets autoloaded using <a href="http://ellislab.com/codeigniter/user-guide/general/autoloader.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/autoloader.html"  rel="nofollow">Codeigniter&#039;s config autoloader</a>. So go into the autoloader and add <code>ioc.php</code> into:
</p>
<pre class="code php"><span class="re0">$autoload</span><span class="br0">&#91;</span><span class="st_h">'config'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'ioc'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
In terms of the Codeigniter stack, the autoloader will be called in the <a href="http://ellislab.com/codeigniter/user-guide/libraries/loader.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/loader.html"  rel="nofollow">native Loader class</a>. This is called in the constructor of the native Controller class, which is just before the initialisation of the <a href="http://ellislab.com/codeigniter/user-guide/general/controllers.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/controllers.html"  rel="nofollow">page controllers</a> in your <code>application/controllers</code> directory. You can find all those classes in the <code>system/core</code> directory.
</p>

<p>
Now we&#039;re going to create the <code>ioc.php</code> container config file, and we&#039;re going to wire up our first library that will be initialised via a container. We&#039;re going assume that the libraries are already created right now, and create those libraries straight afterwards. Refer to the <a href="https://github.com/fabpot/Pimple" class="urlextern" title="https://github.com/fabpot/Pimple"  rel="nofollow">Pimple documentation</a> and this <a href="http://phpmaster.com/dependency-injection-with-pimple/" class="urlextern" title="http://phpmaster.com/dependency-injection-with-pimple/"  rel="nofollow">PHP Master tutorial</a> to see the syntax required for Pimple.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_design_patterns&amp;codeblock=12" title="Download Snippet" class="mediafile mf_php">ioc.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span>
&nbsp;
<span class="co1">//Pimple uses anonymous functions (lambdas) so it can &quot;lazy load&quot; the classes</span>
<span class="co1">//the functions will not be processed when the PHP interpreter goes through this file</span>
<span class="co1">//they will be kept inside the function waiting to be called as part of the container array</span>
<span class="co1">//once you call the functions, then the objects will be created! Thus &quot;lazy loading&quot;, not &quot;eager loading&quot;. Saves memory too!</span>
<span class="co1">//note Pimple is an object that acts like an array, see the actual Pimple code to see how this works</span>
&nbsp;
<span class="re0">$ioc</span> <span class="sy0">=</span> <span class="kw2">new</span> Pimple<span class="sy0">;</span>
&nbsp;
<span class="co1">//this creates the Worker Library, not necessary since the WorkerLibrary has no dependencies, but demonstrates self-reference of $c</span>
<span class="co1">//when Pimple runs your anonymous function, it will pass in the Pimple object into $c making it self-referential, kind of like using $this</span>
<span class="re0">$ioc</span><span class="br0">&#91;</span><span class="st_h">'WorkerLibrary'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$c</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//no mention of $c, so we're not using it, but Pimple will pass it in regardless, so we need to accept</span>
    <span class="kw1">return</span> <span class="kw2">new</span> WorkerLibrary<span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this creates the MasterLibrary and uses the self-referential $c to call upon WorkerLibrary and pass it as a dependency to MasterLibrary</span>
<span class="re0">$ioc</span><span class="br0">&#91;</span><span class="st_h">'MasterLibrary'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$c</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="kw2">new</span> MasterLibrary<span class="br0">&#40;</span><span class="re0">$c</span><span class="br0">&#91;</span><span class="st_h">'WorkerLibrary'</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//Pimple can also create random parameters...</span>
<span class="re0">$ioc</span><span class="br0">&#91;</span><span class="st_h">'randomparameter'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="st_h">'This is some random parameter'</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//we need to pass the $ioc into the global $config variable, so now it can be accessed by Codeigniter</span>
<span class="re0">$config</span><span class="br0">&#91;</span><span class="st_h">'ioc'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <span class="re0">$ioc</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
Now we have to create the <code>MasterLibrary.php</code> and <code>WorkerLibrary.php</code>. They can be just some random class, it does not matter. Just make sure <code>MasterLibrary</code> actually accepts <code>WorkerLibrary</code> as a constructor injected dependency. Take note of how we placed the <code>$ioc</code> back into the global <code>$config</code> value. This way it can be accessed from the <a href="http://ellislab.com/codeigniter/user-guide/libraries/config.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/config.html"  rel="nofollow">Config class in Codeigniter</a>.
</p>

<p>
In our page controller, we can just call this:
</p>
<pre class="code php">    <span class="co1">//imagine this was a method of any controller</span>
    <span class="kw2">public</span> <span class="kw2">function</span> test_ioc<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//this line can actually be placed in either the constructor, or a custom MY_Controller so you don't have to keep referring to the $config value.</span>
        <span class="re0">$ioc</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">config</span><span class="sy0">-&gt;</span><span class="me1">item</span><span class="br0">&#40;</span><span class="st_h">'ioc'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="re0">$masterlibrary</span> <span class="sy0">=</span> <span class="re0">$ioc</span><span class="br0">&#91;</span><span class="st_h">'MasterLibrary'</span><span class="br0">&#93;</span><span class="sy0">;</span>
&nbsp;
        <span class="re0">$masterlibrary</span><span class="sy0">-&gt;</span><span class="me1">do_something</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span></pre>

<p>
The two libraries of MasterLibrary and WorkerLibrary were just simple classes placed in the <code>application/libraries</code> directory. These were of course autoloaded from the PSR-0 autoloader in <a href="https://github.com/Polycademy/CiAutoloading" class="urlextern" title="https://github.com/Polycademy/CiAutoloading"  rel="nofollow">CiAutoloading</a>.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_design_patterns&amp;codeblock=14" title="Download Snippet" class="mediafile mf_php">MasterLibrary.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span>
&nbsp;
<span class="kw2">class</span> MasterLibrary<span class="br0">&#123;</span>
&nbsp;
	<span class="kw2">private</span> <span class="re0">$dependent</span><span class="sy0">;</span>
&nbsp;
	<span class="co1">//this MasterLibrary needs a WorkerLibrary</span>
	<span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="re0">$object</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
		<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">dependent</span> <span class="sy0">=</span> <span class="re0">$object</span><span class="sy0">;</span>
&nbsp;
	<span class="br0">&#125;</span>
&nbsp;
	<span class="co1">//call this to do something</span>
	<span class="kw2">public</span> <span class="kw2">function</span> do_something<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
		<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">dependent</span><span class="sy0">-&gt;</span><span class="me1">do_something</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
	<span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_design_patterns&amp;codeblock=15" title="Download Snippet" class="mediafile mf_php">WorkerLibrary.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span>
&nbsp;
<span class="kw2">class</span> WorkerLibrary<span class="br0">&#123;</span>
&nbsp;
	<span class="kw2">public</span> <span class="kw2">function</span> do_something<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
		<span class="kw1">echo</span> <span class="st_h">'The Worker Did Something'</span><span class="sy0">;</span>
&nbsp;
	<span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
There we go, you have not only created classes which is based on dependency injection, but they are also IoC agnostic. I could still call these classes normally if had to, but we&#039;ve abstracted to an IoC container.
</p>

<p>
This is only one method of IoC containers, there are other ones too, but this is most simplistic! Remember don&#039;t bother using this with your controllers or models, just libraries and third party packages. Also refer to the Pimple documentation on <a href="https://github.com/fabpot/Pimple#defining-shared-services" class="urlextern" title="https://github.com/fabpot/Pimple#defining-shared-services"  rel="nofollow">shared services</a> or <a href="https://github.com/fabpot/Pimple#modifying-services-after-creation" class="urlextern" title="https://github.com/fabpot/Pimple#modifying-services-after-creation"  rel="nofollow">extension</a> for advanced usage of Pimple!
</p>

<p>
Check out Fabien&#039;s sliders on Dependency Injection, the guy who created Pimple:
</p>

<p>
<iframe title="" src="http://www.slideshare.net/slideshow/embed_code/3028051" style="width:427px; height:356px" frameborder="0" scrolling="no"></iframe>
</p>

</div>
<!-- EDIT10 SECTION "Dependency Management" [24366-38135] -->
<h2 class="sectionedit11" id="functional_programming">Functional Programming</h2>
<div class="level2">

<p>
<a href="http://en.wikipedia.org/wiki/Functional programming" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Functional programming">Functional programming</a> refers to a computation style that emphasises evaluation through mathematical functions instead of having mutable state. It is a subset of the <a href="http://en.wikipedia.org/wiki/Declarative programming" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Declarative programming">declarative programming style</a>. This style is about specifying what the computation should achieve without telling how it should do it. The “how” is left to the compiler or interpreter about the best way to achieve what you want, sometimes the “how” is also implemented by the programmer, but it would be abstracted from the flow of execution. An example would <abbr title="Structured Query Language">SQL</abbr> where you simply ask for data back, but you don&#039;t actually program how to get the data back. In contrast would be OOP which is an <a href="http://en.wikipedia.org/wiki/Imperative programming" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Imperative programming">imperative programming style</a>, because the “how” is specifically dictated by the programmer. Declarative style or functional programming also emphasises stateless computation, that is mutating state and tracking is not important. Functional programming also doesn&#039;t care too much about the flow of execution or the order of execution.
</p>

<p>
Functional programming is mainly composed of mathematical functions called “expressions”. These functions should not have side effects unlike the “statements” from the imperative style. Side effects refer to manipulating the state outside of the scope of the functions. By eliminating these side effects, the expressions can have referential transparency. This means that no matter how many times you execute the same expression, the end result will be the same. Imagine a function <em>f</em> with argument <em>x</em>, then each time the result will be <em>f(x)</em>, state outside of the function is not affected. Eliminating side effects can make it much easier to understand and predict the behavior of a program, which is one of the key motivations for the development of functional programming. Functional programming is also easier use when doing concurrent programming. Functional programming is often more difficult to grasp for beginners, as it is closer to mathematical notation. You&#039;re often defining formulas and then arranging them in order to achieve an end result, this may result in code that is succinct but with little “working out” to demonstrate the steps required to do the task. On the other hand functional programming also is more natural to our own <a href="http://blog.lcf.name/2011/12/functional-programming-in-php.html" class="urlextern" title="http://blog.lcf.name/2011/12/functional-programming-in-php.html"  rel="nofollow">mental model of how real life works</a>. When reading functional code, we can see the end reason behind what we&#039;re doing, not just the steps taken to achieve some end of which we won&#039;t understand until we get to the end of the code.
</p>

<p>
There are languages which are purely functional and some which are hybrid. <abbr title="Hypertext Preprocessor">PHP</abbr> is not a functional language, but it has taken useful constructs and practices from functional languages, and made it available to programmers. This section will go through some of the functional constructs that will be of most practical use.
</p>

</div>
<!-- EDIT11 SECTION "Functional Programming" [38136-41137] -->
<h3 class="sectionedit12" id="anonymous_functions">Anonymous Functions</h3>
<div class="level3">

<p>
Anonymous functions are simply functions that do not have a name. We would usually define function this way:
</p>
<pre class="code php"><span class="co1">//called &quot;Function Declaration&quot;</span>
<span class="co1">//this becomes accessible globally</span>
<span class="kw2">function</span> do_something<span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$x</span> <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">echo</span> do_something<span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//resolves to 3</span></pre>

<p>
Anonymous functions are instead declared without a name and <a href="http://php.net/manual/en/functions.variable-functions.php" class="urlextern" title="http://php.net/manual/en/functions.variable-functions.php"  rel="nofollow">assigned to a variable</a>. This essentially turns something that was a stand alone construct into some sort of data that could be passed around and used in callbacks. Do note the ending semicolon ”;” since we&#039;re assigning the function expression to a variable, and not just setting up a function scope.
</p>
<pre class="code php"><span class="co1">//called &quot;Function Expression&quot;</span>
<span class="co1">//this is only accessible within its current scope</span>
<span class="re0">$square</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$x</span> <span class="sy0">*</span> <span class="re0">$x</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$square</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//resolves to 4</span></pre>

<p>
The ability to use function expressions makes functions <a href="http://en.wikipedia.org/wiki/First-class function" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/First-class function">&quot;first class citizens&quot;</a>. This basically means that the language supports passing functions as arguments to other functions, returning them as the values from other functions, and assigning them to variables or storing them in data structures. In <abbr title="Hypertext Preprocessor">PHP</abbr> we&#039;ll often use these anonymous functions as callbacks that are passed into other “higher order” functions as parameters. This allows you to share your functions while still respecting the scope because anonymous functions won&#039;t pollute the global scope.
</p>

<p>
Anonymous functions can also be defined inside the parameter, they don&#039;t need to be assigned to a variable. This makes them a throw away function.
</p>
<pre class="code php"><span class="co1">//the array_filter function accepts a function as a 2nd parameter</span>
<span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/array_filter"><span class="kw3">array_filter</span></a><span class="br0">&#40;</span><span class="re0">$input</span><span class="sy0">,</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$item</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="br0">&#40;</span><span class="re0">$item</span> <span class="sy0">%</span> <span class="nu0">2</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Anonymous functions are necessary for the next following functions or else functional programming would not work.
</p>

</div>
<!-- EDIT12 SECTION "Anonymous Functions" [41138-43073] -->
<h3 class="sectionedit13" id="closures">Closures</h3>
<div class="level3">

<p>
A closure is an anonymous function that can access variables from the outside it&#039;s scope without using any global variables. Furthermore the variables that are defined within the closure will only be accessible inside the closure. Closures make anonymous functions far more powerful and opens up opportunities for functions to return augmented functions.
</p>

<p>
In <abbr title="Hypertext Preprocessor">PHP</abbr>, closures access external variables through two methods. Early binding and late binding.
</p>
<pre class="code php"><span class="co1">//closure early binding</span>
<span class="re0">$closurewithargs</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$arg1</span><span class="sy0">,</span> <span class="re0">$arg2</span><span class="br0">&#41;</span> <span class="kw2">use</span> <span class="br0">&#40;</span><span class="re0">$var1</span><span class="sy0">,</span> <span class="re0">$var2</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//body of the function</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//closure late binding (using reference variables)</span>
<span class="re0">$closurewithargs</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$arg1</span><span class="sy0">,</span> <span class="re0">$arg2</span><span class="br0">&#41;</span> <span class="kw2">use</span> <span class="br0">&#40;</span><span class="sy0">&amp;</span><span class="re0">$var1</span><span class="sy0">,</span> <span class="sy0">&amp;</span><span class="re0">$var2</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//body of the function</span>
<span class="br0">&#125;</span><span class="sy0">;</span></pre>

<p>
The <code>$arg1</code> and <code>$arg2</code> are parameters to the function, you still have to manually pass it in whenever calling the function. However <code>$var1</code> and <code>$var2</code> are the bound variables, these variables would have been defined outside the scope of the function. If closures were not possible, then <code>$var1</code> and <code>$var2</code> would not be accessible inside the function. By using the <code>use</code> operator, you can bind the variables to the function, so they can be accessed.
</p>

<p>
The difference between early binding and late binding is that in early binding, the variables are bound when at the point at which the function is defined. Any changes to the state of the variable after the definition of the function does not affect the bounded variable. Late binding makes sure that the variable that you bound is actually a reference point not a copied value. This means any changes to the state of the variable after the definition does affect the bounded variable.
</p>
<pre class="code php"><span class="re0">$greeting</span> <span class="sy0">=</span> <span class="st0">&quot;Hello!&quot;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//$greeting has been late binded</span>
<span class="re0">$f</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw2">use</span><span class="br0">&#40;</span><span class="sy0">&amp;</span><span class="re0">$greeting</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">echo</span> <span class="re0">$greeting</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this will output Hello!</span>
<span class="re0">$f</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//the state has been changed</span>
<span class="re0">$greeting</span> <span class="sy0">=</span> <span class="st0">&quot;Hi!&quot;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//since the bounded variable is a reference, then this outputs Hi!</span>
<span class="re0">$f</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Late binding can be useful when your closure needs to maintain tracking of external state and return output based on the state of the external variable. This may seem to violate the concept of pure functional programming in that functions shouldn&#039;t have side effects, however you&#039;re not meant to use them to track global state, instead you&#039;re meant to use them inside <a href="http://en.wikipedia.org/wiki/Higher-order function" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Higher-order function">higher order functions</a>.
</p>

</div>
<!-- EDIT13 SECTION "Closures" [43074-45491] -->
<h3 class="sectionedit14" id="higher_order_functions">Higher Order Functions</h3>
<div class="level3">

<p>
The most common use of closures is having a higher order function return closures as output. These closures need access to the variables defined in the higher order function. This is similar to in OOP where you associate an object property with an object method that mutates that object property. These returned closures can then be passed into other functions as callbacks.
</p>
<pre class="code php"><span class="co1">//Defining a higher order function that creates a &quot;partial application&quot;</span>
<span class="re0">$criteria_greater_than</span> <span class="sy0">=</span> <span class="kw2">function</span> <span class="br0">&#40;</span><span class="re0">$min</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//early binded closure using the $min as a parameter, but allowing the programmer to further to pass in an extra parameter to change the operation</span>
    <span class="kw1">return</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$item</span><span class="br0">&#41;</span> <span class="kw2">use</span> <span class="br0">&#40;</span><span class="re0">$min</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="co1">//this closure will return any $item that is greater than the $min</span>
        <span class="kw1">return</span> <span class="re0">$item</span> <span class="sy0">&gt;</span> <span class="re0">$min</span><span class="sy0">;</span>
    <span class="br0">&#125;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$input</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="nu0">1</span><span class="sy0">,</span> <span class="nu0">2</span><span class="sy0">,</span> <span class="nu0">3</span><span class="sy0">,</span> <span class="nu0">4</span><span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//the array_filter function accepts a callback function to be called on each array element</span>
<span class="co1">//it will pass in each array element as the first parameter to the callback function</span>
<span class="co1">//we use a higher order function to set our parameter which returns a function to accept array_filter's parameter</span>
<span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/array_filter"><span class="kw3">array_filter</span></a><span class="br0">&#40;</span><span class="re0">$input</span><span class="sy0">,</span> <span class="re0">$criteria_greater_than</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this will output all items greater than 3</span>
<a href="http://www.php.net/print_r"><span class="kw3">print_r</span></a><span class="br0">&#40;</span><span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The above example demonstrates partial application of a function. This basically means you&#039;re partially applying parameters to a function so that you can complete the function later on.
</p>

<p>
Higher order functions can also accept functions as parameters. The below example demonstrates functions as parameters otherwise known as “first class functions”. The below code is actually a 3d saddle graph into a 2d parabola graph. The first graph is <a href="http://www.wolframalpha.com/input/?i=plot+x^2-y^2" class="urlextern" title="http://www.wolframalpha.com/input/?i=plot+x^2-y^2"  rel="nofollow">z = x^2 - y^2</a>. The second is <a href="http://www.wolframalpha.com/input/?i=plot+x^2-5^2" class="urlextern" title="http://www.wolframalpha.com/input/?i=plot+x^2-5^2"  rel="nofollow">z = x^2 - 5^2</a>. You may recognise it as a parabola “y = x^2 - 25”.
</p>
<pre class="code php"><span class="re0">$general_function</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="sy0">,</span> <span class="re0">$y</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$x</span> <span class="sy0">*</span> <span class="re0">$x</span> <span class="sy0">-</span> <span class="re0">$y</span> <span class="sy0">*</span> <span class="re0">$y</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this is a higher order function using $general_function as a parameter</span>
<span class="co1">//and returning a partial application of the general_function</span>
<span class="co1">//it's partially applied the $y parameter as 5, in order to &quot;fix&quot; the $y parameter</span>
<span class="re0">$partial_function</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span> <span class="kw2">use</span><span class="br0">&#40;</span><span class="re0">$general_function</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="re0">$general_function</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="sy0">,</span> <span class="nu0">5</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//the outputted partial function can now accept 1 parameter instead of 2</span>
<span class="re0">$partial_function</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//this resolves to 3*3 - 5*5 =&gt; -16 (therefore the z point on the saddle graph is -16 when x = 3 and y = 5)</span></pre>

<p>
Note that <a href="http://www.php.net/manual/en/language.types.callable.php" class="urlextern" title="http://www.php.net/manual/en/language.types.callable.php"  rel="nofollow">first class functions can also be typehinted</a>, if you need to make sure the callback can actually be called.
</p>

<p>
One of the tenets of functional programming is that we don&#039;t specify how something should be done, we simply describe the formula and result. One thing that the imperative style often needs is looping control structure to demonstrate the steps needed to reach the end result. The declarative style however argues that we should use recursion instead of loops. Do note that <a href="http://stackoverflow.com/a/2651200/582917" class="urlextern" title="http://stackoverflow.com/a/2651200/582917"  rel="nofollow">different languages optimise recursion and looping differently</a>. In the end use which ever comes naturally.
</p>
<pre class="code php"><span class="co1">//here are three styles that do the same thing counting down from 100 to 90</span>
&nbsp;
<span class="co1">//imperative looping style</span>
<span class="kw2">function</span> countdown<span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">while</span><span class="br0">&#40;</span><span class="re0">$x</span> <span class="sy0">&gt;</span> <span class="nu0">90</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$x</span><span class="sy0">--;</span>
        <span class="kw1">echo</span> <span class="re0">$x</span> <span class="sy0">.</span> <span class="st_h">'&lt;br /&gt;'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
countdown<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//recursion using function declaration</span>
<span class="kw2">function</span> re_countdown<span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$x</span> <span class="sy0">&gt;</span> <span class="nu0">90</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$x</span><span class="sy0">--;</span>
        <span class="kw1">echo</span> <span class="re0">$x</span> <span class="sy0">.</span> <span class="st_h">'&lt;br /&gt;'</span><span class="sy0">;</span>
        re_countdown<span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//you can do this instead: call_user_func(__FUNCTION__, $x);</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span>
&nbsp;
re_countdown<span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//declarative style using closure and function expression</span>
<span class="co1">//it has to use late binding because $anon_countdown doesn't exist as a variable until it has been set</span>
<span class="re0">$anon_countdown</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span> <span class="kw2">use</span> <span class="br0">&#40;</span><span class="sy0">&amp;</span><span class="re0">$anon_countdown</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$x</span> <span class="sy0">&gt;</span> <span class="nu0">90</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$x</span><span class="sy0">--;</span>
        <span class="kw1">echo</span> <span class="re0">$x</span> <span class="sy0">.</span> <span class="st_h">'&lt;br /&gt;'</span><span class="sy0">;</span>
        <span class="re0">$anon_countdown</span><span class="br0">&#40;</span><span class="re0">$x</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//not possible to use __FUNCTION__ as this function is nameless</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$anon_countdown</span><span class="br0">&#40;</span><span class="nu0">100</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
In <abbr title="Hypertext Preprocessor">PHP</abbr> 5.4 or higher, the <code>$this</code> variable is made available in closures. This allows you to integrate higher order functions and closures into OOP more tightly. The <code>$this</code> variable originally could be used if you constructed your objects in a certain way, but it was brittle and could fail in strange ways.
</p>
<pre class="code php"><span class="co1">//Original way</span>
<span class="kw2">class</span> Dog<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> yap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'yap!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> close<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//you cannot use $this directly as a lexical variable, so we need to reassign it</span>
        <span class="re0">$self</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="kw2">use</span><span class="br0">&#40;</span><span class="sy0">&amp;</span><span class="re0">$self</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
            <span class="re0">$self</span><span class="sy0">-&gt;</span><span class="me1">yap</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$dog</span> <span class="sy0">=</span> <span class="kw2">new</span> Dog<span class="sy0">;</span>
<span class="re0">$func</span> <span class="sy0">=</span> <span class="re0">$dog</span><span class="sy0">-&gt;</span><span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//in the future maybe $dog-&gt;close()();</span>
<span class="re0">$func</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<a href="http://www.php.net/call_user_func"><span class="kw3">call_user_func</span></a><span class="br0">&#40;</span><span class="re0">$dog</span><span class="sy0">-&gt;</span><span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//does the same thing but more succinct</span></pre>

<p>
You can check if the 5.4 code works <a href="http://codepad.viper-7.com/" class="urlextern" title="http://codepad.viper-7.com/"  rel="nofollow">Viper 7&#039;s Codepad</a>.
</p>
<pre class="code php"><span class="co1">//new 5.4 and above way</span>
<span class="kw2">class</span> Dog<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> yap<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'yap!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> close<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$closure</span> <span class="sy0">=</span> <span class="kw2">function</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
            <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">yap</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span><span class="sy0">;</span>
        <span class="re0">$closure</span> <span class="sy0">=</span> <span class="re0">$closure</span><span class="sy0">-&gt;</span><span class="me1">bindTo</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="re0">$closure</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$dog</span> <span class="sy0">=</span> <span class="kw2">new</span> Dog<span class="sy0">;</span>
<span class="re0">$func</span> <span class="sy0">=</span> <span class="re0">$dog</span><span class="sy0">-&gt;</span><span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$func</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<a href="http://www.php.net/call_user_func"><span class="kw3">call_user_func</span></a><span class="br0">&#40;</span><span class="re0">$dog</span><span class="sy0">-&gt;</span><span class="me1">close</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT14 SECTION "Higher Order Functions" [45492-50892] -->
<h3 class="sectionedit15" id="function_currying">Function Currying</h3>
<div class="level3">

<p>
Function currying is very similar to partial application. In function currying, instead of partially applying some parameters to a function to create a new function with fewer parameters, you&#039;re breaking down a multi-parameter function into a number of individual functions that accept only one argument, and then later composing all of the individual functions together back into the original multi-parameter function. The number of individual functions would correspond to the number of parameters. The uses of currying is similar to partial application, but may give you more flexibility when you know that the parameters are of a function are revealed to you one by one.
</p>

<p>
Function currying is not supported by <abbr title="Hypertext Preprocessor">PHP</abbr> natively, however there are some hacks you can use to curry your own multi-parameter functions.
</p>

<p>
You can refer to these two implementations:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://blog.uraniborg.net/post/currying-with-php-5-dot-3/" class="urlextern" title="http://blog.uraniborg.net/post/currying-with-php-5-dot-3/"  rel="nofollow">Function Currying with a Class</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.ianty.com/php/currying-with-php-5-3/" class="urlextern" title="http://blog.ianty.com/php/currying-with-php-5-3/"  rel="nofollow">Function Currying with another Function</a></div>
</li>
</ul>

</div>
<!-- EDIT15 SECTION "Function Currying" [50893-51975] -->
<h2 class="sectionedit16" id="exception_error_handling">Exception/Error Handling</h2>
<div class="level2">

<p>
<a href="http://php.net/manual/en/language.exceptions.php" class="urlextern" title="http://php.net/manual/en/language.exceptions.php"  rel="nofollow">Exceptions</a> are special conditions, usually errors, that can occur or be explicitly made by a program. They connote that something entirely different from what was expected has occurred. In most cases, the situation requires that a special instruction set be done in order to mitigate a catastrophic system failure. 
</p>

<p>
You may confuse them with just using if/else pattern. But you need to think of exceptions as real errors, not just branch logic. Exceptions are also not the same thing as when you get a <abbr title="Hypertext Preprocessor">PHP</abbr> error, that&#039;s usually because you have a syntax error of some sort. Exceptions are only used when you as the programmer explicitly setup an exception system for your application. <abbr title="Hypertext Preprocessor">PHP</abbr> by itself will never emit exceptions. Therefore exceptions are like your application&#039;s custom errors, not <abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s system errors. Here&#039;s some slides that explain how exceptions work.
</p>

<p>
<iframe title="" src="http://www.slideshare.net/slideshow/embed_code/618199" style="width:427px; height:356px" frameborder="0" scrolling="no"></iframe>
</p>

<p>
You should also refer to these sources to get a better understanding using exceptions:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://programmers.stackexchange.com/questions/133335/handling-errors-in-php-when-using-mvc" class="urlextern" title="http://programmers.stackexchange.com/questions/133335/handling-errors-in-php-when-using-mvc"  rel="nofollow">http://programmers.stackexchange.com/questions/133335/handling-errors-in-php-when-using-mvc</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://net.tutsplus.com/tutorials/php/the-ins-and-outs-of-php-exceptions/" class="urlextern" title="http://net.tutsplus.com/tutorials/php/the-ins-and-outs-of-php-exceptions/"  rel="nofollow">http://net.tutsplus.com/tutorials/php/the-ins-and-outs-of-php-exceptions/</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://stackoverflow.com/questions/5868733/what-do-we-need-exception-code-for-any-use-case-scenario" class="urlextern" title="http://stackoverflow.com/questions/5868733/what-do-we-need-exception-code-for-any-use-case-scenario"  rel="nofollow">http://stackoverflow.com/questions/5868733/what-do-we-need-exception-code-for-any-use-case-scenario</a></div>
</li>
</ul>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s exception handling works through the <em>try, throw, catch, finally</em> cycle. The <em>finally</em> operator will be available in <abbr title="Hypertext Preprocessor">PHP</abbr> 5.5 and above.
</p>

<p>
The first thing to understand is the try catch block.
</p>
<pre class="code php"><span class="co1">//php tries to do something, and if an exception is &quot;thrown&quot; then it will catch it</span>
try <span class="br0">&#123;</span>
&nbsp;
    <span class="co1">// try body</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$something_bad_happened</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">throw</span> <span class="kw2">new</span> Exception<span class="sy0">;</span> <span class="co1">//exceptions are objects!</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="co1">//note that if you're using namespaces, Exception is a class requiring a namespace root such as &quot;\Exception&quot;</span>
<span class="br0">&#125;</span> catch <span class="br0">&#40;</span>Exception <span class="re0">$e</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//the catch parameter is being typehinted to the Exception object, we can also use custom typehints later</span>
    <span class="co1">//$e is the exception object, we can access its methods</span>
    <span class="kw1">echo</span> <span class="re0">$e</span><span class="sy0">-&gt;</span><span class="me1">getMessage</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">echo</span> <span class="re0">$e</span><span class="sy0">-&gt;</span><span class="me1">getCode</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="co1">// there are more methods you can use, refer to the exception documentation</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> has a number of exceptions you can use. There&#039;s the default <code>Exception</code> object. There are also the <a href="http://www.php.net/manual/en/spl.exceptions.php" class="urlextern" title="http://www.php.net/manual/en/spl.exceptions.php"  rel="nofollow">SPL exceptions</a>. When designing an exception system, try to use the default or SPL exceptions first. When you need more kinds of exceptions, that&#039;s when you need to extend the <code>Exception</code> class. 
</p>

<p>
In order to extend the Exception class, first refer to the <a href="http://www.php.net/manual/en/language.exceptions.extending.php" class="urlextern" title="http://www.php.net/manual/en/language.exceptions.extending.php"  rel="nofollow">PHP documentation on extending exceptions</a>. Codeigniter by itself does not currently support exceptions, but it&#039;s a simple matter of integrating exceptions. There are three ways you can do this. Either you put your exceptions as classes in a <code>application/config/exceptions.php</code> file, or you put it in as a pre-system hook, or you can <em>replace</em> the core CI_Exceptions class (beware you may need the CI_Exceptions class), or through creating your own libraries.
</p>

<p>
Exceptions are just classes, so you can put each into its own file and PSR-0 autoload it, or you can have all the classes in one file and just require/include it during your bootstrapping process.
</p>

</div>
<!-- EDIT16 SECTION "Exception/Error Handling" [51976-55417] -->
<h2 class="sectionedit17" id="event_driven_programming">Event Driven Programming</h2>
<div class="level2">

<p>
Event driven programming (or signal driven development) is a style of code in which the flow of execution is triggered by events. Therefore your code will have two parts. The first part would register an event by selecting or detecting it. The second part handles the event and executes the triggered code. Event driven programming is often used in <abbr title="Graphical User Interface">GUI</abbr> applications. In fact all of javascript is based on event driven programming. However event driven is also useful for long running processes that wait for some event before reacting. These processes aren&#039;t launched to run a process and finish, but to sit like a watch dog and do prescripted actions according to random events. Therefore making your application non-linear.
</p>

<p>
Event driven programming is often subclassed under the <a href="http://en.wikipedia.org/wiki/Observer pattern" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Observer pattern">observer pattern</a>. Subjects maintain a list of observers and publish their events or messages to those observers, the observer then receives the event and handles it correspondingly. When this pattern is scaled up, it often is then called the publish and subscribe pattern. The subjects publish and the observers subscribe. When this is done in a distributed manner, programmers often need to get acquainted with socket programming or job managers or message queues such as Gearman and ZMQ.
</p>

<p>
Event driven programming is often confused with asynchronous programming or I/O. This is not the same thing. Events when handled can still be executed in a synchronous manner, that is one by one as those events come in. Kind of like a queue of events. However they can also be used in an asynchronous manner. You may run the event handlers concurrently by using multi-threaded or worker processes.
</p>

<p>
<iframe title="" src="http://www.slideshare.net/slideshow/embed_code/13257632" style="width:427px; height:356px" frameborder="0" scrolling="no"></iframe>
</p>

<p>
Implementing event driven programs is out of the scope of the course, however there&#039;s a number of libraries and resources you can refer to:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/prggmr/XPSPL" class="urlextern" title="https://github.com/prggmr/XPSPL"  rel="nofollow">High Performance Signal Processor</a> - Event driven library. You could drop this in as Composer library and begin event driven programming from the controller or a long running process. Also see this <a href="http://www.youtube.com/watch?v=4rRa-bB5kTA" class="urlextern" title="http://www.youtube.com/watch?v=4rRa-bB5kTA"  rel="nofollow">introductory video on event driven architecture</a> by the same developer.</div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/BaylorRae/PubSub-PHP" class="urlextern" title="https://github.com/BaylorRae/PubSub-PHP"  rel="nofollow">Publish and Subscribe Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://onlamp.com/pub/a/php/2001/03/29/socket_intro.html" class="urlextern" title="http://onlamp.com/pub/a/php/2001/03/29/socket_intro.html"  rel="nofollow">Socket Programming Introduction</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://christophh.net/2012/07/24/php-socket-programming/" class="urlextern" title="http://christophh.net/2012/07/24/php-socket-programming/"  rel="nofollow">Using PHP&#039;s Socket Library</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/igorw/evenement" class="urlextern" title="https://github.com/igorw/evenement"  rel="nofollow">Evenement library</a> - For the event emitter pattern which applies to the observer pattern.</div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.jmoz.co.uk/websockets-ratchet-react-redis" class="urlextern" title="http://blog.jmoz.co.uk/websockets-ratchet-react-redis"  rel="nofollow">Web Sockets, Ratchet, React and Redis integration</a> - See this for inspiration of what you can do by bringing everything together.</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.photon-project.com/" class="urlextern" title="http://www.photon-project.com/"  rel="nofollow">Photon PHP Framework</a> - This is a true event driven framework for <abbr title="Hypertext Preprocessor">PHP</abbr>, it sits behind the Mongrel 2 server though!</div>
</li>
</ul>

</div>
<!-- EDIT17 SECTION "Event Driven Programming" [55418-58485] -->
<h2 class="sectionedit18" id="filesystem_input_output">Filesystem Input/Output</h2>
<div class="level2">

<p>
Input/Output (IO) in programming refers to the communication between an internal system and external system. The entire internet itself is an input/output system. Each computer program and script also performs input and output. So the term is pretty generic. This section however refers specifically to manipulating the filesystem IO. The filesystem in our case refers to the abstraction of data storage and management on the harddisk. The low level mechanics of these constructs are performed by the operating system and data storage device. As web developers we simply have to understand their <abbr title="Application Programming Interface">API</abbr> and perform IO on it.
</p>

<p>
File manipulation for web development mostly revolves around file uploading, file downloading and authentication of uploaded files. Further processing of the files may take place such as video/audio encoding, compression and manipulation of directories. Before we start, your host must have writable directories. Many cloud hosts that I&#039;ve recommended do not currently support writable directories, however Pagodabox does. On your local stack this won&#039;t matter since you have directories writable by default. If you cannot use writable directories or the amount of uploaded files will exceed your budget, you can instead use a cloud based file system CDN such as Amazon S3.
</p>

</div>
<!-- EDIT18 SECTION "Filesystem Input/Output" [58486-59820] -->
<h3 class="sectionedit19" id="codeigniter_file_management">Codeigniter File Management</h3>
<div class="level3">

<p>
Codeigniter provides three tools for file management, you should open up CI&#039;s source code to see how they work:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html"  rel="nofollow">File Upload class</a> - for uploading files.</div>
</li>
<li class="level1"><div class="li"> <a href="http://ellislab.com/codeigniter/user-guide/libraries/zip.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/zip.html"  rel="nofollow">Zip Encoding class</a> - for compressing files with zip encoding.</div>
</li>
<li class="level1"><div class="li"> <a href="http://ellislab.com/codeigniter/user-guide/helpers/download_helper.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/helpers/download_helper.html"  rel="nofollow">Download helper</a> - for forcing a download.</div>
</li>
<li class="level1"><div class="li"> <a href="http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html"  rel="nofollow">File Helper</a> - for basic file manipulation.</div>
</li>
</ul>

<p>
The file upload class relies on form based uploads. You need to have an encoding type of <code>multipart/form-data</code>. You can also use Codeigniter&#039;s <a href="http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/helpers/form_helper.html"  rel="nofollow">form helper</a> to open up the form with <code>form_open_multipart();</code>.
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a> <span class="kw3">method</span><span class="sy0">=</span><span class="st0">&quot;post&quot;</span> <span class="kw3">action</span><span class="sy0">=</span><span class="st0">&quot;controller/method&quot;</span> <span class="kw3">enctype</span><span class="sy0">=</span><span class="st0">&quot;multipart/form-data&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a>&gt;</span></pre>

<p>
It also expects that the file input field will have a name of “userfile”. You can change it by passing in a different parameter to the <code>do_upload()</code> method. However this also means that Codeigniter&#039;s File Upload class can only upload one file at a time. According to <a href="http://www.php.net/manual/en/features.file-upload.multiple.php" class="urlextern" title="http://www.php.net/manual/en/features.file-upload.multiple.php"  rel="nofollow">official PHP documentation</a>, multiple file upload fields in a form should be specified in array style naming. Such as for example:
</p>
<pre class="code html4strict"><span class="sc2">&lt;<a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a> <span class="kw3">method</span><span class="sy0">=</span><span class="st0">&quot;post&quot;</span> <span class="kw3">action</span><span class="sy0">=</span><span class="st0">&quot;controller/method&quot;</span> <span class="kw3">enctype</span><span class="sy0">=</span><span class="st0">&quot;multipart/form-data&quot;</span> <span class="sy0">/</span>&gt;</span>
    <span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">input</span></a> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;userfile[]&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;file&quot;</span> <span class="sy0">/</span>&gt;</span>
    <span class="sc2">&lt;<a href="http://december.com/html/4/element/input.html"><span class="kw2">input</span></a> <span class="kw3">name</span><span class="sy0">=</span><span class="st0">&quot;userfile[]&quot;</span> <span class="kw3">type</span><span class="sy0">=</span><span class="st0">&quot;file&quot;</span> <span class="sy0">/</span>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/form.html"><span class="kw2">form</span></a>&gt;</span></pre>

<p>
This would make the files available in the <a href="http://www.php.net/manual/en/reserved.variables.files.php" class="urlextern" title="http://www.php.net/manual/en/reserved.variables.files.php"  rel="nofollow">global PHP array variable &quot;$_FILES&quot;</a>. Each file would be available as <code>$_FILES[&#039;userfile&#039;][&#039;name&#039;][i]</code> where <code>i</code> is the index of the input field. You&#039;ll see that the file properties (“name”) actually come before the file index, this is slightly counter intuitive. Therefore in order to make this library actually upload multiple files, you&#039;ll need to loop through each file and call <code>do_upload()</code> on each index. See this <a href="http://stackoverflow.com/questions/1908247/codeigniter-multiple-file-upload" class="urlextern" title="http://stackoverflow.com/questions/1908247/codeigniter-multiple-file-upload"  rel="nofollow">stack overflow post for inspiration</a>. Also remember to switch on <code>encrypt_name</code> or randomise “file_name” to avoid file naming conflicts, however in that case remember to keep a track of those file names and their location paths in your database. A common use case would files that a user uploads and those files would be tied to that user.
</p>

<p>
The upload class also has file authentication. Files are checked for their <a href="http://en.wikipedia.org/wiki/Internet media type" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Internet media type">mimetype</a> and then matched to the allowed mimetypes. You specify the allowed files through the file extensions, but those file extensions correspond to mimetypes in the <code>application/config/mimes.php</code>. This is quite a useful part of the library and if you intend to use other libraries you may still wish to validate the files using this Upload class by extending the library.
</p>

<p>
This Upload class does not chunk or stream the upload. This means that the files you upload will be put into memory before being put to disk. This is when you will face problems due to your <abbr title="Hypertext Preprocessor">PHP</abbr>.ini settings that limit certain aspects of file uploading. If the files are large, you may either time out due to execution time limits, max out your memory due to RAM limits, or exceed your POST or upload size, or even exceed the limit on simultaneous file uploads. All of these are explained in the <a href="http://www.php.net/manual/en/features.file-upload.common-pitfalls.php" class="urlextern" title="http://www.php.net/manual/en/features.file-upload.common-pitfalls.php"  rel="nofollow">common pitfalls page regarding file uploading</a> in the <abbr title="Hypertext Preprocessor">PHP</abbr> documentation. If you need to change these settings, check the .htaccess section in the Server Side Architecture article. But be aware that your host may set hard limits on the <abbr title="Hypertext Preprocessor">PHP</abbr> settings, and many hosts don&#039;t expect your web application to be a file hosting site, and their terms of service may prohibit such practices.
</p>

<p>
This class has another disadvantage, it isn&#039;t flexible due to being hard coupled to <abbr title="HyperText Markup Language">HTML</abbr> forms. You probably want a <a href="http://www.php.net/manual/en/features.file-upload.put-method.php" class="urlextern" title="http://www.php.net/manual/en/features.file-upload.put-method.php"  rel="nofollow">REST compliant</a> <abbr title="Asynchronous JavaScript and XML">AJAX</abbr> file uploader that can take advantage of <a href="https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads" class="urlextern" title="https://github.com/blueimp/jQuery-File-Upload/wiki/Chunked-file-uploads"  rel="nofollow">chunked uploads</a>, <a href="https://github.com/23/resumable.js" class="urlextern" title="https://github.com/23/resumable.js"  rel="nofollow">pause and resume functionality</a>, and <a href="http://www.sitepoint.com/html5-ajax-file-upload/" class="urlextern" title="http://www.sitepoint.com/html5-ajax-file-upload/"  rel="nofollow">asynchronous IO</a> so you don&#039;t have to wait for the upload to finish to keep working with the web application. All of these functionalities rely more on the client side and all have quite specialised problems to solve. So I suggest reading the linked articles, but use a library like <a href="http://www.plupload.com/" class="urlextern" title="http://www.plupload.com/"  rel="nofollow">Plupload</a> or <a href="http://fineuploader.com/" class="urlextern" title="http://fineuploader.com/"  rel="nofollow">Fine Uploader</a> or <a href="http://blueimp.github.com/jQuery-File-Upload/" class="urlextern" title="http://blueimp.github.com/jQuery-File-Upload/"  rel="nofollow">jQuery File Uploader</a>.
</p>

<p>
When you have your files uploaded, sometimes those files need to be downloaded. Now if those files are just images, you can use a direct link, or if you wish to be fancy and secure you would need a REST compliant controller that handles image downloads that can also be embedded if necessary. By creating a controller that handles the request and then pipes the message, you can execute all sorts of analytics and processing while that request takes place. For example you may wish throttle the number of image downloads, perhaps you will want to prevent third party sites <a href="http://en.wikipedia.org/wiki/Inline linking" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Inline linking">hotlinking</a> to your images so you can reduce bandwidth cost, or maybe you need authentication of which users are allowed to view which image. All of this is only possible with having a “download” controller. That&#039;s when Codeigniter&#039;s <a href="http://ellislab.com/codeigniter/user-guide/libraries/zip.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/zip.html"  rel="nofollow">zip encoding class</a> and <a href="http://ellislab.com/codeigniter/user-guide/helpers/download_helper.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/helpers/download_helper.html"  rel="nofollow">download helper</a> become useful.
</p>

<p>
For individual images or files there&#039;s no need to zip archive them. Images need to be accessible raw and they already have been compressed by their encoding. Individual files are usually required in their raw format too. In that case you can just use the download helper to pass through the binary files straight to the client. 
</p>

<p>
If in the case of a client needing to download multiple images or multiple files, then you need the zip encoding class. Consider a use case like Github when someone needs to download a project, Github zips up the project and then you can download all the files at once. This also reduces your bandwidth cost since your overall transfer size is lower.
</p>

<p>
The zip encoding class allows you to dynamically add data or read existing data to a buffer before writing the archive to disk or combining it into a download package. Think of a buffer as a bucket that you fill up before you do anything to the contents of that bucket. The ability to write the archive may be useful if you need to make backup copies of your web application and database contents, and the ability to combine into a download package is useful for clients downloading multiple files.
</p>
<pre class="code php"><span class="co1">//Here we're &quot;adding&quot; data to zip archive, this zip archive is being &quot;buffered&quot;</span>
<span class="re0">$data</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st_h">'mydata1.txt'</span> <span class="sy0">=&gt;</span> <span class="st_h">'A Data String!'</span><span class="sy0">,</span>
    <span class="st_h">'mydata2.txt'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Another Data String!'</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//we're first adding two files to the archive</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">zip</span><span class="sy0">-&gt;</span><span class="me1">add_data</span><span class="br0">&#40;</span><span class="re0">$data</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//it's possible to stack up the data, and also add directories inside the zip file directly</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">zip</span><span class="sy0">-&gt;</span><span class="me1">add_data</span><span class="br0">&#40;</span><span class="st_h">'I was born in an elevator...'</span><span class="sy0">,</span> <span class="st_h">'personal/my_bio.txt'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&nbsp;
<span class="co1">//now we're reading data that exists already</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">zip</span><span class="sy0">-&gt;</span><span class="me1">read_file</span><span class="br0">&#40;</span><span class="st_h">'/path/to/photo.jpg'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//finally we're flushing the buffer to the hard disk</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">zip</span><span class="sy0">-&gt;</span><span class="me1">archive</span><span class="br0">&#40;</span><span class="st_h">'/path/to/folder/on/server/myarchive.zip'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//at the same time we can package the archive for download!</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">zip</span><span class="sy0">-&gt;</span><span class="me1">download</span><span class="br0">&#40;</span><span class="st_h">'for_the_client.zip'</span><span class="br0">&#41;</span><span class="sy0">;</span> </pre>

<p>
Finally Codeigniter provides you a simple <a href="http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/helpers/file_helper.html"  rel="nofollow">File helper</a> that can do read, write, delete and get information on files. It&#039;s <abbr title="Application Programming Interface">API</abbr> is simple so there&#039;s no need for much explanation.
</p>

</div>
<!-- EDIT19 SECTION "Codeigniter File Management" [59821-68035] -->
<h3 class="sectionedit20" id="advanced_file_manipulation">Advanced File Manipulation</h3>
<div class="level3">

<p>
To begin advanced file manipulation, it&#039;s good to have a cursory understanding of how binary works:
</p>
<div class="vshare__center"><!--[if !IE]> -->
<object width="425" height="350" type="application/x-shockwave-flash" data="http://www.youtube.com/v/ETsfylK7kzM%26list%3DPLwwh-11EOGvPlNx-92BgRkrIJxsmFnCk7?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="425" height="350" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/ETsfylK7kzM%26list%3DPLwwh-11EOGvPlNx-92BgRkrIJxsmFnCk7?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div>
<p>
Now if you want to do file manipulation, you need to stop using libraries for a while and get granular. <a href="http://davidhancock.co/2012/11/useful-php-functions-for-dealing-with-the-file-system/" class="urlextern" title="http://davidhancock.co/2012/11/useful-php-functions-for-dealing-with-the-file-system/"  rel="nofollow">This blog article by David Hancock on useful file manipulation functions</a> will be useful. Make sure to read the code and try to understand the flow of execution. The next thing to do is to go through the <a href="http://www.php.net/manual/en/ref.filesystem.php" class="urlextern" title="http://www.php.net/manual/en/ref.filesystem.php"  rel="nofollow">PHP documentation on filesystem functions</a>. Use this as a reference for whenever you&#039;re looking at file manipulation code. Also check out these <a href="http://www.devshed.com/c/a/PHP/File-And-Directory-Manipulation-In-PHP-part-1/" class="urlextern" title="http://www.devshed.com/c/a/PHP/File-And-Directory-Manipulation-In-PHP-part-1/"  rel="nofollow">Devshed tutorials on file and directory manipulation</a>. The <code>pack()</code> and <code>unpack()</code> binary functions are also useful for <a href="http://www.codediesel.com/php/unpacking-binary-data/" class="urlextern" title="http://www.codediesel.com/php/unpacking-binary-data/"  rel="nofollow">constructing your own binary files</a>.
</p>

<p>
If you&#039;re performing a lot of filesystem functions that check whether files exist or on file information, <abbr title="Hypertext Preprocessor">PHP</abbr> will cache the information from those filesystem functions for faster results. You&#039;ll eventually need to clear your stat cache with the <a href="http://php.net/manual/en/function.clearstatcache.php" class="urlextern" title="http://php.net/manual/en/function.clearstatcache.php"  rel="nofollow">&quot;clearstatcache&quot; function</a>.
</p>

<p>
Another factor of interest is <a href="http://php.net/manual/en/features.commandline.io-streams.php" class="urlextern" title="http://php.net/manual/en/features.commandline.io-streams.php"  rel="nofollow">IO streams</a>. The same filesystem functions can can access IO sockets from command line programs. Check out this <a href="http://www.sk89q.com/2010/04/introduction-to-php-streams/" class="urlextern" title="http://www.sk89q.com/2010/04/introduction-to-php-streams/"  rel="nofollow">introduction to PHP streams</a>.
</p>

<p>
Note that for any asynchronous operations, you&#039;ll need to fork your process or use a worker thread. See server side architecture for more information on concurrent processing.
</p>

<p>
For chunked file uploads, the <a href="https://github.com/moxiecode/plupload/blob/master/examples/upload.php" class="urlextern" title="https://github.com/moxiecode/plupload/blob/master/examples/upload.php"  rel="nofollow">Plupload library demonstrates an upload example in their Github repository</a>. It is around line 75 - 85. Essentially it&#039;s matter of retrieving chunks from the client side, and writing it to the temporary file as it comes. The writing process will be a loop that keeps checking for chunks from an input, puts those chunks into a buffer, and writes those buffer into the temporary file. Once the filesize of the temporary file matches the total file size of the client request, then that means the file has been completely uploaded, and it can simply move that temporary file into persistent directory and keep it on the harddisk.
</p>

<p>
Finally if you need a super powerful filesystem abstraction system that can provide APIs to local storage, <abbr title="File Transfer Protocol">FTP</abbr>, Amazon S3, Dropbox and more, you can use the <a href="https://github.com/KnpLabs/Gaufrette" class="urlextern" title="https://github.com/KnpLabs/Gaufrette"  rel="nofollow">Gaufrette library</a>. It&#039;s documentation is a bit weak, but you can go straight into the code to see all the available adapters. Also make sure to checkout <a href="http://aws.amazon.com/sdkforphp/" class="urlextern" title="http://aws.amazon.com/sdkforphp/"  rel="nofollow">Amazon S3&#039;s PHP SDK</a>.
</p>

</div>
<!-- EDIT20 SECTION "Advanced File Manipulation" [68036-71086] -->
<h2 class="sectionedit21" id="shell_operations">Shell Operations</h2>
<div class="level2">

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> allows you to interface with the <a href="http://en.wikipedia.org/wiki/Shell (computing)" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Shell (computing)">shell</a> otherwise known as the command line. All those commands that you executed as part of your introduction to Cloud9 can also be executed by <abbr title="Hypertext Preprocessor">PHP</abbr> directly. This allows you to open up other scripts and run them as part of the <abbr title="Hypertext Preprocessor">PHP</abbr> binary separate to the request response cycle, it also allows you to launch other programs and pass in data and retrieve output from those programs. For example you may wish to pass an uploaded video a video encoder program like FFmpeg that is written in C. The <a href="http://ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts" class="urlextern" title="http://ffmpeg.org/trac/ffmpeg/wiki/Using%20FFmpeg%20from%20PHP%20scripts"  rel="nofollow">FFmpeg documentation in fact tells you how to run its program from a PHP script</a>.
</p>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> has a number of <a href="http://www.php.net/manual/en/ref.exec.php" class="urlextern" title="http://www.php.net/manual/en/ref.exec.php"  rel="nofollow">native program execution functions</a> that do slightly different things, but you can understand them as simply passing a constructed command to the command line. Using them is quite easy, it simply requires an understanding IO stream pipes, and the particular program you&#039;re trying to execute. The more difficult part comes when you need asynchronous program execution where your script doesn&#039;t wait for the program execution to finish before completing the rest of its commands. This asynchronous processing can also lead to more complicated concurrent process forking of your own <abbr title="Hypertext Preprocessor">PHP</abbr> scripts. But first let&#039;s get acquainted with simply executing external programs.
</p>

<p>
If you want to get deeper into this particular area, check out <a href="http://www.tuxradar.com/practicalphp/16/1/0" class="urlextern" title="http://www.tuxradar.com/practicalphp/16/1/0"  rel="nofollow">TuxRadar&#039;s comprehensive tutorial PHP process control</a>.
</p>

</div>
<!-- EDIT21 SECTION "Shell Operations" [71087-72727] -->
<h3 class="sectionedit22" id="program_execution">Program Execution</h3>
<div class="level3">

<p>
The commands that are most used are the simple <a href="http://www.php.net/manual/en/function.exec.php" class="urlextern" title="http://www.php.net/manual/en/function.exec.php"  rel="nofollow">&quot;exec()&quot;</a>, and the more powerful but complex <a href="http://www.php.net/manual/en/function.proc-open.php" class="urlextern" title="http://www.php.net/manual/en/function.proc-open.php"  rel="nofollow">&quot;proc_open()&quot;</a>. 
</p>

<p>
The <code>exec()</code> function has three parameters and returns a single value. The first parameter is a string of the shell command you want executed. The second parameter is a value that is passed by reference, the command will inject the complete returned output of the command by line as an array to the second parameter. The third parameter is also passed by reference, the function will inject the exit code of the command. This means the return value could be quite arbitrary. However if the return code is 0, it generally means the command worked. You can check the common list of exit codes for Linux at <a href="http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/exitcodes.html" class="urlextern" title="http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/exitcodes.html"  rel="nofollow">Linuxtopia</a> and for <a href="http://www.hiteksoftware.com/knowledge/articles/049.htm" class="urlextern" title="http://www.hiteksoftware.com/knowledge/articles/049.htm"  rel="nofollow">Windows at HiTekSoftware</a>.
</p>
<pre class="code php"><span class="co1">//this particular shell command is pretty simple, in production you'll probably run some program such as a PHP script, bash script, or command line application. Remember if you're using an executable alias, you need to add them to your PATH variables, otherwise you need to absolute path.</span>
&nbsp;
<span class="co1">//determines if the string &quot;Windows&quot; exists in php_uname() function</span>
<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/stripos"><span class="kw3">stripos</span></a><span class="br0">&#40;</span><a href="http://www.php.net/php_uname"><span class="kw3">php_uname</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st_h">'windows'</span><span class="br0">&#41;</span> <span class="sy0">!==</span> <span class="kw4">false</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//we use the windows dir command</span>
    <span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'dir'</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="kw1">else</span><span class="br0">&#123;</span>
    <span class="co1">//we use the unix ls command (for Linux and Mac)</span>
    <span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'ls'</span><span class="sy0">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//empty array (exec will append to the array, not overwrite it)</span>
<span class="re0">$return_value</span> <span class="sy0">=</span> <span class="st_h">''</span><span class="sy0">;</span> <span class="co1">//empty string</span>
&nbsp;
<span class="co1">//this would echo out the LAST LINE of the output that would exist if you did this in the command line</span>
<span class="kw1">echo</span> <a href="http://www.php.net/exec"><span class="kw3">exec</span></a><span class="br0">&#40;</span><span class="re0">$cmd</span><span class="sy0">,</span> <span class="re0">$output</span><span class="sy0">,</span> <span class="re0">$return_value</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this would dump all of output lines as an array</span>
<a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//this should dump out the integer 0, or else there'd be an error!</span>
<a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$return_value</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The <code>exec()</code> command is a simple command but it does its job. You don&#039;t have much control over the piping of the data, and by itself it is not asynchronous, <abbr title="Hypertext Preprocessor">PHP</abbr> will wait for the command to finish executing before completing the rest of its own script. This means long operations will make the client wait at the browser. For example check out this trace route command. You&#039;ll wait a couple seconds before getting any output.
</p>
<pre class="code php"><span class="co1">//in windows</span>
<a href="http://www.php.net/exec"><span class="kw3">exec</span></a><span class="br0">&#40;</span><span class="st_h">'tracert -h 15 polycademy.com'</span><span class="sy0">,</span> <span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//in unix</span>
<a href="http://www.php.net/exec"><span class="kw3">exec</span></a><span class="br0">&#40;</span><span class="st_h">'traceroute -h 15 polycademy.com'</span><span class="sy0">,</span> <span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The <code>proc_open()</code> function is far more powerful than the <code>exec()</code> function. Primarily it allows you to manipulate the IO pipe streams to the command or program that you&#039;re executing. All programs have three basic IO streams. They are STDIN, STDOUT and STDERR. These three are called the <a href="http://en.wikipedia.org/wiki/Standard streams" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Standard streams">standard streams</a>. They are then abstracted into <a href="http://en.wikipedia.org/wiki/File descriptor" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/File descriptor">file descriptors</a>, which are simply integers. 0 for STDIN, 1 for STDOUT and 2 for STDERR.
</p>
<pre class="code php"><span class="kw2">&lt;?php</span>
&nbsp;
<span class="co1">//the first thing to do is to setup your file descriptor specification</span>
<span class="co1">//the spec is the file descriptor integer corresponding to an array of the method of passing data and the access mode</span>
<span class="co1">//instead of a pipe you can also use a file or socket connection</span>
<span class="re0">$descriptor_spec</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="nu0">0</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'r'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDIN read mode</span>
    <span class="nu0">1</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDOUT write mode</span>
    <span class="nu0">2</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDERR write mode</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//any command line options to the binary would be appended to the $cmd variable, not piped to STDIN</span>
<span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'php'</span><span class="sy0">;</span> <span class="co1">//we're going to dynamically execute a PHP script, make sure php is in your PATH variables</span>
&nbsp;
<span class="co1">//proc_open also has the third parameter of current working directory</span>
<span class="co1">//the default would be the working directory of your the php process</span>
<span class="co1">//this may be apache's binary directory because PHP is being executed as a module to PHP</span>
<span class="co1">//the best way to be sure is to simply pass 'cd' or 'ls' to the command in proc_open, note it'll be different to exec()</span>
<span class="co1">//pipes is passed by reference, we'll be using it to inject data into the IO streams</span>
<span class="re0">$process</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_open"><span class="kw3">proc_open</span></a><span class="br0">&#40;</span><span class="re0">$cmd</span><span class="sy0">,</span> <span class="re0">$descriptor_spec</span><span class="sy0">,</span> <span class="re0">$pipes</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/is_resource"><span class="kw3">is_resource</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//pass data into the STDIN stream, the php binary will accept this as input, it will be expecting php code</span>
    <a href="http://www.php.net/fwrite"><span class="kw3">fwrite</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="st_h">'&lt;?php echo \'I am a php script that has been executed directly by the binary!\' ?&gt;'</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">0</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//we need to close the connection or else the script cannot end</span>
&nbsp;
    <span class="co1">//extract the data out of STDOUT</span>
    <span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/stream_get_contents"><span class="kw3">stream_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//extract data out of STDERR (php binary will pass any php errors to STDERR and STDOUT)</span>
    <span class="re0">$errors</span> <span class="sy0">=</span> <a href="http://www.php.net/stream_get_contents"><span class="kw3">stream_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//same as the return_value from exec(), if it's 0, that means the command worked (note that STDERR is errors recorded from the program itself, whereas exit_code would be the command line giving you back an error)</span>
    <span class="re0">$exit_code</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_close"><span class="kw3">proc_close</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$exit_code</span> <span class="sy0">==</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//command worked</span>
    <span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/empty"><span class="kw3">empty</span></a><span class="br0">&#40;</span><span class="re0">$errors</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//means the php binary did not spit out php errors</span>
        <a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$output</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span><span class="kw1">else</span><span class="br0">&#123;</span>
        <a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$errors</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="kw1">else</span><span class="br0">&#123;</span>
    <a href="http://www.php.net/var_dump"><span class="kw3">var_dump</span></a><span class="br0">&#40;</span><span class="re0">$exit_code</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
You can also pass in a file into STDIN pipe.
</p>
<pre class="code php"><span class="re0">$descriptor_spec</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="nu0">0</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'file'</span><span class="sy0">,</span> <span class="st_h">'test.php'</span><span class="sy0">,</span> <span class="st_h">'r'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDIN read mode from file (assuming that test.php exists at getcwd)</span>
    <span class="nu0">1</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDOUT write mode</span>
    <span class="nu0">2</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDERR write mode</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'php'</span><span class="sy0">;</span>
<span class="re0">$cwd</span> <span class="sy0">=</span> <a href="http://www.php.net/getcwd"><span class="kw3">getcwd</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//this directory needs to have a test.php</span>
&nbsp;
<span class="re0">$process</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_open"><span class="kw3">proc_open</span></a><span class="br0">&#40;</span><span class="re0">$cmd</span><span class="sy0">,</span> <span class="re0">$descriptor_spec</span><span class="sy0">,</span> <span class="re0">$pipes</span><span class="sy0">,</span> <span class="re0">$cwd</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/is_resource"><span class="kw3">is_resource</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//notice we don't touch $pipes[0] because it's being handled as a file, it's not a stream IO to this parent script</span>
&nbsp;
    <span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/stream_get_contents"><span class="kw3">stream_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$errors</span> <span class="sy0">=</span> <a href="http://www.php.net/stream_get_contents"><span class="kw3">stream_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$exit_code</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_close"><span class="kw3">proc_close</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
Using <code>proc_open()</code> style we can actually solve our previous problem of having the client hanging before a long operation completes and returns the output. We&#039;ll buffer the output as it comes instead of waiting for the command to finish. This can be useful for <abbr title="Asynchronous JavaScript and XML">AJAX</abbr> based output that needs to be synchronous but can return output little by little. The server would be holding the connection. The reason I didn&#039;t have to start output buffering through <code>ob_start()</code> is because <abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s ini settings may have left it on by default. You can check this by using <a href="http://www.php.net/manual/en/function.ob-get-level.php#109001" class="urlextern" title="http://www.php.net/manual/en/function.ob-get-level.php#109001"  rel="nofollow">&quot;ob_get_level()&quot;</a>.
</p>
<pre class="code php"><span class="co1">//we don't need to specify STDIN, because we're just reading from this command</span>
<span class="re0">$descriptor_spec</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="nu0">1</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDOUT write mode</span>
    <span class="nu0">2</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="st_h">'pipe'</span><span class="sy0">,</span> <span class="st_h">'w'</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//STDERR write mode</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//works on windows</span>
<span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'tracert -w 10 accettura.com'</span><span class="sy0">;</span>
<span class="co1">//$cmd_on_linux = 'traceroute -w 10 accettura.com';</span>
&nbsp;
<span class="re0">$process</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_open"><span class="kw3">proc_open</span></a><span class="br0">&#40;</span><span class="re0">$cmd</span><span class="sy0">,</span> <span class="re0">$descriptor_spec</span><span class="sy0">,</span> <span class="re0">$pipes</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/is_resource"><span class="kw3">is_resource</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//there are two ways to do this, but both uses output buffering (use one or the other, delete one of them)</span>
&nbsp;
    <span class="co1">//first way</span>
    <span class="co1">//test for the end of output and loop through this block whenever it hasn't reached the end</span>
    <span class="kw1">while</span><span class="br0">&#40;</span><span class="sy0">!</span><a href="http://www.php.net/feof"><span class="kw3">feof</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//get output line by line</span>
        <span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/fgets"><span class="kw3">fgets</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="re0">$output</span><span class="sy0">;</span>
        <span class="co1">//flush the output buffer and destroy the buffer</span>
        <span class="co1">//these basically passes the content to the client even though the script hasn't finished</span>
        <a href="http://www.php.net/ob_flush"><span class="kw3">ob_flush</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <a href="http://www.php.net/flush"><span class="kw3">flush</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//second way</span>
    <span class="co1">//extract a line equivalent to 4096 bytes (4kb) - 1 byte (due to fgets), this 4095 bytes is a limit on string literals (each character takes a byte), and do this continuously</span>
    <span class="co1">//until fgets can no longer get any more output and equates to false</span>
    <span class="kw1">while</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="re0">$output</span> <span class="sy0">=</span> <a href="http://www.php.net/fgets"><span class="kw3">fgets</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">,</span> <span class="nu0">4096</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">!==</span> <span class="kw4">false</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//flush the output buffer</span>
        <span class="kw1">echo</span> <span class="re0">$output</span><span class="sy0">;</span>
        <a href="http://www.php.net/ob_flush"><span class="kw3">ob_flush</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <a href="http://www.php.net/flush"><span class="kw3">flush</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$errors</span> <span class="sy0">=</span> <a href="http://www.php.net/stream_get_contents"><span class="kw3">stream_get_contents</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.php.net/fclose"><span class="kw3">fclose</span></a><span class="br0">&#40;</span><span class="re0">$pipes</span><span class="br0">&#91;</span><span class="nu0">2</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="re0">$exit_code</span> <span class="sy0">=</span> <a href="http://www.php.net/proc_close"><span class="kw3">proc_close</span></a><span class="br0">&#40;</span><span class="re0">$process</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
Remember to never execute user submitted code to the shell, they could pass <code>rm-rf</code> and your entire server would be wiped. You must always sanitise the user input if you must let them do so. See <a href="http://www.php.net/manual/en/function.escapeshellarg.php" class="urlextern" title="http://www.php.net/manual/en/function.escapeshellarg.php"  rel="nofollow">&quot;escapeshellarg()&quot;</a> and <a href="http://www.php.net/manual/en/function.escapeshellcmd.php" class="urlextern" title="http://www.php.net/manual/en/function.escapeshellcmd.php"  rel="nofollow">&quot;escapeshellcmd()&quot;</a> for more information.
</p>

<p>
Finally you may want to redirect your IO streams to different connections. The <code>proc_open()</code> function already allows quite granular control over your IO streams, but sometimes you need to do through the command itself. Look into these three resources to find out more:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://linuxcommand.org/lts0060.php" class="urlextern" title="http://linuxcommand.org/lts0060.php"  rel="nofollow">Learning IO Redirection</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.tutorialspoint.com/unix/unix-io-redirections.htm" class="urlextern" title="http://www.tutorialspoint.com/unix/unix-io-redirections.htm"  rel="nofollow">Shell IO</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://tldp.org/LDP/abs/html/io-redirection.html" class="urlextern" title="http://tldp.org/LDP/abs/html/io-redirection.html"  rel="nofollow">IO Redirection Examples</a></div>
</li>
</ul>

</div>
<!-- EDIT22 SECTION "Program Execution" [72728-81899] -->
<h3 class="sectionedit23" id="asynchronous_processing">Asynchronous Processing</h3>
<div class="level3">

<p>
Asynchronous processing is the method of running shell operations without waiting for any returned output. Doing this in a cross platform manner is quite finicky, and it is very difficult to test because you don&#039;t know if what you did actually worked. However the below code works between Windows and Unix systems. Make sure to read up on IO redirection to understand the commands below.
</p>
<pre class="code php"><span class="co1">//taking the command we've been using</span>
<span class="re0">$cmd</span> <span class="sy0">=</span> <span class="st_h">'tracert -w 10 accettura.com'</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span><span class="br0">&#40;</span><a href="http://www.php.net/stripos"><span class="kw3">stripos</span></a><span class="br0">&#40;</span><a href="http://www.php.net/php_uname"><span class="kw3">php_uname</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="st_h">'windows'</span><span class="br0">&#41;</span> <span class="sy0">!===</span> <span class="kw4">false</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
    <span class="co1">//popen and pclose are simpler versions to proc_open and proc_close</span>
    <span class="co1">//the trick is to use &quot;start /B&quot; start the process in background mode</span>
    <a href="http://www.php.net/pclose"><span class="kw3">pclose</span></a><span class="br0">&#40;</span><a href="http://www.php.net/popen"><span class="kw3">popen</span></a><span class="br0">&#40;</span><span class="st0">&quot;start /B &quot;</span><span class="sy0">.</span> <span class="re0">$cmd</span> <span class="sy0">.</span> <span class="st_h">' &gt; log.txt'</span><span class="sy0">,</span> <span class="st0">&quot;r&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//the &gt; log.txt is optional, it's just so we can see if it can work, this is based on STDOUT redirection, this will be stored in the cwd of the php script, you can also use an absolute path if you wish</span>
    <span class="kw1">echo</span> <span class="st_h">'If you see me pop up immediately this means it worked asynchronously!'</span><span class="sy0">;</span>
<span class="br0">&#125;</span><span class="kw1">else</span><span class="br0">&#123;</span>
    <span class="co1">//on linux systems its far easier</span>
    <span class="co1">//redirect STDOUT to /dev/null (to be discarded) or to a log file</span>
    <span class="co1">//the &amp; sign indicates that the process is in the background</span>
    <span class="co1">//we're also redirecting STDERR into dev/null too</span>
    <a href="http://www.php.net/exec"><span class="kw3">exec</span></a><span class="br0">&#40;</span><span class="re0">$cmd</span> <span class="sy0">.</span> <span class="st0">&quot; &gt;/dev/null 2&gt;/dev/null &amp;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
The above code is asynchronous launching of new processes, however it isn&#039;t the same as forking a child process. Forking a child process requires the use of <a href="http://www.php.net/manual/en/intro.pcntl.php" class="urlextern" title="http://www.php.net/manual/en/intro.pcntl.php"  rel="nofollow">PNCTL functions</a>. Those functions are not available to be used on Windows operating systems, and it can only be used in the <a href="http://www.shapeshifter.se/2008/08/04/asynchronous-background-execution-with-php/" class="urlextern" title="http://www.shapeshifter.se/2008/08/04/asynchronous-background-execution-with-php/"  rel="nofollow">context of command line scripts</a> (need to be executed directly from the <abbr title="Hypertext Preprocessor">PHP</abbr> binary). Therefore it is recommended that you use a job manager instead like Gearman discussed in the server side architecture. Gearman also helps with interprocess communication, whereas <code>pnctl_fork()</code> would require nasty hacks to get it working.
</p>

</div>
<!-- EDIT23 SECTION "Asynchronous Processing" [81900-83979] -->
<h3 class="sectionedit24" id="creating_cli_programs">Creating CLI Programs</h3>
<div class="level3">

<p>
Codeigniter offers the ability to your <a href="http://ellislab.com/codeigniter/user-guide/general/cli.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/cli.html"  rel="nofollow">controllers through the command line</a>. However there is more to building CLI applications than just routing the request. I suggest you to use the <a href="https://github.com/nategood/commando" class="urlextern" title="https://github.com/nategood/commando"  rel="nofollow">PHP CLI framework Commando</a>. You can learn how to write CLI programs via examples. Phil Sturgeon previously created a library to help CLI programming in Codeigniter, so you can read its <a href="https://github.com/philsturgeon/codeigniter-cli/blob/master/libraries/Cli.php" class="urlextern" title="https://github.com/philsturgeon/codeigniter-cli/blob/master/libraries/Cli.php"  rel="nofollow">source code</a>.
</p>

</div>
<!-- EDIT24 SECTION "Creating CLI Programs" [83980-84581] -->
<h2 class="sectionedit25" id="parsing_operations">Parsing Operations</h2>
<div class="level2">

<p>
There are times when you need to parse information and extract useful data. The ways to parse information depends on how the information is constructed, often referred to as a “language”. The <a href="http://en.wikipedia.org/wiki/Chomsky hierarchy" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Chomsky hierarchy">Chomsky hierarchy</a> defines four types languages. The most simplest is the “regular language”, which is then contained in context-free languages, then context-sensitive languages and finally recursively enumerable languages.
</p>

<p>
<a href="/lib/exe/detail.php?id=web_application_development%3Aphp_-_design_patterns&amp;media=web_application_development:500px-chomsky-hierarchy.svg.png" class="media" title="web_application_development:500px-chomsky-hierarchy.svg.png"><img src="/lib/exe/fetch.php?w=500&amp;media=web_application_development:500px-chomsky-hierarchy.svg.png" class="mediacenter" alt="" width="500" /></a>
</p>

<p>
The meaning of the four types of languages is still being studied by linguists and computer scientists. It is accepted that programming languages are context-free whereas natural languages are context-sensitive. This area of study is quite vast, and if you&#039;re interested you can study up on computational theory or languages or linguistics in your own time.
</p>

<p>
For the purposes of web development, when we need to extract data from a simple piece of information then we use <a href="http://nikic.github.com/2012/06/15/The-true-power-of-regular-expressions.html" class="urlextern" title="http://nikic.github.com/2012/06/15/The-true-power-of-regular-expressions.html"  rel="nofollow">regular expressions</a>. When the information we&#039;re parsing becomes complex such as <abbr title="HyperText Markup Language">HTML</abbr>, then we need to use a full blown parser. When we get into the realm of <a href="http://cs.haifa.ac.il/~shuly/teaching/08/nlp/complexity.pdf" class="urlextern" title="http://cs.haifa.ac.il/~shuly/teaching/08/nlp/complexity.pdf"  rel="nofollow">natural language processing</a>, then you&#039;ll need a PHD in artificial intelligence. So this section will focus on regular expressions and <abbr title="HyperText Markup Language">HTML</abbr>/<abbr title="Extensible Markup Language">XML</abbr> parsing.
</p>

</div>
<!-- EDIT25 SECTION "Parsing Operations" [84582-86055] -->
<h3 class="sectionedit26" id="regular_expressions">Regular Expressions</h3>
<div class="level3">

<p>
<a href="http://en.wikipedia.org/wiki/Regular expression" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Regular expression">Regular expressions</a> are basically a special syntax for describing patterns that occur in text. You would be looking for these patterns and you may either wish to extract them out of the text, replace them with something else or manipulate those strings so they change their structure. Regular expressions we designed to match strings in “regular languages”, basically simple textual information. If you need to understand the context of a string to understand how to use it, that&#039;s when regular expressions become less powerful, but still doable. This is why developers would recommend you to use a <abbr title="HyperText Markup Language">HTML</abbr> parser to parse <abbr title="HyperText Markup Language">HTML</abbr>, because people often need to be able to understand where they are in the <abbr title="HyperText Markup Language">HTML</abbr> document via the nested tags, and that <abbr title="HyperText Markup Language">HTML</abbr> documents can be poorly formed, whereas regular languages cannot be poorly formed.
</p>

<p>
The invention of regular expressions come from complex formal language theory, but we don&#039;t have understand the theory to know how to use regular expressions.
</p>

<p>
Both <abbr title="Hypertext Preprocessor">PHP</abbr> and Javascript support regular expressions. In <abbr title="Hypertext Preprocessor">PHP</abbr> you&#039;ll most likely be using it with the <a href="http://www.php.net/manual/en/ref.pcre.php" class="urlextern" title="http://www.php.net/manual/en/ref.pcre.php"  rel="nofollow">PCRE family of functions</a> such as <code>preg_match()</code>. <a href="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions" class="urlextern" title="https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions"  rel="nofollow">Javascript has a regular expression object</a>. Note that <abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s regular expressions are different from javascript&#039;s regular expressions, they use different engines, howver there is overlap, but some syntax will be different.
</p>

<p>
The best way to learn regular expressions is to figure out what you want to match first, then learn the necessary syntax, and test it out.
</p>

<p>
These two resources explain how to use regular expressions:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.regular-expressions.info/tutorial.html" class="urlextern" title="http://www.regular-expressions.info/tutorial.html"  rel="nofollow">Regular-Expressions.info</a> - most likely the most comprehensive of regular expression tutorials, it&#039;s has depth but it&#039;s also easy to understand.</div>
</li>
<li class="level1"><div class="li"> <a href="http://webcheatsheet.com/php/regular_expressions.php" class="urlextern" title="http://webcheatsheet.com/php/regular_expressions.php"  rel="nofollow">A quick primer on regular expressions in PHP</a> - slightly more practical.</div>
</li>
</ul>

<p>
Eventually you&#039;ll want to test out these regular expressions. Instead of writing a <abbr title="Hypertext Preprocessor">PHP</abbr> script to be executed, you can use these online tools to figure out if your regular expression works as expected.
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://rubular.com/" class="urlextern" title="http://rubular.com/"  rel="nofollow">Rubular</a> - Regex tester for Ruby language, works very closely to <abbr title="Hypertext Preprocessor">PHP</abbr>.</div>
</li>
<li class="level1"><div class="li"> <a href="http://regexpal.com/" class="urlextern" title="http://regexpal.com/"  rel="nofollow">Regexpal</a> - Regex tester for Javascript language.</div>
</li>
</ul>

<p>
Here&#039;s a tool to construct regular expressions for you if you&#039;re lazy:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://txt2re.com/" class="urlextern" title="http://txt2re.com/"  rel="nofollow">Txt2Re</a> - Constructs regular expressions based on strings. Simply select the elements you want and it will construct an expression for you. You need to select the correct language and make to test it afterwards!</div>
</li>
</ul>

<p>
Somethings are actually quite complex to match. Emails is the most common culprit. You can use this for emails instead of rolling your own:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.regular-expressions.info/email.html" class="urlextern" title="http://www.regular-expressions.info/email.html"  rel="nofollow">Email Regex</a> - It also contains many other examples such as valid dates.</div>
</li>
</ul>

</div>
<!-- EDIT26 SECTION "Regular Expressions" [86056-89100] -->
<h3 class="sectionedit27" id="html_parsing">HTML Parsing</h3>
<div class="level3">

<p>
<abbr title="HyperText Markup Language">HTML</abbr> is a context-free language. <abbr title="HyperText Markup Language">HTML</abbr> can also be poorly formed. This means we need an <abbr title="HyperText Markup Language">HTML</abbr> parser that can not only powerfully detect nested tags, but also correct poorly formed <abbr title="HyperText Markup Language">HTML</abbr>.
</p>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> has native libraries for <abbr title="HyperText Markup Language">HTML</abbr>/<abbr title="Extensible Markup Language">XML</abbr> parsing. These are quite fast, but sometimes it doesn&#039;t have a fluent interface. You can use these two libraries which can provide a better interface:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/technosophos/querypath" class="urlextern" title="https://github.com/technosophos/querypath"  rel="nofollow">Querypath</a> - jQuery inspired <abbr title="HyperText Markup Language">HTML</abbr> parsing, the documentation is <a href="http://api.querypath.org/docs/" class="urlextern" title="http://api.querypath.org/docs/"  rel="nofollow">here</a>.</div>
</li>
<li class="level1"><div class="li"> <a href="http://code.google.com/p/html5lib/" class="urlextern" title="http://code.google.com/p/html5lib/"  rel="nofollow">HTML5lib</a> - <abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s current libxml extension hasn&#039;t caught up to HTML5&#039;s new structure and tags. It will parse it into a DOMDocument, which will need to be handled by the <a href="http://php.net/manual/en/class.domdocument.php" class="urlextern" title="http://php.net/manual/en/class.domdocument.php"  rel="nofollow">DOMDocument native object</a>, and <a href="http://php.net/manual/en/class.domxpath.php" class="urlextern" title="http://php.net/manual/en/class.domxpath.php"  rel="nofollow">DOMXPath object</a>.</div>
</li>
</ul>

<p>
Check this <a href="http://stackoverflow.com/a/3577662/582917" class="urlextern" title="http://stackoverflow.com/a/3577662/582917"  rel="nofollow">Stackoverflow post for all the available options regarding HTML parsing</a>.
</p>

<p>
If what you need is to filter <abbr title="HyperText Markup Language">HTML</abbr> input such as from user submitted data. This would be useful for forums or when you need to provide people to submit content, you can use the <a href="http://htmlpurifier.org/" class="urlextern" title="http://htmlpurifier.org/"  rel="nofollow">HTML Purifier library</a>. It can filter out XSS attacks and also correct poorly formed <abbr title="HyperText Markup Language">HTML</abbr>.
</p>

<p>
Remember the above information is when you already have the <abbr title="HyperText Markup Language">HTML</abbr> ready. If you need to access third party <abbr title="HyperText Markup Language">HTML</abbr> for web scraping, then you need to use cURL or an <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> client library.
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://guzzlephp.org/" class="urlextern" title="http://guzzlephp.org/"  rel="nofollow">Guzzle</a> - Restful <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> Client.</div>
</li>
<li class="level1"><div class="li"> <a href="http://phphttpclient.com/" class="urlextern" title="http://phphttpclient.com/"  rel="nofollow">HTTPful</a> - Simpler <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> client.</div>
</li>
<li class="level1"><div class="li"> <a href="https://github.com/fabpot/Goutte" class="urlextern" title="https://github.com/fabpot/Goutte"  rel="nofollow">Goutte</a> - Web scraper, it&#039;s actually a wrapper for a variety of Symfony libraries. So you need to read Symfony&#039;s documentation on those libraries to know how to use it.</div>
</li>
</ul>

<p>
This tutorial on <a href="http://www.martinhurford.com/screen-scraping-with-php-querypath.html" class="urlextern" title="http://www.martinhurford.com/screen-scraping-with-php-querypath.html"  rel="nofollow">Querypath scraping</a> can give you a general idea of how to do web scraping.
</p>

</div>
<!-- EDIT27 SECTION "HTML Parsing" [89101-91124] -->
<h2 class="sectionedit28" id="artificial_intelligence_machine_learning_and_statistics">Artificial Intelligence, Machine Learning and Statistics</h2>
<div class="level2">

<p>
Artificial Intelligence is really composed of data mining (involving statistics), then machine learning (involving statistics). It&#039;s about making a computer think like a person, the ability to discover new data and process data and learn things from the data without human intervention. These can then be used in computer vision, natural language processing, decision trees, games… etc.
</p>

<p>
The implementation of artificial intelligence is outside the scope of this course, but you can learn about them with these resources:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/gburtini/Learning-Library-for-PHP" class="urlextern" title="https://github.com/gburtini/Learning-Library-for-PHP"  rel="nofollow">Machine Learning Library with PHP</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://openclassroom.stanford.edu/MainFolder/CoursePage.php?course=MachineLearning" class="urlextern" title="http://openclassroom.stanford.edu/MainFolder/CoursePage.php?course=MachineLearning"  rel="nofollow">Open Course on Machine Learning from Stanford</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://en.wikipedia.org/wiki/List of machine learning algorithms" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/List of machine learning algorithms">List of Machine Learning Algorithms</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.developer.com/lang/php/training-a-neural-network-in-php.html" class="urlextern" title="http://www.developer.com/lang/php/training-a-neural-network-in-php.html"  rel="nofollow">Implementing Neural Networks in PHP</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.tremani.nl/open-source/neural-network/?p=intro" class="urlextern" title="http://www.tremani.nl/open-source/neural-network/?p=intro"  rel="nofollow">Neural Network Library in PHP</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://burakkanber.com/blog/machine-learning-in-other-languages-introduction/" class="urlextern" title="http://burakkanber.com/blog/machine-learning-in-other-languages-introduction/"  rel="nofollow">Machine Learning Tutorial in Javascript</a></div>
</li>
</ul>

</div>
<!-- EDIT28 SECTION "Artificial Intelligence, Machine Learning and Statistics" [91125-92373] -->
<h2 class="sectionedit29" id="other_patterns">Other Patterns</h2>
<div class="level2">

<p>
There are many other software design patterns, however Polycademy believes that you should write code that works and you&#039;ll start to see these patterns emerge.
</p>

<p>
However here&#039;s a number of good references for interesting patterns:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.fluffycat.com/PHP-Design-Patterns/" class="urlextern" title="http://www.fluffycat.com/PHP-Design-Patterns/"  rel="nofollow">PHP Design Patterns with Examples</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://roblevintennis.github.com/the-learn-d-developer-design-patterns/" class="urlextern" title="http://roblevintennis.github.com/the-learn-d-developer-design-patterns/"  rel="nofollow">Demonstration of Design Patterns with TDD and multiple languages</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://net.tutsplus.com/tutorials/php/the-whens-and-whys-for-php-design-patterns/" class="urlextern" title="http://net.tutsplus.com/tutorials/php/the-whens-and-whys-for-php-design-patterns/"  rel="nofollow">Overview of the reasons for various design patterns.</a></div>
</li>
</ul>

</div>
<!-- EDIT29 SECTION "Other Patterns" [92374-93009] -->
<h2 class="sectionedit30" id="algorithmic_complexity">Algorithmic Complexity</h2>
<div class="level2">

<p>
Algorithmic complexity refers to the management and analysis of how complex a particular algorithm is. You can use this knowledge to optimise the complexity of your algorithms or construct new algorithms. Here are some resources to get you started:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://discrete.gr/complexity/" class="urlextern" title="http://discrete.gr/complexity/"  rel="nofollow">Gentle Introduction to Algorithmic Complexity</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://en.wikipedia.org/wiki/Analysis of algorithms" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Analysis of algorithms">Analysis of Algorithms</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://en.wikipedia.org/wiki/List of algorithms" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/List of algorithms">List of Algorithms</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://en.wikipedia.org/wiki/Big O notation" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Big O notation">Big O notation</a></div>
</li>
</ul>
<div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/zeo6Wh7FR5Y?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/zeo6Wh7FR5Y?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div><div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/jziw2Wc7tVQ?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/jziw2Wc7tVQ?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div><div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/P00xJgWzz2c%26list%3DSP89B61F78B552C1AB?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/P00xJgWzz2c%26list%3DSP89B61F78B552C1AB?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div><div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/IcDS7EjXxpU%26list%3DPL52CFDE9DACB21419?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/IcDS7EjXxpU%26list%3DPL52CFDE9DACB21419?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div>
</div>
<!-- EDIT30 SECTION "Algorithmic Complexity" [93010-] -->