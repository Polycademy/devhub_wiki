
<h1 class="sectionedit1" id="php_-_server_side_architecture">PHP - Server Side Architecture</h1>
<div class="level1">

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> is a server side scripting language. It is a dynamic and interpreted language. <abbr title="Hypertext Preprocessor">PHP</abbr> is not compiled. It runs through an interpreter, which is usually a <abbr title="Hypertext Preprocessor">PHP</abbr> processor module that is integrated into a web server. For our purposes, that would be the Apache <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> server which includes <code>mod_php</code> as the processor module. <abbr title="Hypertext Preprocessor">PHP</abbr> can also be ran as <abbr title="Common Gateway Interface">CGI</abbr>, but that is not as common as the <code>mod_php</code> method. It started out being an embedded scripting language to <abbr title="HyperText Markup Language">HTML</abbr>, but grew into a full fledged programming language. It includes its own command line interface and can run as a stand alone server (but only used for development). It is single threaded and share nothing, meaning that it doesn&#039;t natively support concurrent processing and it doesn&#039;t share data between processes. <abbr title="Hypertext Preprocessor">PHP</abbr> is currently the most widely used web programming language powering Wikipedia, Facebook, Digg and more. 
</p>

<p>
While going through this article, try using <a href="http://phpbounce.aws.af.cm" class="urlextern" title="http://phpbounce.aws.af.cm"  rel="nofollow">PHPBounce</a> to quickly test out your code if you don&#039;t have a chance to run a web server.
</p>

</div>
<!-- EDIT1 SECTION "PHP - Server Side Architecture" [1-1095] -->
<h2 class="sectionedit2" id="object_oriented_programming_oop">Object Oriented Programming (OOP)</h2>
<div class="level2">

<p>
There four fundamental <a href="http://en.wikipedia.org/wiki/Programming paradigm" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Programming paradigm">programming paradigms</a>. They are object-oriented, imperative, functional and logic programming. <abbr title="Hypertext Preprocessor">PHP</abbr> can support multiple paradigms, namely procedural (imperative) and object oriented. It incorporates aspects of functional, but developers don&#039;t architect their <abbr title="Hypertext Preprocessor">PHP</abbr> applications in a functional way. The most common programming paradigm for <abbr title="Hypertext Preprocessor">PHP</abbr> is object oriented.
</p>

<p>
Object oriented simply means that we try to separate our programming into logical units of code. Each unit of code is an object. Each object can have multiple data properties that describe the object and multiple functions called methods. When we normally start programming, we naturally start in a procedural manner, specifying a list of tasks and subroutines before getting an end result. However in OOP, each object is an independent unit of code capable of receiving input, processing data and returning output. Each object can call on other objects, be dependent on external objects, or extended from parent objects. Each object has a distinct role. The decision of how granular we want when separating code into objects depends on the complexity of the unit of code. If you can find yourself doing multiple different <em>types</em> of tasks in one subroutine, then it&#039;s probably time to separate each <em>type</em> of functionality into different objects or different object methods. Objects should be created with one single responsibility, one way to check if an object is doing too many things is checking how many <code>if</code> or <code>switch</code> statements that are used to branch off logic. This is called the <a href="http://en.wikipedia.org/wiki/Single responsibility principle" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Single responsibility principle">Single Responsibility Principle</a>
</p>

<p>
In order to create objects, we actually first specify a class. Classes are blueprints for objects. Objects are actually <em>instances</em> of classes. So a single class can be used to create multiple objects. Note that the words objects and classes are used interchangeably. However when people say class it usually refers to the creation of the class, whereas when people refer to object, it usually refers to instantiated context of the class.
</p>

<p>
It&#039;s important to note that by convention we name our classes with capitalised first letters and the rest <a href="http://en.wikipedia.org/wiki/CamelCase" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/CamelCase">camel cased</a>. Except when we&#039;re naming interfaces or abstracts. Furthermore we put each class into its own single file, so there&#039;s never two classes in one file. The file name should also match the name of the class including the capitalisations. This file naming convention however is not applied when we&#039;re using models, views or controllers in Codeigniter. The reason for this is due to a mismatch of conventions between the PSR autoloading standards and Codeigniter.
</p>
<pre class="code php"><span class="co1">//a class of Elephant, classes are usually capitalised</span>
<span class="kw2">class</span> Elephant<span class="br0">&#123;</span><span class="br0">&#125;</span>
&nbsp;
<span class="co1">//$elephant is an object instance of the Elephant class</span>
<span class="re0">$elephant</span> <span class="sy0">=</span> <span class="kw2">new</span> Elephant<span class="sy0">;</span></pre>

<p>
OOP has four main concepts: encapsulation, abstraction, inheritance and polymorphism. 
</p>

</div>
<!-- EDIT2 SECTION "Object Oriented Programming (OOP)" [1096-4127] -->
<h3 class="sectionedit3" id="encapsulation">Encapsulation</h3>
<div class="level3">

<p>
OOP arose from the need to modularise and separate the functionality of software as software grew in complexity. The OOP approach encourages encapsulation which means we should place units of data inside objects which can only be accessed and manipulated through the object&#039;s methods. The methods act as intermediaries between different objects. You should never access data properties from the object directly.
</p>

<p>
The motivation for encapsulation is discipline and abstraction. By encapsulating the data properties and thus the state of the object, we&#039;re hiding the implementation details of the object, but instead providing an method <abbr title="Application Programming Interface">API</abbr> that external objects can access. This helps with the abstraction process by providing a consistent way of accessing objects. This discipline is also useful when software development takes place in teams.
</p>

<p>
Furthermore since the data properties are hidden, and only the names of methods are accessible, we can change the implementation details of the object without worrying of breaking the <abbr title="Application Programming Interface">API</abbr> for other objects.
</p>
<pre class="code php"><span class="kw2">class</span> Elephant<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//encapsulated private data property of $_colour. The private makes it only accessible within the object's instance using $this. This underscore is only a convention of prefixing private or protected variables.</span>
    <span class="kw2">private</span> <span class="re0">$_colour</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//public accessor method that sets the $_colour and echos it</span>
    <span class="kw2">public</span> <span class="kw2">function</span> set_colour<span class="br0">&#40;</span><span class="re0">$colour</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="re0">$this</span><span class="sy0">-&gt;</span>_colour <span class="sy0">=</span> <span class="re0">$colour</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="re0">$colour</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">//did you know that we can dynamically create object instance variables too? This only gets created when set_colour is called from the instance</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">hue</span> <span class="sy0">=</span> <span class="re0">$colour</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$red_elephant</span> <span class="sy0">=</span> <span class="kw2">new</span> Elephant<span class="sy0">;</span>
<span class="co1">//we can access the public method that acts as the intermediary to the private data property</span>
<span class="re0">$red_elephant</span><span class="sy0">-&gt;</span><span class="me1">set_colour</span><span class="br0">&#40;</span><span class="st_h">'red'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//second object instantiation</span>
<span class="re0">$green_elephant</span> <span class="sy0">=</span> <span class="kw2">new</span> Elephant<span class="sy0">;</span>
<span class="re0">$green_elephant</span><span class="sy0">-&gt;</span><span class="me1">set_colour</span><span class="br0">&#40;</span><span class="st_h">'green'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">echo</span> <span class="re0">$green_elephant</span><span class="sy0">-&gt;</span><span class="me1">hue</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT3 SECTION "Encapsulation" [4128-6151] -->
<h3 class="sectionedit4" id="abstraction">Abstraction</h3>
<div class="level3">

<p>
Encapsulation is actually technique of a more generic concept called abstraction. Objects should be abstracted. This means that the concrete implementation details should be hidden and abstracted away, so that only contextually important methods are available at a particular perspective. Here&#039;s a couple examples: the concept of a “List” is an abstraction of “Fruit List” or “Car List”. The concept of a “Living Thing” is an abstraction of “Animals” which is an abstraction of “Dog”. The concept of “People” is an abstraction of the person “Roger” and “Matthew”. When constructing an object, the available object properties should be relevant to the context of which it is used. All “People” may have heights and weights, but only “Roger” has a preference for “Action Movies” and only “Matthew” has a tattoo saying “I&#039;m Awesome”. So when I&#039;m defining the “People” object, it should not have properties of movie preferences or tattoos, those are not contextually relevant to how I would perceive or represent “People” as an abstract concept.
</p>

<p>
Abstraction is achieved by encapsulating concrete implementation details, but it can also be achieved by leaving concrete implementation details later to extend the abstract class as the parent class.
</p>

</div>
<!-- EDIT4 SECTION "Abstraction" [6152-7418] -->
<h3 class="sectionedit5" id="inheritance">Inheritance</h3>
<div class="level3">

<p>
Inheritance can be used to establish an abstract hierarchy of concepts and objects. At the same time because we&#039;re not rewriting the parent class&#039;s code, we enhance code reuse. Essentially child classes can inherit from parent classes, so that it inherits its parent&#039;s properties and methods.
</p>

<p>
Methods specified in the parent classes can be overwritten by child classes unless finalised with <code>final <em>scope</em> function <em>name</em>{}</code>. <abbr title="Hypertext Preprocessor">PHP</abbr> also does not support multiple inheritance, so a child can only inherit from one parent. However there are different strategies to overcome this. Classes can also chain inheritance.
</p>
<pre class="code php"><span class="kw2">class</span> Animal<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//private scoped variables will not be accessible in the child classes</span>
    <span class="kw2">private</span> <span class="re0">$_exists</span> <span class="sy0">=</span> <span class="kw4">true</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//protected scoped variables are accessible in the child class but not outside of the class</span>
    <span class="kw2">protected</span> <span class="re0">$_breathing_noise</span> <span class="sy0">=</span> <span class="st_h">'breathing'</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> breathe<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="re0">$this</span><span class="sy0">-&gt;</span>_breathing_noise<span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//Elephant is a child of the abstract parent Animal class</span>
<span class="kw2">class</span> Elephant <span class="kw2">extends</span> Animal<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">private</span> <span class="re0">$_colour</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> set_colour<span class="br0">&#40;</span><span class="re0">$colour</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//$this can access this class and the parent's class when the object is instantiated</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span>_colour <span class="sy0">=</span> <span class="re0">$colour</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="re0">$colour</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> set_breathing<span class="br0">&#40;</span><span class="re0">$noise</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span>_breathing_noise <span class="sy0">=</span> <span class="re0">$noise</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$elephant</span> <span class="sy0">=</span> <span class="kw2">new</span> Elephant<span class="sy0">;</span>
<span class="re0">$elephant</span><span class="sy0">-&gt;</span><span class="me1">set_colour</span><span class="br0">&#40;</span><span class="st_h">'red'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$elephant</span><span class="sy0">-&gt;</span><span class="me1">set_breathing</span><span class="br0">&#40;</span><span class="st_h">'HRRUMPH!'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$elephant</span><span class="sy0">-&gt;</span><span class="me1">breathe</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//look accessing the parent's method!</span></pre>

</div>
<!-- EDIT5 SECTION "Inheritance" [7419-9016] -->
<h3 class="sectionedit6" id="polymorphism">Polymorphism</h3>
<div class="level3">

<p>
Simply put polymorphism is simply that classes can have different functionality and yet share the same interface. Essentially you would be able to call a method that has a name, that is shared by classes which occupy the same abstraction level, but have different functionality. The point is so that you can write less code by not having to specify <code>if</code> statements to switch functionality based on some context. This also means when you&#039;re working in teams you can establish a standard for <abbr title="Application Programming Interface">API</abbr> methods for similar classes.
</p>

<p>
An example would be a button. Everybody knows how to interact with a button. You either press it or you don&#039;t. But what the button does, who knows? So all buttons should have the same interface, such as a method called <code>press</code>.
</p>

<p>
Polymorphism is supported by two extra constructs: Interfaces and Abstracts.
</p>

</div>

<h4 id="interfaces">Interfaces</h4>
<div class="level4">

<p>
Interfaces are contracts that objects implement. An object can implement multiple interfaces. An interface is simply an empty class with named methods, but no implementation details inside the methods. Any class that implements an interface will have to create concrete methods that match the empty methods in the interface, it they don&#039;t, it will cause a fatal error. By using interfaces you&#039;re guaranteeing that your implemented objects will have a set of public <abbr title="Application Programming Interface">API</abbr> methods.
</p>

<p>
Interfaces support polymorphism because different objects can implement the same interface. If we take the button example, there could be a button interface, which red button and green button implements.
</p>
<pre class="code php"><span class="co1">//We usually prefix our interfaces with i, and class names are usually camelcased</span>
<span class="kw2">interface</span> iButton<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> press<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> change_colour<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">class</span> RedButton implements iButton<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> press<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Alert! RED BUTTON PRESSED!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> change_colour<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Flash RED and ORANGE!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">class</span> GreenButton implements iButton<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> press<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Warning! GREEN BUTTON PRESSED!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> change_colour<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Flash GREEN and BROWN!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//now we can expect the same API methods, and hence polymorphic method! Same name, different functionality.</span>
<span class="re0">$red</span> <span class="sy0">=</span> <span class="kw2">new</span> RedButton<span class="sy0">;</span>
<span class="re0">$red</span><span class="sy0">-&gt;</span><span class="me1">press</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$green</span> <span class="sy0">=</span> <span class="kw2">new</span> GreenButton<span class="sy0">;</span>
<span class="re0">$green</span><span class="sy0">-&gt;</span><span class="me1">press</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Interfaces can also include constants which are accessible statically in their implementing objects. See the <a href="#using_libraries" title="web_application_development:php_-_server_side_architecture ↵" class="wikilink1">Using Libraries</a> section for more on static classes. Interfaces can also be extended, this allows interfaces to occupy multiple levels of abstraction. You can have a <code>interface iLivingThing</code> which is an abstraction of <code>interface iAnimal</code>.
</p>

<p>
Interfaces are most commonly used with type hints to enforce type checking when injecting dependencies. See <a href="/doku.php?id=web_application_development:php_-_design_patterns" class="wikilink1" title="web_application_development:php_-_design_patterns">PHP - Design Patterns</a> for more information on dependency injection.
</p>
<pre class="code php"><span class="kw2">interface</span> iAdd<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//interfaces can also demand parameters</span>
    <span class="kw2">public</span> <span class="kw2">function</span> add<span class="br0">&#40;</span><span class="re0">$one</span><span class="sy0">,</span> <span class="re0">$two</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">class</span> Calculator implements iAdd<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> add<span class="br0">&#40;</span><span class="re0">$one</span><span class="sy0">,</span> <span class="re0">$two</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$result</span> <span class="sy0">=</span> <span class="re0">$one</span> <span class="sy0">+</span> <span class="re0">$two</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="re0">$result</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
&nbsp;
<span class="kw2">class</span> Calculation<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//the iAdd type hint here forces the $calculator to be any object that implements the iAdd interface, because Calculation is expecting the add method which is guaranteed by the iAdd interface</span>
    <span class="co1">//__construct methods are called as soon as the class is instantiated, its parameters dictate parameters that are passed during object instantiation</span>
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>iAdd <span class="re0">$calculator</span><span class="sy0">,</span> <span class="re0">$one</span><span class="sy0">,</span> <span class="re0">$two</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$result</span> <span class="sy0">=</span> <span class="re0">$calculator</span><span class="sy0">-&gt;</span><span class="me1">add</span><span class="br0">&#40;</span><span class="re0">$one</span><span class="sy0">,</span> <span class="re0">$two</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">echo</span> <span class="re0">$result</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//if I passed in an object that didn't implement the iAdd interface, the typehint would cause a fatal error</span>
<span class="co1">//you may notice that this object instantiation has parentheses &quot;()&quot;, these are used when there is a __construct method, which is called as soon as the object is instantiated</span>
<span class="re0">$calculation</span> <span class="sy0">=</span> <span class="kw2">new</span> Calculation<span class="br0">&#40;</span><span class="kw2">new</span> Calculator<span class="sy0">,</span> <span class="nu0">5</span><span class="sy0">,</span> <span class="nu0">6</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The practice of using interfaces with type hinting and dependency injection is important, as it modularises the dependencies of classes. The Calculation class depends on an object that implements the iAdd interface. It doesn&#039;t care what the passed in object is, as long as it has the methods specified in the interface, because it&#039;s expecting to use those methods. Therefore, this also loosens the dependency coupling, allowing us to swap out the Calculator object with a different object with different implementation details as long as it preserves the polymorphic method names and expected output.
</p>

<p>
This practice is quite useful when you need to abstract the <abbr title="Application Programming Interface">API</abbr> (the way you use something) away from the concrete implementation (what the something is). One example would be if you&#039;re using a class that needs to store data into a database. That class should not care what kind of database it is, and how it stores its data as long as it has access to a set of predictable <abbr title="Application Programming Interface">API</abbr> methods. If you hard coded the database dependency and decided to change the database some time later, then you would have to change all the method calls, which is not good for maintenance. By using an interface, you avoid all of that by simply swapping out the database class and implementing the interface. Of course this only works if you abide by type hinting and dependency injection.
</p>

<p>
Note that objects can implement multiple interfaces, this just makes the instantiation of the object more strict, in that they have to implement all the methods specified in the interfaces.
</p>

</div>

<h4 id="abstracts">Abstracts</h4>
<div class="level4">

<p>
Abstracts are interfaces that allow concrete implementations of their methods, however classes extend abstracts instead of implementing them, this means only one abstract can be used for each object. You might then think why can&#039;t we just use a normal class and have children that extend it. Well you could, but in programming, it&#039;s good to be explicit. Think of abstracts as a strict possessive parent class that must have children, and then forces its children to do things their way. But at the same time, it provides shared methods to their children to use. Hence abstracts are never used by themselves.
</p>

<p>
Developers use abstracts to provide a boilerplate classes. Abstract methods which are the ones that children are forced to implement have to be either scoped at protected or public. Private wouldn&#039;t work.
</p>
<pre class="code php"><span class="co1">//abstracts are classes, that's why we still have a class operator, furthermore we prefix abstracts with a little a</span>
<span class="kw2">abstract</span> <span class="kw2">class</span> aArmor<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//shared variable</span>
    <span class="co1">//variables or properties cannot be abstracted, they are considered concrete implementation details</span>
    <span class="kw2">protected</span> <span class="re0">$_weight</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//shared method</span>
    <span class="kw2">public</span> <span class="kw2">function</span> set_weight<span class="br0">&#40;</span><span class="re0">$kg</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span>_weight <span class="sy0">=</span> <span class="re0">$kg</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//this is what will have to be implemented by the children</span>
    <span class="kw2">abstract</span> <span class="kw2">public</span> <span class="kw2">function</span> armor_rating<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">class</span> ChineseArmor <span class="kw2">extends</span> aArmor<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="re0">$weight</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">set_weight</span><span class="br0">&#40;</span><span class="re0">$weight</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
&nbsp;
    <span class="co1">//implemented functions have to be at the same or less restrictive scoping, public is the least restrictive!</span>
    <span class="kw2">public</span> <span class="kw2">function</span> armor_rating<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'Over 10,000!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> get_weight<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="re0">$this</span><span class="sy0">-&gt;</span>_weight<span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$armor</span> <span class="sy0">=</span> <span class="kw2">new</span> ChineseArmor<span class="br0">&#40;</span><span class="st_h">'100 Kg'</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$armor</span><span class="sy0">-&gt;</span><span class="me1">armor_rating</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$armor</span><span class="sy0">-&gt;</span><span class="me1">get_weight</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Abstracts can also be type hinted, in fact all objects can be type hinted, so you can use them in the same way as interfaces with dependency injection.
</p>

<p>
Abstracts can also be used with interfaces.
</p>
<pre class="code php"><span class="kw2">interface</span> iPhysicalObject<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//abstracts do not need to implement this, only the final concrete child class</span>
    <span class="kw2">public</span> <span class="kw2">function</span> weight<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="kw2">abstract</span> <span class="kw2">class</span> aArmor implements iPhysicalObject<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//shared function</span>
    <span class="kw2">public</span> <span class="kw2">function</span> armor_rating<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//abstracts can reference weight method even though it doesn't exist yet, because it has been guranteed by the interface</span>
        <span class="re0">$rating</span> <span class="sy0">=</span> <span class="nu0">10</span> <span class="sy0">*</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">weight</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="kw1">return</span> <span class="re0">$rating</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">abstract</span> <span class="kw2">public</span> <span class="kw2">function</span> blacksmith<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
&nbsp;
<span class="kw2">class</span> ChineseArmor <span class="kw2">extends</span> aArmor<span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//defined by interface</span>
    <span class="kw2">public</span> <span class="kw2">function</span> weight<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">return</span> <span class="nu0">100</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//defined by abstract</span>
    <span class="kw2">public</span> <span class="kw2">function</span> blacksmith<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">echo</span> <span class="st_h">'The Yellow Dragon!'</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> protection<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="re0">$protection</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">armor_rating</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="co1">//if the armor was created by the The Yellow Dragon! we add a bonus of 1000</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">blacksmith</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">==</span> <span class="st_h">'The Yellow Dragon!'</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
            <span class="re0">$protection</span> <span class="sy0">+</span> <span class="nu0">1000</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">return</span> <span class="re0">$protection</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
&nbsp;
<span class="kw2">class</span> Fight<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>aArmor <span class="re0">$armor</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="kw1">if</span><span class="br0">&#40;</span><span class="re0">$armor</span><span class="sy0">-&gt;</span><span class="me1">protection</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">&gt;</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
            <span class="kw1">echo</span> <span class="st_h">'You won!'</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="re0">$battle</span> <span class="sy0">=</span> <span class="kw2">new</span> Fight<span class="br0">&#40;</span><span class="kw2">new</span> ChineseArmor<span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT6 SECTION "Polymorphism" [9017-17900] -->
<h2 class="sectionedit7" id="model_view_controller_mvc">Model View Controller (MVC)</h2>
<div class="level2">

<p>
The model view controller pattern is an architecture pattern that separates software applications into three areas. The model is the business logic and application data. The view is the presentational user interface of the data. The controller is what binds the model&#039;s data to the view inputs, and it also routs user input requests to the appropriate interactions. The central ideas of the MVC pattern is <a href="http://en.wikipedia.org/wiki/Code reuse" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Code reuse">code re-usability</a>, <a href="http://en.wikipedia.org/wiki/Separation of concerns" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Separation of concerns">separation of concerns</a> and <a href="http://www.slideshare.net/damiansromek/thin-controllers-fat-models-proper-code-structure-for-mvc" class="urlextern" title="http://www.slideshare.net/damiansromek/thin-controllers-fat-models-proper-code-structure-for-mvc"  rel="nofollow">thin controllers - fat models</a>.
</p>

<p>
MVC architecture is usually placed behind a <a href="http://en.wikipedia.org/wiki/Front Controller pattern" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Front Controller pattern">front controller</a>. These front controllers essentially establish the workflow and middleware for every request and response. The front controller may include a router, or the router may be part of the middleware. The router routs requests to the appropriate controller which then calls upon its models and views to produce a response.
</p>

<p>
Codeigniter is an MVC framework. The code you write is separated into models, views and controllers. We also further separate our code into libraries, packages and helpers, but that&#039;s for later. Codeigniter also includes a front controller which is the index.php at your project root. Codeigniter automatically routs requests in the <abbr title="Uniform Resource Locator">URL</abbr> to the controller with a matching name, however this can be customised in the routes.php. The Apache <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> server actually sends all requests to the index.php, the index.php then calls upon the rest of the architecture and produces a response. No other files in Codeigniter is accessed directly. This gives an easy way to hook into the request and response flow and introduce middleware.
</p>

<p>
Note that there is a many to many relationship between models, controllers and views. One controller may call upon multiple models and multiple views. Models don&#039;t call controllers or views, and views don&#039;t call controllers or models. They simply return data to the controller that called them. Therefore models and views can have multiple controllers that interact with them.
</p>

<p>
Interfaces, abstracts and further inheritance can be applied to Codeigniter&#039;s models, views and controllers. However this practice is uncommon. I recommend you to use only these features in libraries or packages, and follow Codeigniter extension suggestions in their userguide if you need customised functionality in the architecture.
</p>

<p>
<a href="/lib/exe/detail.php?id=web_application_development%3Aphp_-_server_side_architecture&amp;media=web_application_development:appflowchart.gif" class="media" title="web_application_development:appflowchart.gif"><img src="/lib/exe/fetch.php?media=web_application_development:appflowchart.gif" class="mediacenter" alt="" /></a>
</p>

</div>
<!-- EDIT7 SECTION "Model View Controller (MVC)" [17901-20478] -->
<h3 class="sectionedit8" id="model">Model</h3>
<div class="level3">

<p>
Your models is where your business logic and application data resides. Your models should contain the bulk of your operations and processing. Models also contain accessors and mutators to your database if any. It&#039;s important to understand that models aren&#039;t just for storing state, but also the operations on the behaviour of your system. If you were writing a Chess game, not only would the storage of the chess board state be via the model, but also the rule checking algorithms and artificial intelligence. Once this business logic finds itself needed in other areas, that&#039;s when you abstract it into its own package or library. That way it can be called and executed in multiple models.
</p>

<p>
Models return processed data to the controller. Models don&#039;t need to know where it gets called, just that it does.
</p>

<p>
Models can also perform data validation, but data validation that involves simply input filtering for security purposes should be left to the controller, because that&#039;s metaphorically the gate to your software fortress. However if the data validation requires business logic to be performed, such as checks against the database, then the it should be placed in the model. However opinions may vary on this suggestion.
</p>

<p>
Example Codeigniter Model:
</p>
<pre class="code php"><span class="co1">//by convention we suffix the model with _model and all models extend the CI_Model from Codeigniter</span>
<span class="kw2">class</span> Blog_model <span class="kw2">extends</span> CI_Model <span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
        <span class="co1">//when the model gets loaded into the controller, it calls the parent __construct method. This __construct method is actually from CI_Model. This way when we instantiate this object, we also instantiate the parent.</span>
&nbsp;
        <span class="co1">//CI_Model's __construct() is not implicitly called because we method overrided it with this child class's __construct. Therefore in order to setup the parent's class, we need to call it with parent::__construct(). If this model did not have __construct, then the parent's __construct would be automatically called.</span>
        parent<span class="sy0">::</span>__construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">//here is where you load any dependencies as well, either through CI's loader or through autoloading</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> get_article<span class="br0">&#40;</span><span class="re0">$id</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//code to get an article out of the database using $id</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> add_article<span class="br0">&#40;</span><span class="re0">$data</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//code to add the article data to the database</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//more accessors and mutators here...</span>
&nbsp;
<span class="br0">&#125;</span></pre>

</div>

<h4 id="crud">CRUD</h4>
<div class="level4">

<p>
CRUD refers to <a href="http://en.wikipedia.org/wiki/Create, read, update and delete" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Create, read, update and delete">Create Read Update and Delete</a>. These are the four basic functions of any model when interacting with a database. You should read the <a href="#database" title="web_application_development:php_-_server_side_architecture ↵" class="wikilink1">Database Section</a> before proceeding. If you&#039;re using models to interface with a database, the convention is to name your model after the table name you&#039;re using. In each model class, there will be four public methods corresponding to CRUD.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=8" title="Download Snippet" class="mediafile mf_php">user_model.php</a></dt>
<dd><pre class="code file php"><span class="kw2">class</span> User_model <span class="kw2">extends</span> CI_Model<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//this will become available as $this-&gt;db..etc</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">load</span><span class="sy0">-&gt;</span><span class="me1">database</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//you can name these functions using other terms or even terms closer to HTTP if you prefer</span>
&nbsp;
    <span class="co1">//the parameters here would be passed in from the controller, they would be acquired from the input library</span>
    <span class="co1">//we could have as separate parameters, or a single array object</span>
    <span class="kw2">public</span> <span class="kw2">function</span> create<span class="br0">&#40;</span><span class="re0">$username</span><span class="sy0">,</span> <span class="re0">$password</span><span class="sy0">,</span> <span class="re0">$email</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="re0">$data</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
            <span class="st_h">'username'</span> <span class="sy0">=&gt;</span> <span class="re0">$username</span><span class="sy0">,</span> <span class="co1">//perhaps make it lowercase?</span>
            <span class="st_h">'password'</span> <span class="sy0">=&gt;</span> password_hash<span class="br0">&#40;</span><span class="re0">$password</span><span class="br0">&#41;</span><span class="sy0">,</span> <span class="co1">//password_hash is not a defined function anywhere yet, I'm setting here so you remember that passwords need to be hashed and salted before inputting it into the database. See the security section on passwords. THIS IS IMPORTANT!</span>
            <span class="st_h">'email'</span>    <span class="sy0">=&gt;</span> <span class="re0">$email</span><span class="sy0">,</span>
        <span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="re0">$query</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">insert</span><span class="br0">&#40;</span><span class="st_h">'user'</span><span class="sy0">,</span> <span class="re0">$data</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&nbsp;
        <span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span><span class="re0">$query</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
            <span class="co1">//some error occurred? We should log the database error</span>
            <span class="co1">//the below only works if $db['default']['db_debug'] = FALSE in the database configuration (so that it doesn't display straight to the user</span>
&nbsp;
            <span class="re0">$msg</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span>_error_message<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="re0">$num</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span>_error_number<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
            <span class="re0">$last_query</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">last_query</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
            log_message<span class="br0">&#40;</span><span class="st_h">'error'</span><span class="sy0">,</span> <span class="st_h">'Problem Inserting to user table: '</span> <span class="sy0">.</span> <span class="re0">$msg</span> <span class="sy0">.</span> <span class="st_h">' ('</span> <span class="sy0">.</span> <span class="re0">$num</span> <span class="sy0">.</span> <span class="st_h">'), using this query: &quot;'</span> <span class="sy0">.</span> <span class="re0">$last_query</span> <span class="sy0">.</span> <span class="st_h">'&quot;'</span><span class="br0">&#41;</span><span class="sy0">;</span> 
&nbsp;
            <span class="kw1">return</span> <span class="kw4">false</span><span class="sy0">;</span>
&nbsp;
        <span class="br0">&#125;</span>
&nbsp;
        <span class="co1">//it worked! return the last insert_id!</span>
        <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">insert_id</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> read<span class="br0">&#40;</span><span class="re0">$id</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> update<span class="br0">&#40;</span><span class="re0">$id</span><span class="sy0">,</span> <span class="re0">$data</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> delete<span class="br0">&#40;</span><span class="re0">$id</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//the above are not the only methods you would have, but are just the bare minimum, perhaps you need a method that gets all the listings, not just one entry...</span>
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
You may notice eventually that CRUD is simply one of the many configurations of these four operations at different abstraction levels
</p>
<div class="table sectionedit9"><table class="inline">
	<tr class="row0">
		<td class="col0 leftalign">         </td><th class="col1 leftalign"> <abbr title="Structured Query Language">SQL</abbr>             </th><th class="col2 leftalign"> <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> (RESTful)     </th>
	</tr>
	<tr class="row1">
		<th class="col0 leftalign"> Create  </th><td class="col1 leftalign"> INSERT          </td><td class="col2 leftalign"> POST               </td>
	</tr>
	<tr class="row2">
		<th class="col0 leftalign"> Read    </th><td class="col1 leftalign"> SELECT          </td><td class="col2 leftalign"> GET                </td>
	</tr>
	<tr class="row3">
		<th class="col0 leftalign"> Update  </th><td class="col1 leftalign"> UPDATE          </td><td class="col2 leftalign"> PUT                </td>
	</tr>
	<tr class="row4">
		<th class="col0 leftalign"> Delete  </th><td class="col1 leftalign"> DELETE          </td><td class="col2 leftalign"> DELETE             </td>
	</tr>
</table></div>
<!-- EDIT9 TABLE [25656-25910] -->
</div>
<!-- EDIT8 SECTION "Model" [20479-25910] -->
<h3 class="sectionedit10" id="view">View</h3>
<div class="level3">

<p>
Your view is where your user interface code lies. Remember that <abbr title="HyperText Markup Language">HTML</abbr> and <abbr title="Cascading Style Sheets">CSS</abbr> markup you did while in the Web Design section? Well that <abbr title="HyperText Markup Language">HTML</abbr> markup is going to be cutup into independent layouts in the view. The <abbr title="Cascading Style Sheets">CSS</abbr>, Javascript and other assets actually remain where they are. The view is also where we implement <a href="#templating" title="web_application_development:php_-_server_side_architecture ↵" class="wikilink1">templating</a>, which is the practice of modularising user interfaces into reusable components so they can be swapped in and out with other user interface elements. In order to pull in dynamic data, we actually place variables inside the views which will be injected from the controller after the controller has the data from the model.
</p>

<p>
By convention we suffix views files with _view. So any file names would like <code>home_view.php</code>.
</p>

<p>
Example Codeigniter View:
</p>
<pre class="code html4strict"><span class="sc2">&lt;?php defined<span class="br0">&#40;</span><span class="st0">'BASEPATH'</span><span class="br0">&#41;</span> OR exit<span class="br0">&#40;</span><span class="st0">'No direct script access allowed'</span><span class="br0">&#41;</span>; ?&gt;</span>
<span class="sc2">&lt;<a href="http://december.com/html/4/element/html.html"><span class="kw2">html</span></a>&gt;</span>
    <span class="sc2">&lt;<a href="http://december.com/html/4/element/head.html"><span class="kw2">head</span></a>&gt;</span>
        <span class="sc2">&lt;<a href="http://december.com/html/4/element/title.html"><span class="kw2">title</span></a>&gt;</span>Example Page!<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/title.html"><span class="kw2">title</span></a>&gt;</span>
    <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/head.html"><span class="kw2">head</span></a>&gt;</span>
    <span class="sc2">&lt;<a href="http://december.com/html/4/element/body.html"><span class="kw2">body</span></a>&gt;</span>
        <span class="sc2">&lt;<a href="http://december.com/html/4/element/p.html"><span class="kw2">p</span></a>&gt;</span>Hello!<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/p.html"><span class="kw2">p</span></a>&gt;</span>
    <span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/body.html"><span class="kw2">body</span></a>&gt;</span>
<span class="sc2">&lt;<span class="sy0">/</span><a href="http://december.com/html/4/element/html.html"><span class="kw2">html</span></a>&gt;</span></pre>

</div>
<!-- EDIT10 SECTION "View" [25911-26924] -->
<h3 class="sectionedit11" id="controller">Controller</h3>
<div class="level3">

<p>
The controller is the manager of the model and view. In Codeigniter the name of the controller corresponds to the first <abbr title="Uniform Resource Locator">URL</abbr> segment. The second <abbr title="Uniform Resource Locator">URL</abbr> segment is executed as a corresponding method. Any further <abbr title="Uniform Resource Locator">URL</abbr> segments are passed the methods as parameters. Controllers are meant to be thin and simply call upon models and pass in parameters, afterwards it binds the returned data to the view and at the same time responds back to the client with the finished data. The only business logic that controllers should have is any input filtering, <abbr title="Hyper Text Transfer Protocol">HTTP</abbr> routing tasks, and view binding.
</p>

<p>
Example Codeigniter Controller:
</p>
<pre class="code php"><span class="co1">//This Home class corresponds to home.php as a filename, home then becomes the first URL segment as http://example.com/index.php/home or http://example.com/home (if using URL rewriting via Apache .htaccess)</span>
<span class="kw2">class</span> Home <span class="kw2">extends</span> CI_Controller <span class="br0">&#123;</span>
&nbsp;
    <span class="co1">//you can build up your view binding by creating a privately scoped member array, when you're ready to build up the view, just append values onto this array and pass this to the view. By creating this independent from any methods, the view data is then abstracted and can be added to from multiple methods</span>
    <span class="kw2">private</span> <span class="re0">$_view_data</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">//since it is a class that extends the CI_Controller, we still have a __construct that is called as soon as it is initiated</span>
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        parent<span class="sy0">::</span>__construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
        <span class="co1">//load commonly used dependencies using CI, you would not dependency inject using controllers, because you don't control the calling of controllers</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//this is the actual method that would be called if there was no second URL segment, it can also be explicitly called by http://example.com/home/index</span>
    <span class="co1">//to be callable by URL, they would have to be scoped at public</span>
    <span class="kw2">public</span> <span class="kw2">function</span> index<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//load models and do processing</span>
        <span class="co1">//load views and return the response</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">load</span><span class="sy0">-&gt;</span><span class="me1">view</span><span class="br0">&#40;</span><span class="st_h">'home_view'</span><span class="sy0">,</span> <span class="re0">$this</span><span class="sy0">-&gt;</span>_view_data<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="co1">//you can access this via http://example.com/about/2, the 2 becomes the id</span>
    <span class="kw2">public</span> <span class="kw2">function</span> about<span class="br0">&#40;</span><span class="re0">$id</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
When processing form inputs, instead of <a href="http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html"  rel="nofollow">placing all the validation rules in your controller&#039;s methods</a>, keep them in a separate configuration file. Refer to this tutorial on <a href="http://chris-schmitz.com/cleaning-up-your-codeigniter-controllers/" class="urlextern" title="http://chris-schmitz.com/cleaning-up-your-codeigniter-controllers/"  rel="nofollow">Cleaning up your Codeigniter Controllers</a> to see how to do this:
</p>

<p>
There&#039;ll be many developers who argue that your form inputs should be validated in your model. However Codeigniter&#039;s form validation library doesn&#039;t work from the model, so we have to place in our controller. But by following the technique of placing form rules in an external config file, this makes form validation much easier and thinner in our controllers.
</p>

</div>
<!-- EDIT11 SECTION "Controller" [26925-29841] -->
<h2 class="sectionedit12" id="templating">Templating</h2>
<div class="level2">

<p>
Templating is the process of using layouts and partials to form complete view user interfaces. In following the separation of concerns, templates should contain as little business logic as possible. It&#039;s only there to bring together user interface elements and have dynamic data inserted into them. The problem comes when we want to have reusable partial templates and shared layout templates.
</p>

<p>
Think of layouts as a template file that specifies the header, footer, sidebar and any other elements that are shared across web pages and hardly change. A large web application may have multiple layouts, one for the blog, one for the administration panel, one for the home page. Each of which may have different headers or lack/include a sidebar. Layouts are the master templates, the templates that specifies other templates.
</p>

<p>
Think of partials as reusable templates across many different areas. An example would be a table row that may get used in different tables in different pages in different layouts. Partials are the grand children templates, templates that don&#039;t specify any other template and doesn&#039;t know which parent will pick it up to use it.
</p>

<p>
There are a number of templating libraries for <abbr title="Hypertext Preprocessor">PHP</abbr>, some of them catered towards Codeigniter, and others are for generic use. Many of them provide their own domain specific language. You can choose to go with third party solutions, however I like to roll my own simpler solution. <abbr title="Hypertext Preprocessor">PHP</abbr> after all was a templating language.
</p>

<p>
So I present to you the static helper class CiTemplating:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://github.com/Polycademy/CiTemplating" class="urlextern" title="https://github.com/Polycademy/CiTemplating"  rel="nofollow">CiTemplating</a></div>
</li>
</ul>

<p>
You can install it via composer (follow the instructions on the README) and it will be autoloaded, allowing you to call it like a global function without the need of instantiating it or using namespaces. Namespaces couldn&#039;t be used, due to the nature of templating, it would require an <code>use</code> namespace import, which would go against the concept of minimal logic views. Please see the section on <a href="#autoloading" title="web_application_development:php_-_server_side_architecture ↵" class="wikilink1">Autoloading</a> to find how to integrate autoloading magic into Codeigniter.
</p>

<p>
To use this library we need to establish some conventions:
</p>
<ul>
<li class="level1"><div class="li"> Each controller you have should have a corresponding folder with a matching name in the view folder. Therefore a controller named <code>blog.php</code> should have the folder <code>views/blog</code>.</div>
</li>
<li class="level1"><div class="li"> Each public method in a controller should have their own view with a matching name stored in their view controller folder. Therefore the controller <code>blog.php</code> with <code>articles</code> as a public method should have the view <code>views/blog/articles_view.php</code>.</div>
</li>
<li class="level1"><div class="li"> Partials are appended with <code>_partial</code>, and are stored in the partials folder such as <code>views/partials/rows_partial.php</code>.</div>
</li>
<li class="level1"><div class="li"> Layouts are appended with <code>_layouts</code>, and are stored in the layouts folder such as <code>views/layouts/main_layout.php</code>.</div>
</li>
</ul>

<p>
Your views directory can start to look like this:
</p>
<pre class="code">views
  |
  |----layouts
  |       |
  |       |----main_layout.php
  |       |----admin_layout.php
  |       |----json_layout.php
  |
  |----partials
  |       |
  |       |----rows_partial.php
  |
  |----home
  |       |
  |       |----index_view.php
  |
  |----blog
          |
          |----articles_view.php</pre>

</div>
<!-- EDIT12 SECTION "Templating" [29842-33111] -->
<h3 class="sectionedit13" id="layouts">Layouts</h3>
<div class="level3">

<p>
The CiTemplate static class provide a static <code>compose</code> method allowing you to define both views and their corresponding layouts. All layouts should inject a <code>$yield</code> variable. When you run <code>Template::compose()</code>, it will first sent any view data to the specified view, and return the compiled template, before dynamically adding it to the view data array and injecting it into the layout. For example, you should have a <code>default_layout.php</code> that is like this
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=11" title="Download Snippet" class="mediafile mf_php">default_layout.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span> <a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">&#40;</span><span class="st_h">'BASEPATH'</span><span class="br0">&#41;</span> OR <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No direct script access allowed'</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="sy1">?&gt;</span>
<span class="sy1">&lt;?</span> Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'header'</span><span class="sy0">,</span> <span class="re0">$header</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>
<span class="sy1">&lt;?=</span> <span class="re0">$yield</span> <span class="sy1">?&gt;</span>
<span class="sy1">&lt;?</span> Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'footer'</span><span class="sy0">,</span> <span class="re0">$footer</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span></pre>
</dd></dl>

<p>
The corresponding call to this layout would be something like, if it was called inside the <code>index()</code> method of a controller..
</p>
<pre class="code php"><span class="re0">$view_data</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st_h">'header'</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="st_h">'footer'</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">,</span>
    <span class="st_h">'data'</span> <span class="sy0">=&gt;</span> <span class="st_h">'data_value'</span><span class="sy0">,</span>
    <span class="co1">//... etc</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
Template<span class="sy0">::</span><span class="me2">compose</span><span class="br0">&#40;</span><span class="st_h">'index'</span><span class="sy0">,</span> <span class="re0">$view_data</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The <code>$view_data[&#039;header&#039;]</code> and <code>$view_data[&#039;footer&#039;]</code> would be be injected into the partial parameters of <code>$header</code> and <code>$footer</code> in the layout. The rest of the properties in the view data array would be passed into the <code>index_view.php</code>, and the returned output would automatically be injected into the $yield. This obviously means you should not use have a property key of <code>$view_data[&#039;yield&#039;]</code> when defining your view data array, as it would get overwritten.
</p>

<p>
The compose method also has a third parameter that specifies the layout file to use. By default it is <code>default</code>. The compose method allows you to use full names such as <code>Template::compose(&#039;index_view&#039;, $view_data, &#039;default_layout&#039;);</code>, but it isn&#039;t necessary as it will automatically append <code>_view</code> or <code>_layout</code> to the end of the parameter if it doesn&#039;t have it. The same goes with partials.
</p>

<p>
A cool thing you can do with this method is to specify a JSON layout like so:
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=13" title="Download Snippet" class="mediafile mf_php">json_layout.php</a></dt>
<dd><pre class="code file php"><span class="kw2">&lt;?php</span> <a href="http://www.php.net/defined"><span class="kw3">defined</span></a><span class="br0">&#40;</span><span class="st_h">'BASEPATH'</span><span class="br0">&#41;</span> OR <a href="http://www.php.net/exit"><span class="kw3">exit</span></a><span class="br0">&#40;</span><span class="st_h">'No direct script access allowed'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<a href="http://www.php.net/header"><span class="kw3">header</span></a><span class="br0">&#40;</span><span class="st_h">'Content-type: application/json'</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">echo</span> <a href="http://www.php.net/json_encode"><span class="kw3">json_encode</span></a><span class="br0">&#40;</span><span class="re0">$yield</span><span class="sy0">,</span> JSON_NUMERIC_CHECK <span class="sy0">|</span> JSON_FORCE_OBJECT<span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>

<p>
You would call this via:
</p>
<pre class="code php"><span class="co1">//we pass false into the view, because don't need one to pass in straight json_data, json_data has to be an array too!</span>
Template<span class="sy0">::</span><span class="me2">compose</span><span class="br0">&#40;</span><span class="kw4">false</span><span class="sy0">,</span> <span class="re0">$json_data</span><span class="sy0">,</span> <span class="st_h">'json'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
To understand how the compose method works, look into the source code of <code>Template.php</code>. It&#039;s well documented.
</p>

</div>
<!-- EDIT13 SECTION "Layouts" [33112-35606] -->
<h3 class="sectionedit14" id="partials">Partials</h3>
<div class="level3">

<p>
Partials allow you define and call in reusable templates within templates. They also allow you to loop through results and repeat a compiled template with minimal logic. Partials are stored in the partials folder. Although it is possible to modify the code to allow partials anywhere in the view directory, I found it more appropriate and simpler to specify that all of them must be in one directory. Do note that it is possible to specify subdirectories in the partials folder though.
</p>

<p>
Partials are called within template views like so:
</p>
<pre class="code php"><span class="co1">//first parameter is the name of the partial with or without '_partial' appended to it, second parameter is the variable to pass in</span>
Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'header'</span><span class="sy0">,</span> <span class="re0">$header</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
To loop through results you would need to pass <code>true</code> to the third parameter in your view file.
</p>
<pre class="code php">Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'row'</span><span class="sy0">,</span> <span class="re0">$row_data</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
This would call in a partial and attempt the iterate through <em>values</em> of the <code>$row_data</code>. The values are by default specified in the partial as <code>$row</code> variables. It is important to understand this. When you call <code>Template::compose()</code> to a view that has a looped partial, the view data array you pass in should have a property of which its key name matches the injected parameter of <code>Template::partial</code>. This property needs to also be an array, and its values are what is iterated over and stored in a <code>$row</code> variable. The partial can simply call <code>$row</code> if it&#039;s a scalar value, but if you need multiple properties in the <code>$row</code> variable, then the values that are iterated should also be an array.
</p>

<p>
Imagine you had a controller code like this:
</p>
<pre class="code php"><span class="re0">$view_data</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st_h">'row_data'</span> <span class="sy0">=&gt;</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
        <span class="st_h">'First Row'</span><span class="sy0">,</span>
        <span class="st_h">'Second Row'</span><span class="sy0">,</span>
        <span class="st_h">'Third Row'</span><span class="sy0">,</span>
    <span class="br0">&#41;</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
Template<span class="sy0">::</span><span class="me2">compose</span><span class="br0">&#40;</span><span class="st_h">'table'</span><span class="sy0">,</span> <span class="re0">$view_data</span><span class="br0">&#41;</span><span class="sy0">;</span>    </pre>

<p>
Then the view could be:
</p>
<pre class="code php">&lt;table&gt;
    &lt;tbody&gt;
        <span class="sy1">&lt;?</span> Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'row'</span><span class="sy0">,</span> <span class="re0">$row_data</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">&#41;</span> <span class="sy1">?&gt;</span>
    &lt;/tbody&gt;
&lt;/table&gt;</pre>

<p>
Then the partial would be:
</p>
<pre class="code php">&lt;tr&gt;
    &lt;td&gt;<span class="sy1">&lt;?=</span> <span class="re0">$row</span> <span class="sy1">?&gt;</span>&lt;/td&gt;
&lt;/tr&gt;</pre>

<p>
Each of the <code>$row</code> would contain the scalar string of “First Row”, then “Second Row”, and finally “Third Row”.
</p>

<p>
If I wanted the <code>$row</code> to have multiple parameters, then I would change <code>$row_data</code> to be an array of arrays.
</p>
<pre class="code php">$view_data = array(
    'row_data' =&gt; array(
        array(
            'name' =&gt; 'Roger',
            'id' =&gt; '4'
        ),
        array(
            'name' =&gt; 'Dave',
            'id' =&gt; '5'
        ),
    ),
);
&nbsp;
Template::compose('table', $view_data);
&nbsp;
//and this would be in the partial
&nbsp;
&lt;tr&gt;
    &lt;td&gt;<span class="sy1">&lt;?=</span> <span class="re0">$row</span><span class="br0">&#91;</span><span class="st_h">'name'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>&lt;/td&gt;
    &lt;td&gt;<span class="sy1">&lt;?=</span> <span class="re0">$row</span><span class="br0">&#91;</span><span class="st_h">'id'</span><span class="br0">&#93;</span> <span class="sy1">?&gt;</span>&lt;/td&gt;
&lt;/tr&gt;</pre>

<p>
As you can see array keys don&#039;t matter here.
</p>

<p>
By default they automatically echo their data as soon as they are called. However you can also specify that they return data as a variable by setting the fourth buffer parameter to true.
</p>
<pre class="code php"><span class="re0">$partial_compiled</span> <span class="sy0">=</span> Template<span class="sy0">::</span><span class="me2">partial</span><span class="br0">&#40;</span><span class="st_h">'row'</span><span class="sy0">,</span> <span class="re0">$data</span><span class="sy0">,</span> <span class="kw4">false</span><span class="sy0">,</span> <span class="kw4">true</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT14 SECTION "Partials" [35607-38624] -->
<h2 class="sectionedit15" id="using_libraries">Using Libraries</h2>
<div class="level2">

<p>
One the key concepts of OOP is reusing code. Libraries are the primary way of reusing and sharing code. Whereas code in the MVC refers to a specific implementation of a particular web application. Libraries are created independently of what the web application does. Libraries can be a list of procedural functions, however these are usually called helper functions, and since we&#039;re using OOP, we should avoid using function lists which are hard to test, maintain, extend and impossible to autoload. Therefore our libraries will either be normal classes, abstract classes, interfaces or static classes.
</p>

<p>
There are different ways of structuring library classes, most of the ways are dependent on how best to autoload or not autoload the classes, and the usage or non-usage of namespacing. The PSR-0 (composer) standard was all about standardising sharable code libraries that could be autoloaded. However there are a number of other ways including Codeigniter&#039;s native library loading functionality, Codeigniter Sparks package management and of course rolling our own autoloading. This section will go through each and also discuss static classes.
</p>

</div>
<!-- EDIT15 SECTION "Using Libraries" [38625-39800] -->
<h3 class="sectionedit16" id="codeigniter_libraries">Codeigniter Libraries</h3>
<div class="level3">

<p>
Codeigniter allows you to create your own libraries and store them in the <code>application/libraries</code> folder. Follow the user guide on <a href="http://ellislab.com/codeigniter/user-guide/general/libraries.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/libraries.html"  rel="nofollow">loading libraries</a> and <a href="http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html"  rel="nofollow">creating libraries</a> for more information. For the purposes of autoloading convention, any library we create should be capitalised and camelcased. In the cases of interfaces and abstracts they should be prefixed with an <code>i</code> or <code>a</code> respectively. When you load a Codeigniter library using the Codeigniter loader, it will automatically instantiate the class into an object. So static classes will have to be loaded differently.
</p>

<p>
Codeigniter also provides a number of system libraries available for you to use. They provide a number of default functionality that we can take advantage of in order to avoid reinventing the wheel. Check out <a href="http://ellislab.com/codeigniter/user-guide/toc.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/toc.html"  rel="nofollow">Codeigniter&#039;s class and helper reference</a> for more information. Many of the functionality you need to run a generic web application is already available.
</p>

<p>
You can also replace and extend system libraries. You will need to either put them into the <code>application/core</code> or <code>application/libraries</code> folder. A good way to know, is to go into the <code>system/core</code> directory and see if the class you&#039;re trying to extend is there, and if it is, then it should be in the <code>application/core</code>. This is how people get customised controllers or loaders.
</p>

<p>
If you&#039;re replacing a native library. You would use the same name of the class you&#039;re trying to replace. But inside the class, you would call it CI_CLASSNAME. For example to replace the Email class. You would name it <code>Email.php</code> and have it run as <code>class CI_Email{}</code>.
</p>

<p>
If you&#039;re extending a native library just declare your class as MY_CLASSNAME extending CI_CLASSNAME. Furthermore if you&#039;re using a constructor, make sure to call the parent constructor with <code>parent::constructor();</code>.
</p>

<p>
Note that if you&#039;re trying use Codeigniter&#039;s native libraries or database class inside your own custom library, you need to call the function <code>get_instance()</code>. This is a global function defined by Codeigniter. When you load in your library, that function points to creating an instance to Codeigniter&#039;s super object. It&#039;s actually a good demonstration of the <a href="http://en.wikipedia.org/wiki/Singleton_pattern" class="urlextern" title="http://en.wikipedia.org/wiki/Singleton_pattern"  rel="nofollow">singleton pattern</a>. Every time you call <code>get_instance</code> you don&#039;t actually initialise a whole new superobject. The function checks if the object has already been initialised, and if it has been, it will simply return that object. In the <a href="http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/creating_libraries.html"  rel="nofollow">documentation</a>, it recommends that you assign it to a object member property in your constructor, and then use the variable as if you were calling <code>$this</code> in your controllers and models.
</p>
<pre class="code php"><span class="re0">$CI</span> <span class="sy0">=</span> get_instance<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="re0">$CI</span><span class="sy0">-&gt;</span><span class="me1">do_something_native</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="co1">//like $CI-&gt;load-&gt;other_libary</span></pre>

<p>
However this actually isn&#039;t necessary. <a href="http://stackoverflow.com/questions/7195544/get-instance-in-codeigniter-why-assign-it-to-a-variable" class="urlextern" title="http://stackoverflow.com/questions/7195544/get-instance-in-codeigniter-why-assign-it-to-a-variable"  rel="nofollow">There are reasons for this</a>.
</p>

</div>

<h4 id="sparks">Sparks</h4>
<div class="level4">

<p>
Before the days of Composer and PSR-0, Codeigniter had its own package and repository manager called Sparks. It is still in use today by legacy Codeigniter libraries and Codeigniter specific packages. So this will still be useful. However it hasn&#039;t been kept up to date with the latest develop branch version of Codeigniter, so in order to install we have to make a couple changes. See the <a href="/doku.php?id=web_application_development:solution_stack#sparks" class="wikilink1" title="web_application_development:solution_stack">solution stack on sparks</a> for more information.
</p>

<p>
You would have spark packages located at project root, and with the augmented <code>MY_Loader.php</code> you can load them via <code>$this→load→spark(&#039;example-spark/1.0.0&#039;);</code>, it is then usable as <code>$this→example_spark→method();</code>. Notice that we can&#039;t use hyphens <code>-</code>, when calling methods from classes as it confuses the interpreter as a syntax error. Packages either have to be underscored or camelcased.
</p>

</div>
<!-- EDIT16 SECTION "Codeigniter Libraries" [39801-43936] -->
<h3 class="sectionedit17" id="composer_libraries">Composer Libraries</h3>
<div class="level3">

<p>
Composer is one of the best things to come to <abbr title="Hypertext Preprocessor">PHP</abbr> since sliced bread. There has been numerous attempts at package management for <abbr title="Hypertext Preprocessor">PHP</abbr> in the past, but Composer is the best and most widespread in the modern day. Composer is not only an installer tool, but it is also a <a href="http://phpmaster.com/autoloading-and-the-psr-0-standard/" class="urlextern" title="http://phpmaster.com/autoloading-and-the-psr-0-standard/"  rel="nofollow">PSR-0 compliant autoloader</a>. What this means it will autoload classes and conform to namespace usage. This allows you to simply call <code>new Class</code> or typehint interfaces or <code>use</code> importing without having to actually <code>include</code> or <code>require</code> the files that the classes reside in. This magic is performed by modern versions of <abbr title="Hypertext Preprocessor">PHP</abbr> providing autoload functions that hook into the loading architecture so we can augment it to automatically load what we want given a specified directory, naming style and namespace usage. Composer also allows non-PSR autoloading, so if you have some utility classes that you just want autoloaded, Composer can do that as well.
</p>

<p>
Try checking out the composer directory, look at how the packages are structured, and the common uses of namespaces in their source code.
</p>

<p>
However there&#039;s a problem. Codeigniter is a framework that caters to older versions of <abbr title="Hypertext Preprocessor">PHP</abbr> users. So it&#039;s not natively integrated into Composer. However there are easy ways of integrating Composer into Codeigniter. Autoloading can be considered a form of bootstrapping. Essentially the autoloader should be available from the very start of initialising a web application. Where is the very start of our MVC architecture? It&#039;s in the front controller! So the simplest way of integration would be to simply <code>require_once</code> the Composer&#039;s <code>vendor/autoload.php</code> in Codeigniter&#039;s front controller which is the <code>index.php</code> at root. It would be <a href="http://pastebin.com/6ffYwdkf" class="urlextern" title="http://pastebin.com/6ffYwdkf"  rel="nofollow">somewhere at the end but before Codeigniter loads all the controllers</a>, or else we&#039;d try to load classes before the autoloader is registered.
</p>

<p>
However there is a better way, and in fact this “Polycademy” way actually gives us autoloading on your Codeigniter&#039;s <code>application/libraries</code> and <code>application/third_party</code> for free, and is more semantic with Codeigniter&#039;s architecture.
</p>

</div>
<!-- EDIT17 SECTION "Composer Libraries" [43937-46150] -->
<h3 class="sectionedit18" id="autoloading">Autoloading</h3>
<div class="level3">

<p>
Codeigniter provides a <a href="http://ellislab.com/codeigniter/user-guide/general/hooks.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/hooks.html"  rel="nofollow">hook API</a> so we can plug in our own middleware. The one we&#039;re interested in is the most earliest, that is the pre-system hook. This is where we&#039;re going to place our Composer bootstrap and our own PSR-0 compliant autoloader.
</p>
<ol>
<li class="level1"><div class="li"> Enable hooks in <code>config/config.php</code>.</div>
</li>
<li class="level1"><div class="li"> In your <code>config/hooks.php</code> define: <dl class="code">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=23" title="Download Snippet" class="mediafile mf_php">hooks.php</a></dt>
<dd><pre class="code php"><span class="co1">//pre_system autoloader</span>
<span class="re0">$hook</span><span class="br0">&#91;</span><span class="st_h">'pre_system'</span><span class="br0">&#93;</span> <span class="sy0">=</span> <a href="http://www.php.net/array"><span class="kw3">array</span></a><span class="br0">&#40;</span>
    <span class="st_h">'class'</span> <span class="sy0">=&gt;</span> <span class="st_h">'Autoloader'</span><span class="sy0">,</span>
    <span class="st_h">'function'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'__construct'</span><span class="sy0">,</span>
    <span class="st_h">'filename'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'Autoloader.php'</span><span class="sy0">,</span>
    <span class="st_h">'filepath'</span>  <span class="sy0">=&gt;</span> <span class="st_h">'hooks'</span><span class="sy0">,</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre>
</dd></dl>
</div>
</li>
<li class="level1"><div class="li"> Then download this <a href="https://github.com/Polycademy/CiAutoloading" class="urlextern" title="https://github.com/Polycademy/CiAutoloading"  rel="nofollow">Autoloader.php</a> into <code>application/hooks/Autoloader.php</code>. (You should also try to read and understand the code, refer to documentation for commands you don&#039;t know).</div>
</li>
</ol>

<p>
Now you can auto instantiate objects and call static methods from static classes anywhere, and that means both packages in Composer and packages/libraries in your <code>application/libraries</code> or <code>application/third_party</code>. However when constructing your library classes, do not use underscores in your filenames (excepting folder names) as they will be translated into directories. You need to follow the <a href="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md" class="urlextern" title="https://github.com/php-fig/fig-standards/blob/master/accepted/PSR-0.md"  rel="nofollow">PSR-0 rules</a> now. Capitalised and camelcased!
</p>

<p>
However if you classes that extend CI&#039;s native classes, you will not be able to autoload them. This is because the system classes that your classes are extending/replacing are not autoloaded as they are in the system directory. You&#039;ll need to use the native loader to load them. This does not conflict with the native loader.
</p>

<p>
At this point you have a flexible system utilising Composer, Sparks, Native CI and your own PSR-0 or class map loader.
</p>

<p>
In order to autoload classes in directories, you&#039;ll have to use namespaces.
</p>

</div>
<!-- EDIT18 SECTION "Autoloading" [46151-48068] -->
<h3 class="sectionedit19" id="namespaces">Namespaces</h3>
<div class="level3">

<p>
Namespaces are a way to encapsulate objects in order to avoid naming conflicts and shorten long path names to aliases. In your operating system you may have two files with the same name and extension. However they can never live in the same directory, because that would cause a naming conflict, and if you&#039;re trying to call that file, the operating system wouldn&#039;t know which one you&#039;re trying call.
</p>

<p>
Namespaces in programming operate similarly. Imagine you&#039;re working in a team, and one of you defines an object called <code>class MyDB</code>, and your teammate who didn&#039;t know better also defined an object called <code>class MyDB</code>. Then if you include the files together into one script, this would cause a naming conflict. Previously we would just name one of the classes with a prefix such as <code>class SteveMyDB</code>. However this is ugly and inefficient. Instead we use namespaces to avoid changing our class names. In <abbr title="Hypertext Preprocessor">PHP</abbr> only classes, interfaces, functions and constants are affected by namespaces. It is recommended best practice to only have one namespace per file.
</p>

<p>
There are two syntax commands in creating and importing namespaces. They should always be used at the top of the code in the file. You cannot use them in blocks or conditionals.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=24" title="Download Snippet" class="mediafile mf_php">SomeClass.php</a></dt>
<dd><pre class="code file php"><span class="co1">//use 'namespace' to define the namespace for the current code</span>
<span class="kw2">namespace</span> Polycademy\MissonChecker<span class="sy0">;</span>
&nbsp;
<span class="co1">//use 'use' to import other namespaces into the code or as an alias</span>
<span class="co1">//the use command cannot import functions or constants, which is why we follow OOP</span>
<span class="kw2">use</span> Polycademy\Abstracts\aArmor<span class="sy0">;</span>
&nbsp;
<span class="co1">//via the autoloading mechanism, the aArmor will point to Polycademy/Abstracts/aArmor.php then initialise the aArmor abstract, this will be done automatically</span>
<span class="kw2">class</span> SomeClass <span class="kw2">extends</span> aArmor<span class="br0">&#123;</span><span class="br0">&#125;</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=25" title="Download Snippet" class="mediafile mf_php">aArmor.php</a></dt>
<dd><pre class="code file php"><span class="kw2">namespace</span> Polycademy\Abstracts<span class="sy0">;</span>
&nbsp;
<span class="kw2">abstract</span> aArmor<span class="br0">&#123;</span><span class="br0">&#125;</span></pre>
</dd></dl>

<p>
When using namespaces, you need to abide by a similar directory structure. The above code defines the namespace as in Polycademy\MissionChecker. This means <code>SomeClass.php</code> exists in <code>base/path/Polycademy/MissionChecker/SomeClass.php</code>. As you can see the namespace is always defined at where the file is, but does not include the filename itself. The <code>base/path</code> is defined in your autoloader. If you choose to use CiAutoloading, then the base path is at Codeigniter&#039;s <code>application/libraries</code> and <code>application/third_party</code> folder. CiAutoloading also includes the Composer&#039;s own autoloader which has extra features. The <code>use Polycademy\Abstracts\aArmor</code> actually imports the file itself, it&#039;s not just pointing a directory. You can make <code>use</code> import a directory, however then when you call objects this will require you to append the directory name, so it&#039;s easier to import a file. Here&#039;s an example of the directory structure using Codeigniter and CiAutoloading.
</p>
<pre class="code">  application/libraries
    |
    |----Polycademy
            |
            |----MissionChecker
            |       |
            |       |----SomeClass.php
            |       
            |----Abstracts
                    |
                    |----aArmor.php</pre>

<p>
The namespaces are always referred to from the root of the base path. There can be further directories or less directories if you wish.
</p>

<p>
Do note it is possible have <a href="http://www.php.net/manual/en/language.namespaces.definitionmultiple.php" class="urlextern" title="http://www.php.net/manual/en/language.namespaces.definitionmultiple.php"  rel="nofollow">multiple namespaces in one file</a>, however this is a bad practice as it will confuse you and other developers who expect namespaces as directories.
</p>

<p>
Namespaces come to life when using autoloaders, especially PSR-0 compliant autoloaders. According to the PSR-0 rules, you have to namespace and structure your packages in this way:
</p>
<ol>
<li class="level1"><div class="li"> A fully-qualified namespace and class must have the following structure \&lt;Vendor Name&gt;\(&lt;Namespace&gt;)*\&lt;Class Name&gt;.</div>
</li>
<li class="level1"><div class="li"> Each namespace must have a top-level namespace (“Vendor Name”).</div>
</li>
<li class="level1"><div class="li"> Each namespace can have as many sub-namespaces as it wishes.</div>
</li>
<li class="level1"><div class="li"> Each namespace separator is converted to a DIRECTORY_SEPARATOR when loading from the file system.</div>
</li>
<li class="level1"><div class="li"> Each underscore in the class name is converted to a DIRECTORY_SEPARATOR. The underscore has no special meaning in the namespace.</div>
</li>
<li class="level1"><div class="li"> The fully-qualified namespace and class is suffixed with .php when loading from the file system.</div>
</li>
<li class="level1"><div class="li"> Alphabetic characters in vendor names, namespaces, and class names may be of any combination of lower case and upper case.</div>
</li>
</ol>

<p>
So in our example the vendor name would be “Polycademy”, the next namespace should be the package name. In our example that&#039;s either MissionChecker or Abstracts. The 5th rule is why we camelcase our filenames and class names. Most packages that are on Composer follow this structure, but not all of them follow it strictly. It is possible to skip having a vendor name, and just have the package name, and it&#039;s also possible just to autoload classes without namespaces by defining them as a classmap. Refer to <a href="http://getcomposer.org/doc/04-schema.md#autoload" class="urlextern" title="http://getcomposer.org/doc/04-schema.md#autoload"  rel="nofollow">autoloading on Composer</a> for more information on that.
</p>

<p>
As a recommendation when constructing your own libraries, try conforming to “Package/Library” style naming. If you are intending to share it, be PSR-0 compliant with “Vendor/Package/Library” style. However if you&#039;re importing third party libraries that are neither Composer or Sparks, then you should try to convert them into “Vendor/Package/Library” style. These would then be put in the third party folder.
</p>

<p>
There are couple other important facets of namespacing that may be a bit confusing to a beginner. It&#039;s easier to explain this via code. Also note the <a href="http://www.php.net/manual/en/language.namespaces.nsconstants.php" class="urlextern" title="http://www.php.net/manual/en/language.namespaces.nsconstants.php"  rel="nofollow">namespace constants</a>, which you can use to explicitly refer to the current namespace if importing imports classes of the same name.
</p>
<dl class="file">
<dt><a href="/doku.php?do=export_code&amp;id=web_application_development:php_-_server_side_architecture&amp;codeblock=26" title="Download Snippet" class="mediafile mf_php">Mapper.php</a></dt>
<dd><pre class="code file php"><span class="co1">//assume autoloading is setup</span>
&nbsp;
<span class="co1">//ok so this file is in Guzzle/Url directory</span>
<span class="kw2">namespace</span> Guzzle\Url<span class="sy0">;</span>
&nbsp;
<span class="co1">//we're importing something we want to use</span>
<span class="kw2">use</span> Guzzle\Cookie\CookieParser<span class="sy0">;</span>
&nbsp;
<span class="co1">//here we're importing, but we're aliasing it too!</span>
<span class="kw2">use</span> Guzzle\Message <span class="kw1">as</span> Awesome<span class="sy0">;</span>
&nbsp;
<span class="co1">//here we're importing a directory, just imagine that it is a directory and not a file</span>
<span class="kw2">use</span> Guzzle\Directory<span class="sy0">;</span>
&nbsp;
<span class="kw2">class</span> Mapper<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="co1">//there's never any need to specify filename extensions, the classes and files are the same name.</span>
&nbsp;
        <span class="co1">//this works, because we imported the file (remember that class names should match file names)</span>
        <span class="co1">//it first looks at the current namespace, then the imported namespace</span>
        <span class="co1">//this is called an unqualified name</span>
        <span class="re0">$cookie_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> CookieParser<span class="sy0">;</span> 
&nbsp;
        <span class="co1">//this may work, it's not imported, so the current namespace gets appended</span>
        <span class="co1">//it will only work if there was a Guzzle/Url/UrlParser.php</span>
        <span class="co1">//this is also called an unqualified name</span>
        <span class="re0">$url_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> UrlParser<span class="sy0">;</span>
&nbsp;
        <span class="co1">//this is called a qualified name, the current namespace gets appended to it</span>
        <span class="co1">//it becomes Guzzle\Url\Another\Parser.php</span>
        <span class="re0">$another_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> Another\Parser<span class="sy0">;</span>
&nbsp;
        <span class="co1">//this is called a FULLY qualified name, it does not append any of the current namespaces, and it does not recognise imported namespaces. It's like an absolute path.</span>
        <span class="re0">$absolute_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> \Other\Cool\Parser<span class="sy0">;</span>
&nbsp;
        <span class="co1">//this uses an alias, and resolves to Guzzle\Message\Parsing.php</span>
        <span class="re0">$aliased_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> Awesome\Parsing<span class="sy0">;</span>
&nbsp;
        <span class="co1">//this is not an alias, instead it points to the Directory import. So it resolves as Guzzle\Directory\SuperParser;</span>
        <span class="re0">$directory_parser</span> <span class="sy0">=</span> <span class="kw2">new</span> Directory\SuperParser<span class="sy0">;</span>
        <span class="co1">//therefore if the use keyword points to a directory and not to a specific file, all of those files become fair game. However you need to use the last namespace directory and prefix all class initialisations</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
The above code would correspond to this kind of directory structure:
</p>
<pre class="code">  application/libraries
    |
    |----Guzzle
    |       |
    |       |----Url
    |       |       |
    |       |       |----Mapper.php
    |       |       |
    |       |       |----UrlParser.php
    |       |       |
    |       |       |----Another
    |       |               |
    |       |               |----Parser.php
    |       |       
    |       |----Cookie
    |       |       |
    |       |       |----CookeParser.php
    |       |
    |       |----Message
    |       |       |
    |       |       |----Parsing.php
    |       |
    |       |
    |       |
    |       |----Directory
    |               |
    |               |----SuperParser.php
    |
    |----Other
           |
           |----Cool
                   |
                   |----Parser.php</pre>

</div>
<!-- EDIT19 SECTION "Namespaces" [48069-56823] -->
<h3 class="sectionedit20" id="static_classes">Static Classes</h3>
<div class="level3">

<p>
Static classes are actually classes that have static member properties or methods. These properties and methods can be called without instantiating the class. They almost do the same thing as a procedural function list, however they are more flexible to use and more consistent with OOP usage.
</p>

<p>
Static classes are alternatives to procedurally defining a large amount of helper functions that simply operate on data without storing any state itself. It&#039;s better to use static classes in OOP for two reasons. Firstly it&#039;s the consistency with the rest of your OOP architecture, and secondly static classes can be autoloaded, whereas function lists cannot.
</p>

<p>
Static classes are not instantiated. So you don&#039;t call <code>new StaticClass;</code>. You can call the class functions directly.
</p>
<pre class="code php"><span class="kw2">class</span> StaticClass<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> static <span class="kw2">function</span> say_something<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="kw1">echo</span> <span class="st_h">'What!'</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
<span class="co1">//call them directly like this</span>
StaticClass<span class="sy0">::</span><span class="me2">say_something</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The reason you cannot instantiate static classes, is because they don&#039;t store any state, they simply operate on other object&#039;s data. Therefore it doesn&#039;t make any sense to instantiate them. As instantiation is for the purposes of having same class (blueprint) be used for different object representations.
</p>

<p>
Inside a static function, the normally available <code>$this</code> keyword is no longer available. The <code>$this</code> only exists when the object is instantiated. Since static classes are not instantiated, in order call it&#039;s own class methods you have to use the keyword <code>self</code>.
</p>
<pre class="code php"><span class="kw2">class</span> StaticClass<span class="br0">&#123;</span>
&nbsp;
    <span class="kw2">public</span> static <span class="re0">$static_variable</span> <span class="sy0">=</span> <span class="st_h">' Dude!'</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> static <span class="kw2">function</span> say_something<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="kw1">echo</span> <span class="st_h">'What '</span><span class="sy0">;</span>
        <span class="kw2">self</span><span class="sy0">::</span><span class="me2">other_func</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> static <span class="kw2">function</span> other_func<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#123;</span>
&nbsp;
        <span class="kw1">echo</span> <span class="st_h">' Ever'</span><span class="sy0">;</span>
        <span class="co1">//notice how in instantiated objects we use $this-&gt;static_variable; Here we're using self::$static_variable</span>
        <span class="kw1">echo</span> <span class="kw2">self</span><span class="sy0">::</span><span class="re0">$static_variable</span><span class="sy0">;</span>
&nbsp;
    <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span>
&nbsp;
StaticClass<span class="sy0">::</span><span class="me2">say_something</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
We would put any static classes into our libraries folder. You won&#039;t need many static classes, as most things should be instantiated objects. But if you have a bunch of functions related to each other that don&#039;t store any state in variables, then you can use static classes.
</p>

</div>
<!-- EDIT20 SECTION "Static Classes" [56824-59150] -->
<h2 class="sectionedit21" id="database">Database</h2>
<div class="level2">

<p>
Databases are where we store overall application state in the long term. Programming code that stores state, only store the state during the running of the session. In the case of <abbr title="Hypertext Preprocessor">PHP</abbr>, unless you&#039;re running a daemon, this only during the request and response cycle. Which means everything gets reset to their default status and the variables won&#039;t hold anything until you startup the program again. Therefore we need databases.
</p>

<p>
There are many databases catered to many different situations. The one that we&#039;re going to be using is MySQL, which is the most popular relational database management system, and one more the flexible ones.
</p>

<p>
Think of databases like Microsoft Excel. The excel program you&#039;re running can be thought of as an database instance. The excel document you opened can be thought of as the database. Each sheet in excel can be thought of as a table. Each table or sheet can have a large amount of columns and rows. We store data in a tabulated form, with each row denoting a section of related data, and each column being the type of the data. All of this is stored in multiple tables, and each table represents a plurality of related data.
</p>

<p>
If you think about a blog. There would be a blog table. The table can have 5 columns being id, author, title, content and date. Each blog post occupies a row taking up those 5 columns. So the first blog post may be &#039;1&#039;, &#039;Roger&#039;, &#039;The Beginning of the End&#039;, &#039;Today we went on a fishing trip, I saw lots of fishes. Then we went home.&#039;, &#039;2013/01/01&#039;. Each blog post after the first would do the same thing.
</p>

<p>
Database software usually don&#039;t have a <abbr title="Graphical User Interface">GUI</abbr> that comes with it. You would normally have to interface it using the command line. However the PHPMyAdmin adds a web based <abbr title="Graphical User Interface">GUI</abbr> to any MySQL databases, so you&#039;ll do most of your database work there. For other databases, you have to find other GUIs. When interfacing with the database in programming, you would use an abstraction layer such as Codeigniter&#039;s Active Records or <abbr title="Hypertext Preprocessor">PHP</abbr>&#039;s PDO extension.
</p>
<div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/4XX7X7upEIU%26list%3DPLwwh-11EOGvMTTrLIdKsmEpn0C0nk9CRQ?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/4XX7X7upEIU%26list%3DPLwwh-11EOGvMTTrLIdKsmEpn0C0nk9CRQ?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div>
<p>
Before we start using the database, we should get acquainted with some of the architectural concepts in using databases. It&#039;s important to understand that databases are not part of your application server. They are a totally different long running process (it is persistent and not part of the request and response cycle) that is running and your programming in the application server connects to it and interacts with its <abbr title="Application Programming Interface">API</abbr>.
</p>

</div>
<!-- EDIT21 SECTION "Database" [59151-61680] -->
<h3 class="sectionedit22" id="sql_and_nosql">SQL and NoSQL</h3>
<div class="level3">

<p>
You may have heard the terms <abbr title="Structured Query Language">SQL</abbr> and NoSQL. <abbr title="Structured Query Language">SQL</abbr> stands for “structured query language”, and NoSQL means “not only structured query language”. Since the 1970s it has become a standardised and popular language that interfaces with relational (tabular) based databases. Now when people talk about <abbr title="Structured Query Language">SQL</abbr> databases, they mean not only that the database&#039;s <abbr title="Application Programming Interface">API</abbr> require you to use <abbr title="Structured Query Language">SQL</abbr>, but that the database is relational.
</p>
<div class="vshare__right"><!--[if !IE]> -->
<object width="255" height="210" type="application/x-shockwave-flash" data="http://www.vimeo.com/moogaloop.swf?clip_id=46886385">
<!-- <![endif]-->
<!--[if IE]>
<object width="255" height="210" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.vimeo.com/moogaloop.swf?clip_id=46886385" />
<!--><!-- -->
  <param name="clip_id" value="46886385" />
  <param name="FlashVars" value="clip_id=46886385" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div>
<p>
NoSQL arrived on the scene recently in 1998, and has become more popular in recent years. Essentially NoSQL databases don&#039;t conform to the relational model, so they don&#039;t store data in a tabular format. They also don&#039;t use the <abbr title="Structured Query Language">SQL</abbr> language as an <abbr title="Application Programming Interface">API</abbr>. NoSQL databases are useful for data that don&#039;t conform or are easily represented in tabular format. Some NoSQL databases are faster than <abbr title="Structured Query Language">SQL</abbr> databases, simply because <abbr title="Structured Query Language">SQL</abbr> databases usually have more checks and balances to keep the data reliable.
</p>

<p>
<a href="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis" class="urlextern" title="http://kkovacs.eu/cassandra-vs-mongodb-vs-couchdb-vs-redis"  rel="nofollow">NoSQL is not one type of database</a>, there are many different ways of storing data outside of relational databases, however the topic is beyond the scope of this course. You can find out more in the <a href="http://en.wikipedia.org/wiki/NoSQL" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/NoSQL">wikipedia article on NoSQL databases</a>.
</p>

<p>
There are two NoSQL databases that have become popular and can be used for general applications. They are <a href="http://www.mongodb.org/" class="urlextern" title="http://www.mongodb.org/"  rel="nofollow">MongoDB</a> and <a href="http://redis.io/" class="urlextern" title="http://redis.io/"  rel="nofollow">Redis</a>. The blog example can be easily replicated in MongoDB. The key difference between MongoDB and MySQL that is quite important for you as a startup to realise is this: One of the reasons MongoDB is faster than MySQL because it has poorer ACID transactional support.
</p>

<p>
What are ACID transactions? Well first transactions are a unit of work performed within a database management system, and treated in a coherent and reliable way independent of other transactions. Transactions are used when you need that unit of work to be reliable even if the system crashes or bugs out and the unit of work stops either completely or partially. This unit of work needs to be isolated from the rest of the system, so there is no side effects from any erroneous operation. <a href="http://en.wikipedia.org/wiki/ACID" class="urlextern" title="http://en.wikipedia.org/wiki/ACID"  rel="nofollow">Transactions need to be ACID</a>. This means atomic, consistent, isolated and durable.
</p>
<ul>
<li class="level1"><div class="li"> Atomic means the transaction is all or nothing.</div>
</li>
<li class="level1"><div class="li"> Consistent means that completing any transaction must keep the database valid, that is the transaction needs to conform to any data entry rules.</div>
</li>
<li class="level1"><div class="li"> Isolated means that if transactions are performed concurrently, the state of the system should be as if the transactions were performed one after the other. This could mean that the database is locked for a transaction and is opened when it finishes.</div>
</li>
<li class="level1"><div class="li"> Durable means that once a transaction completes, the data needs to be stored permanently to disk even if the system crashes straight afterwards.</div>
</li>
</ul>

<p>
ACID transactions are paramount for databases doing financial work. Imagine you went to an online store and bought a game. You put in your credit card details and click purchase. The system at minimum is doing two things. It is logging your credit card to the financial company, and then putting a record into its sales/delivery system. So that your money gets processed and your good gets delivered. But what if halfway through this process, the system unexpectedly crashed? If the transaction was not ACID, then your money gets processed, but the purchase/delivery order wouldn&#039;t be placed!
</p>

<p>
MySQL and most other <abbr title="Structured Query Language">SQL</abbr> databases have good transactional support, and you can setup <a href="http://ellislab.com/codeigniter/user-guide/database/transactions.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/transactions.html"  rel="nofollow">transactions using Codeigniter&#039;s active records</a>. This abstracts the process making it easier to work with. Do note that the <a href="http://www.kavoir.com/2009/09/mysql-engines-innodb-vs-myisam-a-comparison-of-pros-and-cons.html" class="urlextern" title="http://www.kavoir.com/2009/09/mysql-engines-innodb-vs-myisam-a-comparison-of-pros-and-cons.html"  rel="nofollow">MySQL table needs to be setup with the InnoDB table engine</a> to have transactions.
</p>

<p>
So when choosing between using MongoDB or MySQL. If you the data you&#039;re trying to store naturally comes to mind as a relational data, that is data in tabular format that have relationships to each column, then choose MySQL. If your data doesn&#039;t fit that and comes to mind as an object that could have a variable number of columns (thus variable number of properties), choose MongoDB. If you need transactions, always use a <abbr title="Structured Query Language">SQL</abbr> database.
</p>

</div>
<!-- EDIT22 SECTION "SQL and NoSQL" [61681-66107] -->
<h3 class="sectionedit23" id="database_planning">Database Planning</h3>
<div class="level3">

<p>
The complexity of your database depends on two things. Firstly the quantity and coherence of your data set, and what kind of questions and answers you want to extract out of your database. For relational databases, there are two concepts that are important in planning out your databases. The first is designing your <a href="http://en.wikipedia.org/wiki/Database schema" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Database schema">schema</a>, and the second is <a href="http://en.wikipedia.org/wiki/Database normalization" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Database normalization">database normalisation</a>.
</p>

<p>
For most web applications, unless you&#039;re operating on big data, your schema planning should be fairly straight forward. However sometimes your web application will grow a bit more complex, and perhaps you want to extract insight from the data you have. This knowledge area is out of the scope of this course, however you can refer to the these tutorials if you want to learn more:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://net.tutsplus.com/tutorials/databases/visual-database-creation-with-mysql-workbench/" class="urlextern" title="http://net.tutsplus.com/tutorials/databases/visual-database-creation-with-mysql-workbench/"  rel="nofollow">Visual Database Schema Creation with MySQL Workbench</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.dreamincode.net/forums/topic/179103-relational-database-design-normalization/" class="urlextern" title="http://www.dreamincode.net/forums/topic/179103-relational-database-design-normalization/"  rel="nofollow">Database Normalisation Tutorial</a></div>
</li>
</ul>

</div>

<h4 id="data_types">Data Types</h4>
<div class="level4">

<p>
For pretty much every table you create, you&#039;ll need at least an <code>id</code> column, which would be the unique number pointing to any particular row of data. This <code>id</code> column needs to have a datatype of integer or larger, and it should have the property of <code>AUTO_INCREMENT</code>, and you should also position it as the primary key. The property of <code>AUTO_INCREMENT</code> makes the row automatically increment the number as you insert more data even if you don&#039;t insert anything into it (this is why we don&#039;t have to worry about it when inserting new rows in the model). Making it the primary key makes MySQL index the <code>id</code> column and gives it precedence making any look up queries with a matching id super fast.
</p>

<p>
You should also take care to choose the correct data type for each column. Use <code>VARCHAR</code> for any text with a set number of characters. Use <code>TEXT</code> when you don&#039;t know how the long the data will be. Use <code>FULLTEXT</code> when you&#039;re indexing it using MyISAM tables. Use <code>TINYINT</code> if it&#039;s a binary true/false boolean data field. You can find out more at <a href="http://dev.mysql.com/doc/refman/5.0/en/data-types.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.0/en/data-types.html"  rel="nofollow">MySQL&#039;s documentation on data types</a>.
</p>

</div>
<!-- EDIT23 SECTION "Database Planning" [66108-68393] -->
<h3 class="sectionedit24" id="active_records">Active Records</h3>
<div class="level3">

<p>
When interfacing with a database programmatically, it&#039;s best practice to use a library to abstract the process of connecting to the database and also provide a standard <abbr title="Application Programming Interface">API</abbr> to all the different database commands. This is because although many <abbr title="Structured Query Language">SQL</abbr> databases use <abbr title="Structured Query Language">SQL</abbr>, they often have differences in their <abbr title="Structured Query Language">SQL</abbr> commands. It&#039;s far more easier to have a library remember all these commands then you writing different commands for different databases.
</p>

<p>
Another reason to use libraries is security. A library will often force you to conform to a certain of writing <abbr title="Structured Query Language">SQL</abbr> commands, and libraries would automatically escape your <abbr title="Structured Query Language">SQL</abbr> commands to prevent any injected <abbr title="Structured Query Language">SQL</abbr> destroying your database.
</p>

<p>
For <abbr title="Hypertext Preprocessor">PHP</abbr> in general, one the best native extensions to use is <a href="http://php.net/manual/en/book.pdo.php" class="urlextern" title="http://php.net/manual/en/book.pdo.php"  rel="nofollow">PDO</a>. However for Codeigniter, it has a native library called <a href="http://ellislab.com/codeigniter/user-guide/database/active_record.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/active_record.html"  rel="nofollow">Active Records</a>, and it&#039;s simpler to use. Refer to Codeigniter&#039;s documentation on the Active Records <abbr title="Application Programming Interface">API</abbr> for more information. Do note that Active Records is a subset of Codeigniter&#039;s overall <a href="http://ellislab.com/codeigniter/user-guide/database/index.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/index.html"  rel="nofollow">Database class</a>. The database class provides much more functionality.
</p>

</div>

<h4 id="codeigniter_database_configuration">Codeigniter Database Configuration</h4>
<div class="level4">

<p>
For Codeigniter you should be configuring <a href="http://ellislab.com/codeigniter/user-guide/database/configuration.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/configuration.html"  rel="nofollow">your database&#039;s connections in the configuration directory</a> <code>application/config/database.php</code>.
</p>

<p>
Your <a href="http://ellislab.com/codeigniter/user-guide/database/connecting.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/connecting.html"  rel="nofollow">database can then be autoloaded</a> through Codeigniter&#039;s <code>application/config/autoload.php</code> and always switched on no matter which the user is on.
</p>

<p>
You should set your <code>db_debug</code> option to false during production and if you&#039;re explicitly logging the database errors as shown in the MVC model section.
</p>

<p>
Note to access database errors when <code>db_debug</code> is off you need to use these two undocumented properties:
</p>
<pre class="code php"><span class="re0">$num</span>   <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span>_error_number<span class="br0">&#40;</span><span class="br0">&#41;</span>
<span class="re0">$msg</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span>_error_message<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="co1">//this is also useful to examine the actual query passed into the database</span>
<span class="re0">$last_query</span> <span class="sy0">=</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">last_query</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co1">//you can then log it via log_message</span>
log_message<span class="br0">&#40;</span><span class="st_h">'error'</span><span class="sy0">,</span> <span class="st_h">'Problem Inserting to user table: '</span> <span class="sy0">.</span> <span class="re0">$msg</span> <span class="sy0">.</span> <span class="st_h">' ('</span> <span class="sy0">.</span> <span class="re0">$num</span> <span class="sy0">.</span> <span class="st_h">'), using this query: &quot;'</span> <span class="sy0">.</span> <span class="re0">$last_query</span> <span class="sy0">.</span> <span class="st_h">'&quot;'</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Refer <a href="http://ellislab.com/codeigniter/user-guide/general/errors.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/general/errors.html"  rel="nofollow">Codeigniter&#039;s documentation on error handling</a> for more information on logging. Note that because log files are written to disk, this won&#039;t work in hosts that don&#039;t offer writable directories. Cloud hosts normally don&#039;t offer writable directories. However it is possible to make your helper class to log it to a third party or send logs to an email.
</p>

</div>
<!-- EDIT24 SECTION "Active Records" [68394-71210] -->
<h3 class="sectionedit25" id="search">Search</h3>
<div class="level3">

<p>
One of the most common things we do on a database is search for data. Actually most of the times we&#039;re selecting data that match some condition. That is not considered to be a search problem, it&#039;s a matching problem. This section specifically refers to wildcard search using the <code>LIKE</code> operator or full text search with indexes.
</p>

<p>
The <a href="http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.0/en/pattern-matching.html"  rel="nofollow">SQL &#039;&#039;LIKE&#039;&#039; operator</a> works like pattern matching. Essentially when you call something like <code>SELECT * FROM pet WHERE name LIKE &#039;b%&#039;;</code> and this would get all rows from the pet table, where the name starts with “b” and any number of characters after “b”. The ”%” sign is a wildcard. If you&#039;re looking for a row column to mention the word “cat” anywhere, then you would change the “b%” to ”%cat%”. And of course if you&#039;re looking for something to end in “cat”, then it would ”%cat”. The Codeigniter&#039;s Active Records library provides an abstraction for these commands giving you a very simple search functionality. Commonly the <code>LIKE</code> operator is used to search for tags. Imagine you had a blog post, and each blog post is given a set of tags. Kind of like the tags that Youtube uses for their videos. In order to search for these tags, you would not use the <code>WHERE</code> operator, you would use <code>LIKE</code> with <code>%tagname%</code>. If you had multiple tags to search for, you could either use <code>AND LIKE</code> or <code>OR LIKE</code>. The former makes sure that all tags are present, the latter makes sure at least one tag is present. 
</p>

<p>
Using <code>LIKE</code> is highly precise, often you need more fine grained control over you search capability. What if you&#039;re searching for “cat”, but a tag has “cats”. Then the <code>LIKE</code> operator would not the tag with “cats” unless you explicitly specified them. What about “kittens”? What happens when the data your searching through is larger, like perhaps you&#039;re searching through the blog&#039;s article content. This is when you need full text search.
</p>

<p>
<a href="http://en.wikipedia.org/wiki/Full text search" class="interwiki iw_wp" title="http://en.wikipedia.org/wiki/Full text search">Full text search</a> works by first establishing an index of the data. This index often groups related terms together, this is called stemming. For example, the words “drives”, “drove”, and “driven” will be recorded in the index under the single concept word “drive.” It will also ignore stop words such as <em>the</em>, <em>is</em>, <em>at</em>, <em>which</em>, and <em>on</em>. Then the search algorithm goes through the index instead of going through the raw data. This makes for a faster search on a large amount of content. The balancing act in using full text search is between precision and recall. The <code>LIKE</code> operator has 100% precision, however it will have low recall. This makes it powerful if you&#039;re searching for an exact term. But often we don&#039;t know what kind of result we&#039;re looking for, so the full text search has higher recall. This however creates the problem of false positives. Results which are irrelevant to our query. There are a number of statistical and algorithmic techniques to improve a search engine, and they are all catered to different situations. You can read more about them on the Wikipedia article on full text search. For our purposes, we can keep it simple and use <code>LIKE</code> when we&#039;re looking for tag like data, and full text search for everything else.
</p>

<p>
To implement full text search on MySQL, you need to use the MyISAM table engine, not InnoDB. Remember that InnoDB provides transactions and is more efficient for write intensive tables, whereas MyISAM is optimised for read intensive and thus search based tables. You can use both tables together in a single database. Setting up needs to be done when you create the table first, not after you create the table. To setup with the MyISAM engine, you can either use PHPMyAdmin&#039;s <abbr title="Graphical User Interface">GUI</abbr>, <a href="http://www.ignoredbydinosaurs.com/2012/05/database-migrations-codeigniter-101" class="urlextern" title="http://www.ignoredbydinosaurs.com/2012/05/database-migrations-codeigniter-101"  rel="nofollow">Codeigniter&#039;s DBForge</a> or straight <abbr title="Structured Query Language">SQL</abbr> such as this:
</p>
<pre class="code sql"><span class="kw1">CREATE</span> <span class="kw1">TABLE</span> pages <span class="br0">&#40;</span>
  id <span class="kw1">INT</span><span class="br0">&#40;</span><span class="nu0">10</span><span class="br0">&#41;</span> <span class="kw1">UNSIGNED</span> <span class="kw1">NOT</span> <span class="kw1">NULL</span> <span class="kw1">AUTO_INCREMENT</span><span class="sy0">,</span>
  url text <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span>
  title text <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span>
  content text <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span>
  updated datetime <span class="kw1">NOT</span> <span class="kw1">NULL</span><span class="sy0">,</span>
  <span class="kw1">PRIMARY</span> <span class="kw1">KEY</span>  <span class="br0">&#40;</span>id<span class="br0">&#41;</span><span class="sy0">,</span>
  FULLTEXT <span class="kw1">KEY</span> content <span class="br0">&#40;</span>content<span class="br0">&#41;</span>
<span class="br0">&#41;</span> ENGINE<span class="sy0">=</span>MyISAM</pre>

<p>
If you already created the table, you can alter the table&#039;s engine using the <a href="http://dev.mysql.com/doc/refman/5.0/en/alter-table.html" class="urlextern" title="http://dev.mysql.com/doc/refman/5.0/en/alter-table.html"  rel="nofollow">ALTER TABLE</a> syntax. Although it&#039;s easier to use PHPMyAdmin&#039;s <abbr title="Graphical User Interface">GUI</abbr>. We&#039;re going to start using the database migration tool via Codeigniter&#039;s DBForge, so we can keep our database&#039;s schema synchronised between development servers. Do note that DBForge currently doesn&#039;t support changing the engine of the table, so you&#039;ll need to add an additional command using standard query methods.
</p>
<pre class="code php"><span class="co1">//refer to migrations section to learn more about why we're doing this</span>
<span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">query</span><span class="br0">&#40;</span><span class="st_h">'ALTER TABLE  `table_name` ENGINE = MYISAM'</span><span class="br0">&#41;</span><span class="sy0">;</span>  </pre>

<p>
Active Records by itself does not have abstracted methods for full text search. However it is possible using the <code>$this→db→where()</code> method. It has some quirks though. The method by default places backticks on your table and field names. This will corrupt your <abbr title="Structured Query Language">SQL</abbr> query. You need to run a command with the 2nd parameter equal to <code>NULL</code> and the third parameter equal to <code>FALSE</code>.
</p>
<pre class="code php"><span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">db</span><span class="sy0">-&gt;</span><span class="me1">where</span><span class="br0">&#40;</span><span class="st_h">'MATCH (field) AGAINST (&quot;value&quot;)'</span><span class="sy0">,</span> <span class="kw4">NULL</span><span class="sy0">,</span> <span class="kw4">FALSE</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
To learn about the syntax of full text searches check out these two external resources:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.mysqltutorial.org/mysql-full-text-search.aspx" class="urlextern" title="http://www.mysqltutorial.org/mysql-full-text-search.aspx"  rel="nofollow">http://www.mysqltutorial.org/mysql-full-text-search.aspx</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://devzone.zend.com/26/using-mysql-full-text-searching/" class="urlextern" title="http://devzone.zend.com/26/using-mysql-full-text-searching/"  rel="nofollow">http://devzone.zend.com/26/using-mysql-full-text-searching/</a></div>
</li>
</ul>

<p>
You can also elect to use the <code>$this→db→query()</code> method as an alternative to Active Records. However this does not automatically escape the values for your <abbr title="Structured Query Language">SQL</abbr> query opening you up to security issues. You will need to manually escape the values or use query binding. All of this is discussed in <a href="http://ellislab.com/codeigniter/user-guide/database/queries.html" class="urlextern" title="http://ellislab.com/codeigniter/user-guide/database/queries.html"  rel="nofollow">Codeigniter&#039;s documentation on database queries</a>.
</p>

<p>
If you have a large amount of content, and search is starting to get slower. You can either re-architect your database using one of the other database stores, or you can integrate the <a href="http://sphinxsearch.com/" class="urlextern" title="http://sphinxsearch.com/"  rel="nofollow">Sphinx search engine</a>.
</p>
<div class="vshare__center"><!--[if !IE]> -->
<object width="520" height="406" type="application/x-shockwave-flash" data="http://www.youtube.com/v/d--v0NhjIfc?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1">
<!-- <![endif]-->
<!--[if IE]>
<object width="520" height="406" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">
    <param name="movie" value="http://www.youtube.com/v/d--v0NhjIfc?allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
<!--><!-- -->
  <param name="allowFullScreen" value="true" />
  <param name="allowScriptAccess" value="always" />
  <param name="fs" value="1" />
  <param name="FlashVars" value="allowFullScreen=true&amp;allowScriptAccess=always&amp;fs=1" />
The <a href="http://www.adobe.com/products/flashplayer/">Adobe Flash Plugin</a> is needed to display this content.
</object>
<!-- <![endif]-->
</div>
</div>
<!-- EDIT25 SECTION "Search" [71211-77403] -->
<h3 class="sectionedit26" id="redis">Redis</h3>
<div class="level3">

<p>
Redis is a special database that is catered towards volatile data. This is data in which persistence is not a major issue. It&#039;s data you&#039;re willing to throw away after finishing the session. It operates like an in-memory key to value data store. This means it is super fast.
</p>

<p>
Redis in terms of web application development is usually used where memcached was used before. Essentially you can use it for session data, real time messages, publish and subscribing, caching and chat.
</p>

<p>
We can switch to using Redis for session data if you require that kind of performance. For now we&#039;ll stick with working with MySQL, because it&#039;s simple and its enough for startup traffic. However if you&#039;re interested in hooking up Redis check out these articles:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://try.redis.io/" class="urlextern" title="http://try.redis.io/"  rel="nofollow">Interative Redis Tutorial</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://phpmaster.com/an-introduction-to-redis-in-php-using-predis/" class="urlextern" title="http://phpmaster.com/an-introduction-to-redis-in-php-using-predis/"  rel="nofollow">Introduction to using Redis with PHP</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.justincarmony.com/blog/2012/01/10/php-workers-with-redis-solo/" class="urlextern" title="http://www.justincarmony.com/blog/2012/01/10/php-workers-with-redis-solo/"  rel="nofollow">Using Predis as a message queue to pass jobs</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://blog.jmoz.co.uk/websockets-ratchet-react-redis" class="urlextern" title="http://blog.jmoz.co.uk/websockets-ratchet-react-redis"  rel="nofollow">Redis with Web Sockets</a></div>
</li>
<li class="level1"><div class="li"> Libraries for utilising Redis: <a href="https://github.com/joelcox/codeigniter-redis" class="urlextern" title="https://github.com/joelcox/codeigniter-redis"  rel="nofollow">Codeigniter Redis</a>, <a href="https://github.com/nrk/predis" class="urlextern" title="https://github.com/nrk/predis"  rel="nofollow">Predis</a> and <a href="https://github.com/nrk/predis-async" class="urlextern" title="https://github.com/nrk/predis-async"  rel="nofollow">Predis-Async (requires daemon)</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://garantiadata.com/" class="urlextern" title="http://garantiadata.com/"  rel="nofollow">Redis Cloud Server</a> - for using with Cloud9</div>
</li>
</ul>

</div>
<!-- EDIT26 SECTION "Redis" [77404-78838] -->
<h3 class="sectionedit27" id="migrations">Migrations</h3>
<div class="level3">

<p>
Talk about using DB forge for migrations
</p>

</div>
<!-- EDIT27 SECTION "Migrations" [78839-78901] -->
<h2 class="sectionedit28" id="security">Security</h2>
<div class="level2">

<p>
Should make a security “checklist” before deployment.
</p>

</div>
<!-- EDIT28 SECTION "Security" [78902-78978] -->
<h3 class="sectionedit29" id="input_validation">Input Validation</h3>
<div class="level3">

<p>
Escaping
</p>

<p>
Testing against rules
</p>

<p>
<abbr title="Structured Query Language">SQL</abbr> injection
</p>

</div>
<!-- EDIT29 SECTION "Input Validation" [78979-79054] -->
<h3 class="sectionedit30" id="csrf">CSRF</h3>
<div class="level3">

<p>
Handling Passwords
</p>

</div>
<!-- EDIT30 SECTION "CSRF" [79055-79091] -->
<h3 class="sectionedit31" id="handling_passwords">Handling Passwords</h3>
<div class="level3">

<p>
Salting
</p>

<p>
Bcrypt encryption
</p>

<p>
<a href="http://crackstation.net/hashing-security.htm" class="urlextern" title="http://crackstation.net/hashing-security.htm"  rel="nofollow">http://crackstation.net/hashing-security.htm</a>
</p>

<p>
<a href="http://php.net/manual/en/faq.passwords.php" class="urlextern" title="http://php.net/manual/en/faq.passwords.php"  rel="nofollow">http://php.net/manual/en/faq.passwords.php</a>
</p>

<p>
<a href="https://gist.github.com/nikic/3707231" class="urlextern" title="https://gist.github.com/nikic/3707231"  rel="nofollow">https://gist.github.com/nikic/3707231</a>
</p>

<p>
<a href="https://wiki.php.net/rfc/password_hash" class="urlextern" title="https://wiki.php.net/rfc/password_hash"  rel="nofollow">https://wiki.php.net/rfc/password_hash</a>
</p>

<p>
Can we use this? <a href="https://github.com/ircmaxell/password_compat" class="urlextern" title="https://github.com/ircmaxell/password_compat"  rel="nofollow">https://github.com/ircmaxell/password_compat</a> min version 5.3.7. Cannot run on C9 atm, or Appfog. However Pagodabox and dotCloud will work. Also local installation of <abbr title="Hypertext Preprocessor">PHP</abbr> will work too.
</p>

</div>
<!-- EDIT31 SECTION "Handling Passwords" [79092-79520] -->
<h3 class="sectionedit32" id="payments_credit_cards">Payments &amp; Credit Cards</h3>
<div class="level3">

<p>
In short don&#039;t bother. Leave it to the experts. Have a third party process transactions and <abbr title="Secure Sockets Layer">SSL</abbr> at all times
</p>

</div>
<!-- EDIT32 SECTION "Payments & Credit Cards" [79521-79665] -->
<h3 class="sectionedit33" id="ssl">SSL</h3>
<div class="level3">

<p>
For transmitting any sensitive information
</p>

</div>
<!-- EDIT33 SECTION "SSL" [79666-79723] -->
<h2 class="sectionedit34" id="sessions_authentication">Sessions &amp; Authentication</h2>
<div class="level2">

<p>
Cursory note about <abbr title="Asynchronous JavaScript and XML">AJAX</abbr>
</p>

</div>
<!-- EDIT34 SECTION "Sessions & Authentication" [79724-79787] -->
<h3 class="sectionedit35" id="sessions">Sessions</h3>
<div class="level3">

<p>
Cookie based
</p>

<p>
<abbr title="Uniform Resource Locator">URL</abbr> based
</p>

<p>
<abbr title="Hypertext Preprocessor">PHP</abbr> Session based
</p>

<p>
Database based (best!) using Redis
</p>

</div>
<!-- EDIT35 SECTION "Sessions" [79788-79887] -->
<h3 class="sectionedit36" id="authentication_system">Authentication System</h3>
<div class="level3">

<p>
Login password matching
</p>

<p>
Permissions using group system and bitwise operators
</p>

<p>
<a href="http://ulogin.sourceforge.net/" class="urlextern" title="http://ulogin.sourceforge.net/"  rel="nofollow">http://ulogin.sourceforge.net/</a>
</p>

</div>
<!-- EDIT36 SECTION "Authentication System" [79888-80031] -->
<h3 class="sectionedit37" id="access_control_list">Access Control List</h3>
<div class="level3">

<p>
<a href="https://github.com/benedmunds/CodeIgniter-Ion-Auth" class="urlextern" title="https://github.com/benedmunds/CodeIgniter-Ion-Auth"  rel="nofollow">https://github.com/benedmunds/CodeIgniter-Ion-Auth</a>
</p>

<p>
<a href="http://lucdebrouwer.nl/adding-zend-acl-to-codeigniter/" class="urlextern" title="http://lucdebrouwer.nl/adding-zend-acl-to-codeigniter/"  rel="nofollow">http://lucdebrouwer.nl/adding-zend-acl-to-codeigniter/</a>
</p>

</div>
<!-- EDIT37 SECTION "Access Control List" [80032-80169] -->
<h3 class="sectionedit38" id="ajax">AJAX</h3>
<div class="level3">

<p>
Can use normal sessions
</p>

<p>
Can use REST based authentication using <abbr title="Application Programming Interface">API</abbr> key (but more for providing external service_
</p>

<p>
Username &amp; Login on each request
</p>

<p>
Using Oauth and Oauth2 but refer to providing web services
</p>

</div>
<!-- EDIT38 SECTION "AJAX" [80170-80395] -->
<h3 class="sectionedit39" id="oauth">Oauth</h3>
<div class="level3">

<p>
Login via whatever… you can build it yourself as an Oauth consumer and even provide login as by provisining Oauth… but you can just this right now…
</p>

<p>
<a href="http://hybridauth.sourceforge.net/" class="urlextern" title="http://hybridauth.sourceforge.net/"  rel="nofollow">http://hybridauth.sourceforge.net/</a>
</p>

</div>
<!-- EDIT39 SECTION "Oauth" [80396-80602] -->
<h2 class="sectionedit40" id="htaccess">.htaccess</h2>
<div class="level2">

<p>
For apache
</p>

<p>
<abbr title="Uniform Resource Locator">URL</abbr> rewriting
</p>

<p>
GZIP Compression
</p>

</div>
<!-- EDIT40 SECTION ".htaccess" [80603-80670] -->
<h2 class="sectionedit41" id="caching">Caching</h2>
<div class="level2">

</div>
<!-- EDIT41 SECTION "Caching" [80671-80691] -->
<h3 class="sectionedit42" id="opcode_caching">Opcode Caching</h3>
<div class="level3">

<p>
Alredy done by APC
</p>

</div>
<!-- EDIT42 SECTION "Opcode Caching" [80692-80737] -->
<h3 class="sectionedit43" id="view_file_caching">View File Caching</h3>
<div class="level3">

<p>
Include partial or fragment caching
</p>

</div>
<!-- EDIT43 SECTION "View File Caching" [80738-80803] -->
<h3 class="sectionedit44" id="database_caching">Database Caching</h3>
<div class="level3">

<p>
Caching database calls, but also storing data into a database that is sometimes called from external web services
</p>

<p>
Using either Redis (also memory) or MongoDB
</p>

</div>
<!-- EDIT44 SECTION "Database Caching" [80804-80991] -->
<h3 class="sectionedit45" id="browser_caching">Browser Caching</h3>
<div class="level3">

<p>
Using .htaccess
</p>

</div>
<!-- EDIT45 SECTION "Browser Caching" [80992-81034] -->
<h2 class="sectionedit46" id="concurrent_processing">Concurrent Processing</h2>
<div class="level2">

<p>
Multithreading <abbr title="Hypertext Preprocessor">PHP</abbr> is not multithreaded
</p>

<p>
For offloading work (image thumbnailing), distributing work (getting data from multiple places).
</p>

<p>
Using daemons
</p>

<p>
Using ZMQ
</p>

<p>
Using Gearman workers
</p>

<p>
A note due to host environments, you may not able to use daemons, zmq or gearman. You may then have to use hacks, or use dotCloud&#039;s workers. Or thirdparty the workers.
</p>

<p>
Use Supervisor to keep track of tasks
</p>

</div>
<!-- EDIT46 SECTION "Concurrent Processing" [81035-81465] -->
<h2 class="sectionedit47" id="consuming_web_services_apis">Consuming Web Services APIs</h2>
<div class="level2">

<p>
Using REST
</p>

<p>
Oauth
</p>

<p>
Oauth2
</p>

</div>
<!-- EDIT47 SECTION "Consuming Web Services APIs" [81466-81533] -->
<h2 class="sectionedit48" id="providing_web_services_apis">Providing Web Services APIs</h2>
<div class="level2">

<p>
REST provision
</p>

<p>
Oauth Provision
</p>

<p>
JSON
</p>

<p>
Pusher <abbr title="Application Programming Interface">API</abbr>
</p>

</div>
<!-- EDIT48 SECTION "Providing Web Services APIs" [81534-81625] -->
<h2 class="sectionedit49" id="sockets_rtc">Sockets &amp; RTC</h2>
<div class="level2">

<p>
Sockets using Ratchet (daemons) (Pub/Sub) and HAProxy (Ratchet can provide an always on subscriber or publisher..?)
</p>

<p>
RTC (tokbox) and UDP and TCP
</p>

</div>
<!-- EDIT49 SECTION "Sockets & RTC" [81626-] -->